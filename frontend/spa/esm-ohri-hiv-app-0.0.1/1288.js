(self.webpackChunkesm_ohri_hiv_app=self.webpackChunkesm_ohri_hiv_app||[]).push([[1288],{29270:(e,t,s)=>{"use strict";s.d(t,{ue:()=>A,Lq:()=>i,AN:()=>u,V5:()=>l,q3:()=>j,Ig:()=>m,am:()=>f,k$:()=>b,JH:()=>h,zj:()=>p,Jf:()=>v,kT:()=>g,Xm:()=>y,sy:()=>k,B1:()=>w});var n=s(9035),a=s(19034),r=s.n(a),o=s(18394);const c="/ws/rest/v1/";function A(e){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Encounter?patient=${e}&_sort=-date&_count=1`)}function i(e=1,t=10){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Patient?_getpagesoffset=${e}&_count=${t}`)}function u(){let e=r()().format("YYYY-MM-DD");return(0,n.openmrsFetch)(`/ws/fhir2/R4/Encounter?date=${e}`).then((({data:e})=>e.entry?.length?d(e):[]))}function l(e,t,s){let a=r()().format("YYYY-MM-DD"),o=r()().subtract(s,"days").format("YYYY-MM-DD");return(0,n.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${e}${t?`&value-concept=${t}`:""}${s?`&_lastUpdated=ge${o}&_lastUpdated=le${a}`:""}`).then((({data:e})=>e.entry?.length?d(e):[]))}function d(e){let t=e.entry.map((e=>e.resource.subject.reference));return t=new Set([...t]),t=Array.from(t),Promise.all(t.map((e=>(0,n.openmrsFetch)("/ws/fhir2/R4/"+e))))}async function j(e,t){const{data:s}=await(0,n.openmrsFetch)(`/ws/rest/v1/cohortm/cohort/${e}${t?`?v=${t}`:""}`);return s.cohortMembers=s.cohortMembers.filter((e=>!e.voided)),s}async function m(e,t){const s=t?t.join("&"):"",a=s?`reportingrest/cohort/${e}?${s}`:`reportingrest/cohort/${e}`,{data:r}=await(0,n.openmrsFetch)(c+a);return r}async function f(e,t){const s=t?t.join("&"):"",a=s?`reportingrest/cohort/${e}?${s}`:`reportingrest/cohort/${e}`,{data:r}=await(0,n.openmrsFetch)(c+a);return Promise.all(r.members.map((e=>(0,n.openmrsFetch)(`/ws/rest/v1/patient/${e.uuid}?v=full`))))}async function b(e){const{data:{results:t,error:s}}=await(0,n.openmrsFetch)("/ws/rest/v1/cohortm/cohort?v=custom:(uuid,name,voided)"+(e?`&cohortType=${e}`:""));if(s)throw s;return t.filter((e=>!e.voided))}function h(e,t){return(0,n.openmrsFetch)("/ws/rest/v1/cohortm/cohortmember",{method:"POST",headers:{"Content-Type":"application/json"},body:{patient:e,cohort:t,startDate:new Date}})}function p(e){return(0,n.openmrsFetch)(`/ws/rest/v1/cohortm/cohortmember/${e}`,{method:"DELETE"})}async function v(e){const{data:{results:t,error:s}}=await(0,n.openmrsFetch)(`/ws/rest/v1/cohortm/cohortmember?patient=${e}&v=full`);if(s)throw s;return t.filter((e=>!e.voided))}function g(e){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${o.Ln}&value-concept=${o.$l}&patient=${e}&_sort=-date&_count=1`).then((({data:e})=>e.entry?.length?e.entry[0].resource.valueCodeableConcept.coding[0].display:"Negative"))}function y(e){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${o.Ws}&value-concept=${o.Ws}&patient=${e}&_sort=-date&_count=1`).then((({data:e})=>e.entry?.length?e.entry[0].resource.valueCodeableConcept.coding[0].display:"Negative"))}function k(e,t){const s=`encounterType=${t}&patient=${e}`;return(0,n.openmrsFetch)(`/ws/rest/v1/encounter?${s}&v=${o.Ib}`).then((({data:e})=>e.results.length?e.results[e.results.length-1]:null))}function w(e){return(0,n.openmrsFetch)(`/ws/rest/v1/concept/${e}/name?limit=1`).then((({data:e})=>{if(e.results.length)return e.results[e.results.length-1].display}))}},47809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var n=s(95720),a=s.n(n),r=s(7896),o=s(56666),c=s(59740),A=s(13980),i=s.n(A),u=s(72779),l=s.n(u),d=s(98358),j=s(83182),m=s(60330),f=["children","className","id","type","filter","renderIcon","title","disabled","onClose","size"],b=(0,j.Z)(),h={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"},p=function(e){var t,s=e.children,n=e.className,A=e.id,i=e.type,u=e.filter,j=e.renderIcon,p=e.title,v=e.disabled,g=e.onClose,y=e.size,k=(0,c.Z)(e,f),w=(0,m.A)(),$=A||"tag-".concat(b()),z=l()("".concat(w,"--tag"),n,(t={},(0,o.Z)(t,"".concat(w,"--tag--disabled"),v),(0,o.Z)(t,"".concat(w,"--tag--filter"),u),(0,o.Z)(t,"".concat(w,"--tag--").concat(y),y),(0,o.Z)(t,"".concat(w,"--tag--").concat(i),i),(0,o.Z)(t,"".concat(w,"--tag--interactive"),k.onClick&&!u),t));if(u)return a().createElement("div",(0,r.Z)({className:z,"aria-label":void 0!==p?"".concat(p," ").concat(s):"Clear filter ".concat(s),id:$},k),a().createElement("span",{className:"".concat(w,"--tag__label"),title:"string"==typeof s?s:null},null!=s?s:h[i]),a().createElement("button",{type:"button",className:"".concat(w,"--tag__close-icon"),onClick:function(e){g&&(e.stopPropagation(),g(e))},disabled:v,"aria-labelledby":$,title:p},a().createElement(d.PcV,null)));var _=k.onClick?"button":"div";return a().createElement(_,(0,r.Z)({disabled:"button"===_?v:null,className:z,id:$},k),j?a().createElement("div",{className:"".concat(w,"--tag__custom-icon")},a().createElement(j,null)):"",a().createElement("span",{title:"string"==typeof s?s:null},null!=s?s:h[i]))};p.propTypes={children:i().node,className:i().string,disabled:i().bool,filter:i().bool,id:i().string,onClose:i().func,renderIcon:i().oneOfType([i().func,i().object]),size:i().oneOf(["sm","md"]),title:i().string,type:i().oneOf(Object.keys(h))},Object.keys(h);const v=p;var g=s(9035),y=s(39126),k=s(29270);const w=async e=>{let t,s=!1;await(e=>{const t=`encounterType=79c1f50f-f77d-42e2-ad2a-d29304dde2fe&patient=${e}`;return(0,g.openmrsFetch)(`/ws/rest/v1/encounter?${t}&v=custom:(uuid,encounterDatetime,location:(uuid,name),encounterProviders:(uuid,provider:(uuid,name)),obs:(uuid,obsDatetime,concept:(uuid,name:(uuid,name)),value:(uuid,name:(uuid,name))))`)})(e).then((e=>{e.data.results.forEach((e=>{t=e.obs.find((e=>"de18a5c1-c187-4698-9d75-258605ea07e8"===e.concept.name.uuid)),t&&"ade5ba3f-3c7f-42b1-96d1-cfeb9b446980"===t.value.name.uuid&&(s=!0)}))}));const n=await(0,k.kT)(e),a=await(0,k.Xm)(e);return s=!(!n.toLowerCase().includes("positive")&&!a.toLowerCase().includes("positive")),s},$=function({patientUuid:e}){const{currentVisit:t}=(0,g.useVisit)(e),{t:s}=(0,y.useTranslation)(),[r,o]=(0,n.useState)(!1),[c,A]=(0,n.useState)(!0);return w(e),(0,n.useEffect)((()=>{w(e).then((e=>o(e)))}),[r,e]),a().createElement(a().Fragment,null,r&&a().createElement(v,{type:"red"},s("hivPositive","HIV Positive")))}},18394:(e,t,s)=>{"use strict";s.d(t,{sb:()=>n,Ib:()=>a,Ln:()=>r,$l:()=>o,Ws:()=>c,ZJ:()=>A,mV:()=>i,WK:()=>u,PG:()=>l,J2:()=>d,UT:()=>j,iK:()=>m,BN:()=>f,V3:()=>b,II:()=>h,lo:()=>p,H3:()=>v,hf:()=>g,xg:()=>y,PN:()=>k,U0:()=>w,Cf:()=>$,gi:()=>z,Jm:()=>_,FD:()=>C,rb:()=>F,t9:()=>E});const n="${openmrsSpaBase}/patient/",a="custom:(uuid,encounterDatetime,location:(uuid,name),encounterProviders:(uuid,provider:(uuid,name)),obs:(uuid,obsDatetime,groupMembers,concept:(uuid,name:(uuid,name)),value:(uuid,name:(uuid,name),names:(uuid,conceptNameType,name))))",r="e16b0068-b6a2-46b7-aba9-e3be00a7b4ab",o="6378487b-584d-4422-a6a6-56c8830873ff",c="a5261998-c635-4e27-870c-e837faf6cf9a",A="e8e8fe71-adbb-48e7-b531-589985094d30",i="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",u="e4d801f0-e2fd-11eb-8212-7d7156e00a1f",l="cdee0abe-e471-11eb-8212-7d7156e00a1f",d="01af2130-e472-11eb-8212-7d7156e00a1f",j="51bec6f7-df43-426e-a83e-c1ae5501372f",m="ccbcf6d8-77b7-44a5-bb43-d352478ea4e9",f="7e54cd64-f9c3-11eb-8e6a-57478ce139b0",b="83e40f2c-c316-43e6-a12e-20a338100281",h="166432AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",p="160554AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",v="cb0a65a7-0587-477e-89b9-cf2fd144f1d4",g="163137AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",y="8a9809e9-8a0b-4e0e-b1f6-80b0cbbe361b",k="dfbe256e-30ba-4033-837a-2e8477f2e7cd",w="159832AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",$="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",z="79c1f50f-f77d-42e2-ad2a-d29304dde2fe",_="e16b0068-b6a2-46b7-aba9-e3be00a7b4ab",C=" 15272be5-ae9c-4278-a303-4b8907eae73b",F="657AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",E="5497AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},83182:(e,t,s)=>{"use strict";function n(){var e=0;return function(){return++e}}s.d(t,{Z:()=>n})},96616:(e,t,s)=>{var n={"./af":95191,"./af.js":95191,"./ar":54358,"./ar-dz":71727,"./ar-dz.js":71727,"./ar-kw":98279,"./ar-kw.js":98279,"./ar-ly":87895,"./ar-ly.js":87895,"./ar-ma":72766,"./ar-ma.js":72766,"./ar-sa":52796,"./ar-sa.js":52796,"./ar-tn":12386,"./ar-tn.js":12386,"./ar.js":54358,"./az":57452,"./az.js":57452,"./be":79053,"./be.js":79053,"./bg":65428,"./bg.js":65428,"./bm":21569,"./bm.js":21569,"./bn":56212,"./bn-bd":24635,"./bn-bd.js":24635,"./bn.js":56212,"./bo":13667,"./bo.js":13667,"./br":192,"./br.js":192,"./bs":51802,"./bs.js":51802,"./ca":19118,"./ca.js":19118,"./cs":39990,"./cs.js":39990,"./cv":30557,"./cv.js":30557,"./cy":4227,"./cy.js":4227,"./da":95406,"./da.js":95406,"./de":87994,"./de-at":44139,"./de-at.js":44139,"./de-ch":86591,"./de-ch.js":86591,"./de.js":87994,"./dv":94649,"./dv.js":94649,"./el":14453,"./el.js":14453,"./en-au":48428,"./en-au.js":48428,"./en-ca":36972,"./en-ca.js":36972,"./en-gb":13224,"./en-gb.js":13224,"./en-ie":18843,"./en-ie.js":18843,"./en-il":32732,"./en-il.js":32732,"./en-in":76579,"./en-in.js":76579,"./en-nz":29851,"./en-nz.js":29851,"./en-sg":70442,"./en-sg.js":70442,"./eo":10654,"./eo.js":10654,"./es":63621,"./es-do":68791,"./es-do.js":68791,"./es-mx":67278,"./es-mx.js":67278,"./es-us":60717,"./es-us.js":60717,"./es.js":63621,"./et":72404,"./et.js":72404,"./eu":62944,"./eu.js":62944,"./fa":30496,"./fa.js":30496,"./fi":98137,"./fi.js":98137,"./fil":32872,"./fil.js":32872,"./fo":6545,"./fo.js":6545,"./fr":49090,"./fr-ca":13049,"./fr-ca.js":13049,"./fr-ch":12338,"./fr-ch.js":12338,"./fr.js":49090,"./fy":95088,"./fy.js":95088,"./ga":77812,"./ga.js":77812,"./gd":8374,"./gd.js":8374,"./gl":63649,"./gl.js":63649,"./gom-deva":52674,"./gom-deva.js":52674,"./gom-latn":44948,"./gom-latn.js":44948,"./gu":24033,"./gu.js":24033,"./he":10175,"./he.js":10175,"./hi":58055,"./hi.js":58055,"./hr":41678,"./hr.js":41678,"./hu":85111,"./hu.js":85111,"./hy-am":26530,"./hy-am.js":26530,"./id":19126,"./id.js":19126,"./is":11696,"./is.js":11696,"./it":98710,"./it-ch":38821,"./it-ch.js":38821,"./it.js":98710,"./ja":93974,"./ja.js":93974,"./jv":70648,"./jv.js":70648,"./ka":54731,"./ka.js":54731,"./kk":43501,"./kk.js":43501,"./km":84398,"./km.js":84398,"./kn":91825,"./kn.js":91825,"./ko":13729,"./ko.js":13729,"./ku":19670,"./ku.js":19670,"./ky":78797,"./ky.js":78797,"./lb":50627,"./lb.js":50627,"./lo":65859,"./lo.js":65859,"./lt":80355,"./lt.js":80355,"./lv":16594,"./lv.js":16594,"./me":45324,"./me.js":45324,"./mi":11689,"./mi.js":11689,"./mk":61308,"./mk.js":61308,"./ml":85241,"./ml.js":85241,"./mn":76320,"./mn.js":76320,"./mr":96771,"./mr.js":96771,"./ms":20503,"./ms-my":77748,"./ms-my.js":77748,"./ms.js":20503,"./mt":55534,"./mt.js":55534,"./my":62727,"./my.js":62727,"./nb":7550,"./nb.js":7550,"./ne":49899,"./ne.js":49899,"./nl":41228,"./nl-be":31225,"./nl-be.js":31225,"./nl.js":41228,"./nn":97130,"./nn.js":97130,"./oc-lnc":93130,"./oc-lnc.js":93130,"./pa-in":91282,"./pa-in.js":91282,"./pl":28190,"./pl.js":28190,"./pt":41549,"./pt-br":78135,"./pt-br.js":78135,"./pt.js":41549,"./ro":307,"./ro.js":307,"./ru":89272,"./ru.js":89272,"./sd":79248,"./sd.js":79248,"./se":74969,"./se.js":74969,"./si":65522,"./si.js":65522,"./sk":61581,"./sk.js":61581,"./sl":56428,"./sl.js":56428,"./sq":34611,"./sq.js":34611,"./sr":19821,"./sr-cyrl":20185,"./sr-cyrl.js":20185,"./sr.js":19821,"./ss":35029,"./ss.js":35029,"./sv":80939,"./sv.js":80939,"./sw":73107,"./sw.js":73107,"./ta":72304,"./ta.js":72304,"./te":72550,"./te.js":72550,"./tet":99717,"./tet.js":99717,"./tg":87669,"./tg.js":87669,"./th":94959,"./th.js":94959,"./tk":92661,"./tk.js":92661,"./tl-ph":52234,"./tl-ph.js":52234,"./tlh":94120,"./tlh.js":94120,"./tr":81111,"./tr.js":81111,"./tzl":53080,"./tzl.js":53080,"./tzm":88246,"./tzm-latn":25385,"./tzm-latn.js":25385,"./tzm.js":88246,"./ug-cn":48777,"./ug-cn.js":48777,"./uk":2014,"./uk.js":2014,"./ur":45953,"./ur.js":45953,"./uz":89716,"./uz-latn":87791,"./uz-latn.js":87791,"./uz.js":89716,"./vi":99816,"./vi.js":99816,"./x-pseudo":94450,"./x-pseudo.js":94450,"./yo":22556,"./yo.js":22556,"./zh-cn":7414,"./zh-cn.js":7414,"./zh-hk":50824,"./zh-hk.js":50824,"./zh-mo":88589,"./zh-mo.js":88589,"./zh-tw":63285,"./zh-tw.js":63285};function a(e){var t=r(e);return s(t)}function r(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id=96616}}]);
//# sourceMappingURL=1288.js.map