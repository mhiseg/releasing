(self.webpackChunkesm_ohri_hiv_app=self.webpackChunkesm_ohri_hiv_app||[]).push([[8815],{79083:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var l=a(67627),n=a(20160),s=a(10364),i=a(47500),r=a(58804),o=a(67004),u=a(62427),c=a(33783),d=a(95720),m=a.n(d);const h=({tableHeaders:e,message:t})=>m().createElement("div",{style:{marginLeft:"-16px"}},m().createElement(l.ZP,{rows:[],headers:e,isSortable:!0,size:"short",useZebraStyles:!0},(({headers:a,getHeaderProps:l,getTableProps:d})=>m().createElement(n.Z,null,m().createElement(s.Z,d(),m().createElement(i.Z,null,m().createElement(r.Z,null,a.map((e=>m().createElement(o.Z,l({header:e,isSortable:e.isSortable}),e.header?.content??e.header))))),m().createElement(u.Z,null,m().createElement(r.Z,null,m().createElement(c.Z,{colSpan:e.length},t))))))))},8815:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var l=a(707),n=a(95720),s=a.n(n),i=a(18434),r=a(29270),o=a(18394),u=a(68576),c=a(91354),d=a.n(c),m=a(31583),h=a.n(m),g=a(47378),y=a.n(g),p=a(55993),k=a.n(p),S=a(54154),b=a.n(S),f=a(8141),E=a.n(f),V=a(24010),_=a.n(V),v={};v.styleTagTransform=E(),v.setAttributes=k(),v.insert=y().bind(null,"head"),v.domAPI=h(),v.insertStyleElement=b(),d()(_(),v);const C=_()&&_().locals?_().locals:void 0;var T=a(9035),Z=a(76635),w=a(79083);const L=(e,t)=>t.filter((t=>-1!==`${t.name[0].given.join(" ")} ${t.name[0].family}`.toLowerCase().search(e.toLowerCase()))),P=[{key:"name",header:"Name",getValue:e=>`${e.name[0].given.join(" ")} ${e.name[0].family}`,link:{getUrl:e=>`${o.sb}${e.id}/chart`}},{key:"gender",header:"Sex",getValue:e=>(0,Z.capitalize)(e.gender)},{key:"age",header:"Age",getValue:e=>(0,T.age)(e.birthDate)},{key:"phoneNumber",header:"Phone Number",getValue:e=>"--"},{key:"dateOfEncounter",header:"Date Of Encounter",getValue:e=>"--"},{key:"location",header:"Location",getValue:e=>"--"},{key:"provider",header:"Provider",getValue:e=>"--"},{key:"finalHivResult",header:"Final HIV Result",getValue:e=>"--"},{key:"currentWaitingList",header:"Current Waiting List",getValue:e=>"--"},{key:"id",header:"Patient ID",getValue:e=>e.identifier[0].value}],x=()=>{const[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(0),[i,o]=(0,n.useState)(!0),[u,c]=(0,n.useState)(1),[d,m]=(0,n.useState)(10),[h,g]=(0,n.useState)(null),[y,p]=(0,n.useState)(0),[k,S]=(0,n.useState)([]),[b,f]=(0,n.useState)(0);(0,n.useEffect)((()=>{(0,r.AN)().then((e=>{t(e.map((e=>e.data))),l(e.length),o(!1)}))}),[d,u]),(0,n.useEffect)((()=>{(0,T.attach)("today-clients-table-slot","patient-table")}),[]);const E=(0,n.useMemo)((()=>({usePagination:!1,currentPage:u,onChange:e=>{c(e.page),m(e.pageSize)},pageSize:d,totalItems:h?b:a})),[u,b,d,a,h]),V=(0,n.useCallback)((t=>{if(g(t),t){const a=L(t,e);S(a),f(a.length)}}),[e]),_=(0,n.useMemo)((()=>({patients:h?k:e,columns:P,search:{placeHolder:"Search client list",onSearch:V,currentSearchTerm:h},pagination:E,isLoading:i,autoFocus:!0})),[h,k,e,V,E,i]);return(0,n.useEffect)((()=>{p(y+1)}),[_]),s().createElement("div",{style:{width:"100%",marginBottom:"2rem"}},i||e.length?s().createElement(T.ExtensionSlot,{extensionSlotName:"today-clients-table-slot",state:_,key:y}):s().createElement(w.Z,{tableHeaders:P,message:"There are no patients in this list."}))},N=[{key:"name",header:"Name",getValue:e=>`${e.name[0].given.join(" ")} ${e.name[0].family}`,link:{getUrl:e=>`${o.sb}${e.id}/chart`}},{key:"gender",header:"Sex",getValue:e=>(0,Z.capitalize)(e.gender)},{key:"age",header:"Age",getValue:e=>(0,T.age)(e.birthDate)},{key:"phoneNumber",header:"Phone Number",getValue:e=>"--"},{key:"dateOfEncounter",header:"Date Of Encounter",getValue:e=>"--"},{key:"location",header:"Location",getValue:e=>"--"},{key:"finalHivResult",header:"Final HIV Result",getValue:e=>"--"},{key:"linkedToCare",header:"Linked To Care",getValue:e=>"Yes/No"},{key:"id",header:"Patient ID",getValue:e=>e.identifier[0].value}],$=()=>{const[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(0),[i,u]=(0,n.useState)(!0),[c,d]=(0,n.useState)(1),[m,h]=(0,n.useState)(10),[g,y]=(0,n.useState)(null),[p,k]=(0,n.useState)(0),[S,b]=(0,n.useState)([]),[f,E]=(0,n.useState)(0);(0,n.useEffect)((()=>{(0,r.V5)(o.Ln,o.$l,14).then((e=>{t(e.map((e=>e.data))),l(e.length),u(!1)}))}),[m,c]),(0,n.useEffect)((()=>((0,T.attach)("positive-in-last-14-days-table-slot","patient-table"),()=>{(0,T.detach)("positive-in-last-14-days-table-slot","patient-table")})),[]);const V=(0,n.useMemo)((()=>({usePagination:!1,currentPage:c,onChange:e=>{d(e.page),h(e.pageSize)},pageSize:m,totalItems:g?f:a})),[c,f,m,a,g]),_=(0,n.useCallback)((t=>{if(y(t),t){const a=L(t,e);b(a),E(a.length)}}),[e]),v=(0,n.useMemo)((()=>({patients:g?S:e,columns:N,search:{placeHolder:"Search client list",onSearch:_,currentSearchTerm:g},pagination:V,isLoading:i,autoFocus:!0})),[g,S,e,_,V,i]);return(0,n.useEffect)((()=>{k(p+1)}),[v]),s().createElement("div",{style:{width:"100%",marginBottom:"2rem"}},i||e.length?s().createElement(T.ExtensionSlot,{extensionSlotName:"positive-in-last-14-days-table-slot",state:v,key:p}):s().createElement(w.Z,{tableHeaders:N,message:"There are no patients in this list."}))},H=[{key:"name",header:"Name",getValue:e=>`${e.name[0].given.join(" ")} ${e.name[0].family}`,link:{getUrl:e=>`${o.sb}${e.id}/chart`}},{key:"gender",header:"Sex",getValue:e=>(0,Z.capitalize)(e.gender)},{key:"age",header:"Age",getValue:e=>(0,T.age)(e.birthDate)},{key:"phoneNumber",header:"Phone Number",getValue:e=>"--"},{key:"dateOfEncounter",header:"Date Of Encounter",getValue:e=>"--"},{key:"location",header:"Location",getValue:e=>"--"},{key:"finalHivResult",header:"Final HIV Result",getValue:e=>"--"},{key:"linkedToCare",header:"Linked To Care",getValue:e=>"Yes"},{key:"id",header:"Patient ID",getValue:e=>e.identifier[0].value}],A=()=>{const[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(0),[i,u]=(0,n.useState)(!0),[c,d]=(0,n.useState)(1),[m,h]=(0,n.useState)(10),[g,y]=(0,n.useState)(null),[p,k]=(0,n.useState)(0),[S,b]=(0,n.useState)([]),[f,E]=(0,n.useState)(0);(0,n.useEffect)((()=>{(0,r.V5)(o.ZJ,o.mV,14).then((e=>{t(e.map((e=>e.data))),l(e.length),u(!1)}))}),[m,c]),(0,n.useEffect)((()=>((0,T.attach)("linked-to-care-last-14-days-table-slot","patient-table"),()=>{(0,T.detach)("linked-to-care-last-14-days-table-slot","patient-table")})),[]);const V=(0,n.useMemo)((()=>({usePagination:!1,currentPage:c,onChange:e=>{d(e.page),h(e.pageSize)},pageSize:m,totalItems:g?f:a})),[c,f,m,a,g]),_=(0,n.useCallback)((t=>{if(y(t),t){const a=L(t,e);b(a),E(a.length)}}),[e]),v=(0,n.useMemo)((()=>({patients:g?S:e,columns:H,search:{placeHolder:"Search client list",onSearch:_,currentSearchTerm:g},pagination:V,isLoading:i,autoFocus:!0})),[g,S,e,_,V,i]);return(0,n.useEffect)((()=>{k(p+1)}),[v]),s().createElement("div",{style:{width:"100%",marginBottom:"2rem"}},i||e.length?s().createElement(T.ExtensionSlot,{extensionSlotName:"linked-to-care-last-14-days-table-slot",state:v,key:p}):s().createElement(w.Z,{tableHeaders:H,message:"There are no patients in this list."}))},z=function({launchWorkSpace:e}){const[t,a]=(0,n.useState)(0),[c,d]=(0,n.useState)(0),[m,h]=(0,n.useState)(0),g=[{title:"Today's Clients",linkAddress:"#",subTitle:"Active Visits",value:t,onClick:()=>{e("Today's clients",s().createElement(x,null),{numberOfClients:t,subTitle:"Today's clients",dateLastUpdated:"--"})}},{title:"Positive in last 14 days",linkAddress:"#",subTitle:"Clients",value:c,onClick:()=>{e("Positive in last 14 days",s().createElement($,null),{numberOfClients:c,subTitle:"Clients who tested positive in the last 14 days",dateLastUpdated:"--"})}},{title:"Linked to care in last 14 days",linkAddress:"#",subTitle:"Last 14 days",value:m,onClick:()=>{e("Linked to care in last 14 days",s().createElement(A,null),{numberOfClients:m,subTitle:"Clients linked to care in the last 14 days",dateLastUpdated:"--"})}}];return(0,n.useEffect)((()=>{(0,r.AN)().then((e=>{a(e.length)})),(0,r.V5)(o.Ln,o.$l,14).then((e=>{d(e.length)})),(0,r.V5)(o.ZJ,o.mV,14).then((e=>{h(e.length)}))})),s().createElement(s().Fragment,null,s().createElement(l.Z,{className:C.desktopView},g.map(((e,t)=>s().createElement("div",{style:{width:"321px",marginLeft:"16px"},key:t},s().createElement(i.Z,{title:e.title,subTitle:e.subTitle,value:e.value,onClickView:e.onClick}))))),s().createElement(l.Z,{className:C.tileView},s().createElement(u.Z,{details:g})))}},24010:(e,t,a)=>{(t=a(82609)(!1)).push([e.id,".esm-ohri-hiv__summary-tile__desktopView___2a-91{display:flex}.esm-ohri-hiv__summary-tile__tileView___3c1EZ{display:none}@media(max-width: 1024px){.esm-ohri-hiv__summary-tile__desktopView___2a-91{display:none}.esm-ohri-hiv__summary-tile__tileView___3c1EZ{display:flex}}",""]),t.locals={desktopView:"esm-ohri-hiv__summary-tile__desktopView___2a-91",tileView:"esm-ohri-hiv__summary-tile__tileView___3c1EZ"},e.exports=t}}]);
//# sourceMappingURL=8815.js.map