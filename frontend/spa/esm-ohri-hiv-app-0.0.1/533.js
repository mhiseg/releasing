(self.webpackChunkesm_ohri_hiv_app=self.webpackChunkesm_ohri_hiv_app||[]).push([[533],{29270:(e,t,i)=>{"use strict";i.d(t,{ue:()=>_,Lq:()=>l,AN:()=>d,V5:()=>u,q3:()=>m,Ig:()=>p,am:()=>h,k$:()=>v,JH:()=>f,zj:()=>g,Jf:()=>b,kT:()=>y,Xm:()=>A,sy:()=>x,B1:()=>E});var n=i(9035),o=i(19034),r=i.n(o),s=i(18394);const a="/ws/rest/v1/";function _(e){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Encounter?patient=${e}&_sort=-date&_count=1`)}function l(e=1,t=10){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Patient?_getpagesoffset=${e}&_count=${t}`)}function d(){let e=r()().format("YYYY-MM-DD");return(0,n.openmrsFetch)(`/ws/fhir2/R4/Encounter?date=${e}`).then((({data:e})=>e.entry?.length?c(e):[]))}function u(e,t,i){let o=r()().format("YYYY-MM-DD"),s=r()().subtract(i,"days").format("YYYY-MM-DD");return(0,n.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${e}${t?`&value-concept=${t}`:""}${i?`&_lastUpdated=ge${s}&_lastUpdated=le${o}`:""}`).then((({data:e})=>e.entry?.length?c(e):[]))}function c(e){let t=e.entry.map((e=>e.resource.subject.reference));return t=new Set([...t]),t=Array.from(t),Promise.all(t.map((e=>(0,n.openmrsFetch)("/ws/fhir2/R4/"+e))))}async function m(e,t){const{data:i}=await(0,n.openmrsFetch)(`/ws/rest/v1/cohortm/cohort/${e}${t?`?v=${t}`:""}`);return i.cohortMembers=i.cohortMembers.filter((e=>!e.voided)),i}async function p(e,t){const i=t?t.join("&"):"",o=i?`reportingrest/cohort/${e}?${i}`:`reportingrest/cohort/${e}`,{data:r}=await(0,n.openmrsFetch)(a+o);return r}async function h(e,t){const i=t?t.join("&"):"",o=i?`reportingrest/cohort/${e}?${i}`:`reportingrest/cohort/${e}`,{data:r}=await(0,n.openmrsFetch)(a+o);return Promise.all(r.members.map((e=>(0,n.openmrsFetch)(`/ws/rest/v1/patient/${e.uuid}?v=full`))))}async function v(e){const{data:{results:t,error:i}}=await(0,n.openmrsFetch)("/ws/rest/v1/cohortm/cohort?v=custom:(uuid,name,voided)"+(e?`&cohortType=${e}`:""));if(i)throw i;return t.filter((e=>!e.voided))}function f(e,t){return(0,n.openmrsFetch)("/ws/rest/v1/cohortm/cohortmember",{method:"POST",headers:{"Content-Type":"application/json"},body:{patient:e,cohort:t,startDate:new Date}})}function g(e){return(0,n.openmrsFetch)(`/ws/rest/v1/cohortm/cohortmember/${e}`,{method:"DELETE"})}async function b(e){const{data:{results:t,error:i}}=await(0,n.openmrsFetch)(`/ws/rest/v1/cohortm/cohortmember?patient=${e}&v=full`);if(i)throw i;return t.filter((e=>!e.voided))}function y(e){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${s.Ln}&value-concept=${s.$l}&patient=${e}&_sort=-date&_count=1`).then((({data:e})=>e.entry?.length?e.entry[0].resource.valueCodeableConcept.coding[0].display:"Negative"))}function A(e){return(0,n.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${s.Ws}&value-concept=${s.Ws}&patient=${e}&_sort=-date&_count=1`).then((({data:e})=>e.entry?.length?e.entry[0].resource.valueCodeableConcept.coding[0].display:"Negative"))}function x(e,t){const i=`encounterType=${t}&patient=${e}`;return(0,n.openmrsFetch)(`/ws/rest/v1/encounter?${i}&v=${s.Ib}`).then((({data:e})=>e.results.length?e.results[e.results.length-1]:null))}function E(e){return(0,n.openmrsFetch)(`/ws/rest/v1/concept/${e}/name?limit=1`).then((({data:e})=>{if(e.results.length)return e.results[e.results.length-1].display}))}},32332:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var n=i(95720),o=i.n(n),r=i(89623),s=i(91354),a=i.n(s),_=i(31583),l=i.n(_),d=i(47378),u=i.n(d),c=i(55993),m=i.n(c),p=i(54154),h=i.n(p),v=i(8141),f=i.n(v),g=i(36),b=i.n(g),y={};y.styleTagTransform=f(),y.setAttributes=m(),y.insert=u().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=h(),a()(b(),y);const A=b()&&b().locals?b().locals:void 0,x=()=>o().createElement("div",{className:A.centerLoadingSVG},o().createElement(r.Z,{description:"Active loading indicator",withOverlay:!1,small:!0}))},98575:(e,t,i)=>{"use strict";i.d(t,{p:()=>x});var n=i(9035),o=i(95720),r=i.n(o),s=i(91354),a=i.n(s),_=i(31583),l=i.n(_),d=i(47378),u=i.n(d),c=i(55993),m=i.n(c),p=i(54154),h=i.n(p),v=i(8141),f=i.n(v),g=i(82592),b=i.n(g),y={};y.styleTagTransform=f(),y.setAttributes=m(),y.insert=u().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=h(),a()(b(),y);const A=b()&&b().locals?b().locals:void 0,x=({patient:e})=>r().createElement("div",{className:A.patientBannerContainer},r().createElement(n.ExtensionSlot,{extensionSlotName:"patient-header-slot",state:{patient:e,patientUuid:e.id}}))},18394:(e,t,i)=>{"use strict";i.d(t,{sb:()=>n,Ib:()=>o,Ln:()=>r,$l:()=>s,Ws:()=>a,ZJ:()=>_,mV:()=>l,WK:()=>d,PG:()=>u,J2:()=>c,UT:()=>m,iK:()=>p,BN:()=>h,V3:()=>v,II:()=>f,lo:()=>g,H3:()=>b,hf:()=>y,xg:()=>A,PN:()=>x,U0:()=>E,Cf:()=>w,gi:()=>O,Jm:()=>S,FD:()=>C,rb:()=>j,t9:()=>H});const n="${openmrsSpaBase}/patient/",o="custom:(uuid,encounterDatetime,location:(uuid,name),encounterProviders:(uuid,provider:(uuid,name)),obs:(uuid,obsDatetime,groupMembers,concept:(uuid,name:(uuid,name)),value:(uuid,name:(uuid,name),names:(uuid,conceptNameType,name))))",r="e16b0068-b6a2-46b7-aba9-e3be00a7b4ab",s="6378487b-584d-4422-a6a6-56c8830873ff",a="a5261998-c635-4e27-870c-e837faf6cf9a",_="e8e8fe71-adbb-48e7-b531-589985094d30",l="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",d="e4d801f0-e2fd-11eb-8212-7d7156e00a1f",u="cdee0abe-e471-11eb-8212-7d7156e00a1f",c="01af2130-e472-11eb-8212-7d7156e00a1f",m="51bec6f7-df43-426e-a83e-c1ae5501372f",p="ccbcf6d8-77b7-44a5-bb43-d352478ea4e9",h="7e54cd64-f9c3-11eb-8e6a-57478ce139b0",v="83e40f2c-c316-43e6-a12e-20a338100281",f="166432AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",g="160554AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",b="cb0a65a7-0587-477e-89b9-cf2fd144f1d4",y="163137AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",A="8a9809e9-8a0b-4e0e-b1f6-80b0cbbe361b",x="dfbe256e-30ba-4033-837a-2e8477f2e7cd",E="159832AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",w="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",O="79c1f50f-f77d-42e2-ad2a-d29304dde2fe",S="e16b0068-b6a2-46b7-aba9-e3be00a7b4ab",C=" 15272be5-ae9c-4278-a303-4b8907eae73b",j="657AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",H="5497AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},22426:(e,t,i)=>{"use strict";i.d(t,{ks:()=>n,Mf:()=>o});const n="cf82933b-3f3f-45e7-a5ab-5d31aaee3da3",o="488b58ff-64f5-4f8a-8979-fa79940b1594"},99075:(e,t,i)=>{"use strict";function n(e){return"boolean"==typeof e?e:"string"==typeof e?"true"==e:!!e}i.d(t,{o:()=>n})},98925:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>evaluateExpression});var moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19034),moment__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22426),_validators_ohri_form_validator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20201);function evaluateExpression(expression,node,allFields,allFieldValues,context){const allFieldsKeys=allFields.map((e=>e.id)),parts=expression.trim().split(" "),{mode,myValue}=context;function isEmpty(e){return allFieldsKeys.includes(e)?(registerDependency(node,allFields.find((t=>t.id==e))),(0,_validators_ohri_form_validator__WEBPACK_IMPORTED_MODULE_1__.xb)(allFieldValues[e])):(0,_validators_ohri_form_validator__WEBPACK_IMPORTED_MODULE_1__.xb)(e)}function today(){return new Date}function includes(e,t){return!!allFieldsKeys.includes(e)&&(registerDependency(node,allFields.find((t=>t.id===e))),allFieldValues[e]?.includes(t))}function isDateBefore(e,t,i){let n=t;return"string"==typeof t&&(n=i?moment__WEBPACK_IMPORTED_MODULE_0___default()(t,i,!0).toDate():moment__WEBPACK_IMPORTED_MODULE_0___default()(t,"YYYY-MM-DD",!0).toDate()),e?.getTime()<n.getTime()}parts.forEach(((e,t)=>{if(t%2==0&&allFieldsKeys.includes(e)){const t=allFields.find((t=>t.id===e));registerDependency(node,t);let i=allFieldValues[e];"toggle"==t.questionOptions.rendering&&(i=i?_constants__WEBPACK_IMPORTED_MODULE_2__.ks:_constants__WEBPACK_IMPORTED_MODULE_2__.Mf),"string"==typeof i&&(i=`'${i}'`);const n=new RegExp(e,"g");expression=expression.replace(n,i)}}));try{return eval(expression)}catch(e){console.error(e)}return!1}function registerDependency(e,t){switch(e.type){case"page":t.pageDependants||(t.pageDependants=new Set),t.pageDependants.add(e.value.label);break;case"section":t.sectionDependants||(t.sectionDependants=new Set),t.sectionDependants.add(e.value.label);default:t.fieldDependants||(t.fieldDependants=new Set),t.fieldDependants.add(e.value.id)}}},20201:(e,t,i)=>{"use strict";i.d(t,{Tv:()=>o,Ls:()=>r,xb:()=>s});var n=i(99075);const o="field.required",r={validate:(e,t)=>e.submission?.unspecified?[]:((0,n.o)(e.required)||(0,n.o)(e.unspecified))&&s(t)?[{errCode:o,errMessage:"Field is mandatory"}]:[]};function s(e){return null==e||""===e||"string"==typeof e&&!e?.trim()||!(!Array.isArray(e)||e.length)}},46698:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>st});var n=i(95720),o=i.n(n),r=i(91354),s=i.n(r),a=i(31583),_=i.n(a),l=i(47378),d=i.n(l),u=i(55993),c=i.n(u),m=i(54154),p=i.n(m),h=i(8141),v=i.n(h),f=i(35480),g=i.n(f),b={};b.styleTagTransform=v(),b.setAttributes=c(),b.insert=d().bind(null,"head"),b.domAPI=_(),b.insertStyleElement=p(),s()(g(),b);const y=g()&&g().locals?g().locals:void 0;var A=i(66405),x=i(26911),E=i(9035),w=i(39126),O=i(32332),S=i(66992),C=i.n(S),j={};j.styleTagTransform=v(),j.setAttributes=c(),j.insert=d().bind(null,"head"),j.domAPI=_(),j.insertStyleElement=p(),s()(C(),j);const H=C()&&C().locals?C().locals:void 0;function F(e){document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}var T=i(94593),k=i(59539),q=i(20201);const D=function({scrollAblePages:e,selectedPage:t,mode:i,onCancel:r,handleClose:s,values:a,setValues:_,allowUnspecifiedAll:l,defaultPage:d}){const[u,c]=(0,n.useState)(t);(0,n.useEffect)((()=>{d&&[...e].find((({label:e,isHidden:t})=>e===d&&!t))&&F(m(d))}),[d]);const m=e=>e.replace(/\s/g,""),p=(0,n.useMemo)((()=>Object.keys(a).filter((e=>e.endsWith("-unspecified"))).map((e=>e.split("-unspecified")[0])).filter((e=>(0,q.xb)(a[e]))).map((e=>`${e}-unspecified`))),[a]),h=(0,n.useCallback)((e=>{e?p.forEach((e=>{a[e]=!0})):p.forEach((e=>{a[e]=!1})),_(a)}),[p]);return o().createElement("div",{className:H.sidebar},[...e].map(((e,i)=>!e.isHidden&&o().createElement("div",{"aria-hidden":"true",className:m(e.label)===t?H.sidebarSectionActive:H.sidebarSection,key:i,onClick:()=>(e=>{const t=e.replace(/\s/g,"");c(e),F(t)})(e.label)},o().createElement("div",{className:H.sidebarSectionLink},e.label)))),o().createElement("hr",{className:H.sideBarHorizontalLine}),o().createElement("div",{className:H.sidenavActions},l&&o().createElement("div",{style:{marginBottom:".6rem"}},o().createElement(T.Z,{labelText:"",id:"auto-unspecifier",labelA:"Unspecify All",labelB:"Revert",onToggle:h})),"view"!=i&&o().createElement(k.Z,{style:{marginBottom:"0.625rem",width:"11rem"},type:"submit"},"Save"),o().createElement(k.Z,{style:{width:"11rem"},kind:"tertiary",onClick:()=>{r&&r(),s&&s()}},"view"==i?"Close":"Cancel")))};var L=i(18394),I=i(22426);const M=o().createContext(void 0);var z=i(92188);function P(e,t){return(0,E.openmrsObservableFetch)(`/ws/rest/v1/concept/${e}?v=${t}`).pipe((0,z.U)((e=>e.data)))}var V=i(8769),$=i(14868),N=i(17521),R=i.n(N),B={};B.styleTagTransform=v(),B.setAttributes=c(),B.insert=d().bind(null,"head"),B.domAPI=_(),B.insertStyleElement=p(),s()(R(),B);const U=R()&&R().locals?R().locals:void 0;var Z=i(99075);const W=({question:e})=>{const[t,i]=(0,A.U$)(`${e.id}-unspecified`),{setFieldValue:r}=o().useContext(M),[s,a]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(t.value){a(!0),e.submission={unspecified:!0,errors:[]};let t=null;switch(e.questionOptions.rendering){case"date":t="";break;case"checkbox":t=[]}r(e.id,t),e.value=null}else s&&!e.value&&(e.submission={unspecified:!1,errors:q.Ls.validate(e,null)})}),[t.value]),(0,n.useEffect)((()=>{e.value&&r(`${e.id}-unspecified`,!1)}),[e.value]);const _=(0,n.useCallback)((t=>{r(`${e.id}-unspecified`,t)}),[]);return!e.isHidden&&!(0,Z.o)(e.readonly)&&o().createElement("div",{className:U.unspecified},o().createElement($.Z,{id:`${e.id}-unspcified`,labelText:"Unspecified",value:"Unspecified",onChange:_,checked:t.value,disabled:e.disabled}))};var G=i(38909),K=i.n(G),Y={};Y.styleTagTransform=v(),Y.setAttributes=c(),Y.insert=d().bind(null,"head"),Y.domAPI=_(),Y.insertStyleElement=p(),s()(K(),Y);const J=K()&&K().locals?K().locals:void 0,X=e=>"obs"!=e.type||e.questionOptions.concept?Ue(e.questionOptions.rendering):(e.disabled=!0,Ue("text")),Q=e=>(0,Z.o)(e.unspecified)&&"toggle"!=e.questionOptions.rendering&&"encounter-location"!=e.questionOptions.rendering,ee=({fields:e,onFieldChange:t,sectionTitle:i,showTitle:n})=>o().createElement("div",{className:J.sectionContainer},e.map(((e,i)=>{const n=X(e);if(n){const r=o().createElement(n,{question:e,onChange:t,key:i,handler:Ze(e.type)});return Q(e)&&"group"!=e.questionOptions.rendering?o().createElement("div",{className:J.questionOverrides},r,o().createElement(W,{question:e})):o().createElement("div",{className:J.questionOverrides},r)}}))),te=({question:e,onChange:t,deleteControl:i})=>{const n=e.questions.filter((e=>!e.isHidden)).map(((e,i)=>{const n=X(e);if(n){const r=o().createElement(n,{question:e,onChange:t,key:i,handler:Ze(e.type)});return o().createElement(V.sg,{className:U.obsGroupColumn},Q(e)?o().createElement(o().Fragment,null,r,o().createElement(W,{question:e})):r)}}));return n&&n.push(i),o().createElement(V.X2,null,n)};var ie=i(786),ne=i(66265),oe=i(28953),re=i(87211);const se=({value:e,tooltipText:t})=>o().createElement("div",{className:U.ohriLabel},o().createElement(re.Z,{direction:"bottom",tabIndex:0,tooltipText:t},o().createElement("span",{className:"bx--label"},e))),ae=()=>o().createElement("div",null,o().createElement("span",{style:{fontSize:".875rem",color:"#c6c6c6"}},"(Blank)")),_e=({value:e})=>o().createElement("div",null,o().createElement("span",{style:{fontSize:".875rem"}},e));var le=i(29270),de=i(19034),ue=i.n(de);function ce(e,t,i){const n=t.questions.map((e=>e.id));i.filter((e=>n.includes(e.id))).forEach((t=>{t.isParentHidden=e}))}function me(e,t,i){return"toggle"==e.questionOptions.rendering?e.questionOptions.defaultValue==I.ks:((e,t)=>["radio","checkbox","select","content-switcher"].includes(e.questionOptions.rendering)&&!e.questionOptions.answers?.find((e=>e.concept==t))?[{errCode:"invalid.defaultValue",errMessage:"Value not found in coded answers list"}]:"date"!=e.questionOptions.rendering||ue()(t,ue().ISO_8601,!0).isValid()?"number"==e.questionOptions.rendering&&isNaN(t)?[{errCode:"invalid.defaultValue",errMessage:`Invalid numerical  value: '${t}'`}]:[]:[{errCode:"invalid.defaultValue",errMessage:`Invalid date value: '${t}'`}])(e,e.questionOptions.defaultValue).length?void 0:(i.handleFieldSubmission(e,e.questionOptions.defaultValue,t),e.questionOptions.defaultValue)}function pe(e){return(0,le.B1)(e).then((t=>`Concept Name: ${t} \n UUID: ${e}`))}var he=i(93489),ve=i(88668);var fe=i(38971),ge=i(838),be=i(26879),ye=i(27220),Ae=i(83191);function xe(){return xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},xe.apply(this,arguments)}var Ee=i(18769),we=i(56086);var Oe=i(63172);function Se(){return Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Se.apply(this,arguments)}var Ce=i(74195);function je(){return je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},je.apply(this,arguments)}var He=i(97161),Fe=i(24382),Te=i(79574),ke=i(76635),qe=i(55055),De=i(43619);const Le={handleFieldSubmission:(e,t,i)=>{if("checkbox"==e.questionOptions.rendering)return Me(e,t,i);if("toggle"==e.questionOptions.rendering)return Ie(t,i,e);if(e.value)"edit"!=i.sessionMode||t?t?("date"==e.questionOptions.rendering?e.value.value=ue()(t).format("YYYY-MM-DD HH:mm"):e.value.value=t,e.value.voided=!1):e.value=void 0:e.value.voided=!0;else{if("date"==e.questionOptions.rendering)return e.value=Ie(ue()(t).format("YYYY-MM-DD HH:mm"),i,e),e.value;e.value=Ie(t,i,e)}return e.value},getInitialValue:(e,t,i)=>{let n=e.obs.find((e=>e.concept.uuid==t.questionOptions.concept)),o=null,r=null;if(n&&t.groupId)return"";if(!n&&t.groupId&&(o=i.find((e=>e.id==t.groupId)),r=e.obs.find((e=>e.concept.uuid==o.questionOptions.concept)),r&&(o.value=r,n=r.groupMembers?.find((e=>e.concept.uuid==t.questionOptions.concept)))),n){const i=t.questionOptions.rendering;return t.value=n,"radio"!=i&&"content-switcher"!=i||P(t.questionOptions.concept,"custom:(uuid,display,datatype:(uuid,display,name))").subscribe((e=>{"Boolean"==e.datatype.name&&(t.value.value=n.value.uuid)})),"string"==typeof n.value||"number"==typeof n.value?"date"==t.questionOptions.rendering?(t.value.value=ue()(t.value.value).format("YYYY-MM-DD HH:mm"),ue()(n.value).toDate()):n.value:"checkbox"==t.questionOptions.rendering?(t.value=e.obs.filter((e=>e.concept.uuid==t.questionOptions.concept)),!t.value.length&&t.groupId&&(t.value=r.groupMembers.filter((e=>e.concept.uuid==t.questionOptions.concept))),t.value.map((e=>e.value.uuid))):"toggle"==t.questionOptions.rendering?(t.value.value=n.value.uuid,n.value==I.ks):n.value?.uuid}return""},getDisplayValue:(e,t)=>{const i=e.questionOptions.rendering;if(!e.value)return null;if("checkbox"==e.questionOptions.rendering)return t.map((t=>e.questionOptions.answers.find((e=>e.concept==t)).label));if("content-switcher"==i||"select"==i||"toggle"==i){const t="object"==typeof e.value.value?e.value.value.uuid:e.value.value;return e.questionOptions.answers.find((e=>e.concept==t)).label}return"radio"==i?e.questionOptions.answers.find((e=>e.concept==t)).label:t}},Ie=(e,t,i)=>({person:t.patient.id,obsDatetime:t.date,concept:i.questionOptions.concept,location:t.location,order:null,groupMembers:[],voided:!1,value:e}),Me=(e,t,i)=>(e.value||(e.value=[]),t.forEach((t=>{const n=e.value.find((e=>"string"==typeof e.value?e.value==t:e.value.uuid==t));n&&n.voided?n.voided=!1:n||e.value.push(Ie(t,i,e))})),e.questionOptions.answers.filter((e=>!t.some((t=>t==e.concept)))).forEach((t=>{const n=e.value.filter((e=>"string"==typeof e.value?e.value==t.concept:e.value.uuid==t.concept));n.length&&n.forEach((n=>{"edit"==i.sessionMode&&n.uuid?n.voided=!0:e.value=e.value.filter((e=>e.value!==t.concept))}))})),e.value);var ze=i(96358);const Pe={validate:(e,t,i)=>{const n=new Date,o=t?[]:q.Ls.validate(e,t);return o.length?o:t&&!(0,Z.o)(i?.allowFutureDates)&&t.getTime()>n.getTime()?[{errCode:"value.invalid",errMessage:"Future dates not allowed"}]:[]}};var Ve=i(98925);const $e={validate:function(e,t,i){return i.expressionContext.myValue=t,i.failsWhenExpression&&(0,Ve.j)(i.failsWhenExpression,{value:e,type:"field"},i.fields,{...i.values,[e.id]:t},i.expressionContext)?[{errCode:"value.invalid",errMessage:i.message||"Invalid value"}]:[]}},Ne=[{id:"OHRIText",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_}=o().useContext(M),[l,d]=(0,n.useState)(),[u,c]=(0,n.useState)([]),[m,p]=(0,n.useState)("Loading..."),h=(0,n.useMemo)((()=>u[0]?.errCode==q.Tv),[u]);return(0,n.useEffect)((()=>{e.submission?.errors&&c(e.submission?.errors)}),[e.submission]),r.onBlur=()=>{r.value&&e.unspecified&&a(`${e.id}-unspecified`,!1),l!==r.value&&(t(e.id,r.value,c),e.value=i.handleFieldSubmission(e,r.value,_))},(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{p(e)}))}),[m]),"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:m}),r.value?o().createElement(_e,{value:r.value}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.formField},o().createElement("div",{className:h?`${U.textInputOverrides} ${U.errorLabel}`:U.textInputOverrides},o().createElement(Ce.Z,je({},r,{id:e.id,labelText:e.label,name:e.id,value:r.value||"",onFocus:()=>d(r.value),disabled:e.disabled,invalid:!h&&u.length>0,invalidText:u.length&&u[0].errMessage}))))},type:"text"},{id:"OHRIRadio",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_}=o().useContext(M),[l,d]=(0,n.useState)([]),[u,c]=(0,n.useState)("Loading..."),m=(0,n.useMemo)((()=>l[0]?.errCode==q.Tv),[l]);return(0,n.useEffect)((()=>{e.submission?.errors&&d(e.submission?.errors)}),[e.submission]),(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{c(e)}))}),[u]),"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:u}),r.value?o().createElement(_e,{value:i.getDisplayValue(e,r.value)}):o().createElement(ae,null)):!e.isHidden&&o().createElement(ie.Z,{style:{paddingBottom:"1rem"},legendText:e.label,className:m&&U.errorLegend,disabled:e.disabled,invalid:!m&&l.length>0},o().createElement(Ee.Z,{defaultSelected:"default-selected",name:e.id,valueSelected:r.value,onChange:n=>{a(e.id,n),t(e.id,n,d),e.value=i.handleFieldSubmission(e,n,_)},orientation:"vertical"},e.questionOptions.answers.map(((t,i)=>o().createElement(we.Z,{id:`${e.id}-${t.label}`,labelText:t.label,value:t.concept,key:i})))),!m&&l?.length>0&&o().createElement("div",{className:U.errorLabel},o().createElement("div",{className:"bx--form-requirement"},l[0].errMessage)))},type:"radio"},{id:"OHRIDate",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_}=o().useContext(M),[l,d]=(0,n.useState)([]),[u,c]=(0,n.useState)("Loading..."),m=(0,n.useMemo)((()=>l[0]?.errCode==q.Tv),[l]);(0,n.useEffect)((()=>{e.submission?.errors&&d(e.submission?.errors)}),[e.submission]);const{placeHolder:p,carbonDateformat:h}=(0,n.useMemo)((()=>{const e=new Intl.DateTimeFormat(window.navigator.language).formatToParts(new Date);return{placeHolder:e.map((e=>{switch(e.type){case"day":return"dd";case"month":return"mm";case"year":return"yyyy";default:return e.value}})).join(""),carbonDateformat:e.map((e=>{switch(e.type){case"day":return"d";case"month":return"m";case"year":return"Y";default:return e.value}})).join("")}}),[]);return(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{c(e)}))}),[u]),"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:u}),r.value?o().createElement(_e,{value:r.value instanceof Date?r.value.toLocaleDateString(window.navigator.language):r.value}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.formField},o().createElement(he.Z,{datePickerType:"single",onChange:([n])=>{const o=n instanceof Date?new Date(n.getTime()-6e4*n.getTimezoneOffset()):n;a(e.id,o),t(e.id,o,d),e.value=i.handleFieldSubmission(e,o,_)},className:`${U.datePickerOverrides} ${m?U.errorLabel:""} ${e.disabled||(0,Z.o)(e.readonly)?U.disabledLabelOverrides:""}`,dateFormat:h},o().createElement(ve.Z,{id:e.id,placeholder:p,labelText:e.label,value:r.value instanceof Date?r.value.toLocaleDateString(window.navigator.language):r.value,disabled:e.disabled,invalid:!m&&l.length>0,invalidText:l[0]?.errMessage})))},type:"date"},{id:"OHRINumber",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_}=o().useContext(M),[l,d]=(0,n.useState)(),[u,c]=(0,n.useState)([]),m=(0,n.useMemo)((()=>u[0]?.errCode==q.Tv),[u]);return(0,n.useEffect)((()=>{e.submission?.errors&&c(e.submission?.errors)}),[e.submission]),r.onBlur=()=>{r.value&&e.unspecified&&a(`${e.id}-unspecified`,!1),l!==r.value&&(t(e.id,r.value,c),e.value=i.handleFieldSubmission(e,r.value,_))},"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label}),r.value?o().createElement(_e,{value:r.value}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.numberInputWrapper},o().createElement(Ae.ZP,xe({},r,{id:e.id,invalid:!m&&u.length>0,invalidText:u[0]?.errMessage,label:e.label,max:e.questionOptions.max||void 0,min:e.questionOptions.min||void 0,name:e.id,value:r.value||"",onFocus:()=>d(r.value),allowEmpty:!0,size:"xl",disabled:e.disabled,className:m?U.errorLabel:""})))},type:"number"},{id:"OHRIMultiSelect",component:({question:e,onChange:t,handler:i})=>{const{t:r}=(0,w.useTranslation)(),[s,a]=(0,A.U$)(e.id),{setFieldValue:_,encounterContext:l}=o().useContext(M),[d,u]=(0,n.useState)([]),[c,m]=(0,n.useState)(0),[p,h]=(0,n.useState)(!1),[v,f]=(0,n.useState)("Loading..."),g=(0,n.useMemo)((()=>d[0]?.errCode==q.Tv),[d]);(0,n.useEffect)((()=>{(s.value&&0==s.value.length||!p&&e.value)&&m(c+1)}),[s.value]),(0,n.useEffect)((()=>{e.submission?.errors&&u(e.submission?.errors)}),[e.submission]);const b=e.questionOptions.answers.map(((t,i)=>({id:`${e.id}-${t.concept}`,concept:t.concept,label:t.label,key:i}))),y=[];return b.forEach((e=>{s.value?.includes(e.concept)&&y.push(e)})),(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{f(e)}))}),[v]),"view"==l.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:v}),s.value?.length?o().createElement(ge.Z,{style:{marginLeft:"1rem"}},i.getDisplayValue(e,s.value).map((e=>o().createElement(be.Z,null,e)))):o().createElement(ae,null)):!e.isHidden&&o().createElement(o().Fragment,null,o().createElement("div",{className:g?`${U.multiselectOverride} ${U.errorLabel}`:`${U.multiselectOverride}`},o().createElement(ye.Z.Filterable,{placeholder:r("filterItemsInMultiselect","Search..."),onChange:({selectedItems:n})=>{h(!0);const o=n.map((e=>e.concept));_(e.id,o),t(e.id,o,u),e.value=i.handleFieldSubmission(e,o,l)},id:e.label,items:b,initialSelectedItems:y,label:"",titleText:e.label,key:c,itemToString:e=>e?e.label:" ",disabled:e.disabled,invalid:!g&&d.length>0,invalidText:d[0]?.errMessage})),o().createElement("div",{className:U.formField},o().createElement(se,{value:"Selected Items"}),s.value?.length?o().createElement(ge.Z,{style:{marginLeft:"1rem"}},i.getDisplayValue(e,s.value)?.map((e=>e+", "))):o().createElement(ae,null)))},type:"checkbox"},{id:"OHRIContentSwitcher",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_,values:l}=o().useContext(M),[d,u]=(0,n.useState)([]),[c,m]=(0,n.useState)("Loading...");(0,n.useEffect)((()=>{e.submission?.errors&&u(e.submission?.errors)}),[e.submission]);const p=(0,n.useMemo)((()=>e.questionOptions.answers.findIndex((e=>e.concept==r.value))),[r.value]);return(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{m(e)}))}),[c]),"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:c}),r.value?o().createElement(_e,{value:i.getDisplayValue(e,r.value)}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.textContainer},o().createElement(ie.Z,{legendText:e.label,className:d.length?U.errorLegend:""},o().createElement(ne.Z,{onChange:n=>{a(e.id,n?.name),t(e.id,n?.name,u),e.value=i.handleFieldSubmission(e,n?.name,_)},selectedIndex:p,className:U.selectedOption},e.questionOptions.answers.map(((t,i)=>o().createElement(oe.Z,{className:p===i?U.switchOverrides:U.switchOverridesNone,name:t.concept||t.value,text:t.label,key:i,disabled:e.disabled}))))))},type:"content-switcher"},{id:"OHRIEncounterLocationPicker",component:({question:e})=>{const[t,i]=(0,A.U$)(e.id),{setEncounterLocation:r,setFieldValue:s,encounterContext:a}=o().useContext(M),[_,l]=(0,n.useState)([]),[d,u]=(0,n.useState)("Loading...");return(0,n.useEffect)((()=>{var t;e.questionOptions.locationTag&&(t=e.questionOptions.locationTag.trim().split(" ").join("%20"),(0,E.openmrsObservableFetch)(`/ws/rest/v1/location?tag=${t}&v=custom:(uuid,display)`).pipe((0,z.U)((({data:e})=>e.results)))).subscribe((e=>l(e)),(e=>(0,E.createErrorHandler)()))}),[]),(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{u(e)}))}),[d]),"view"==a.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:d}),t.value?o().createElement(_e,{value:t.value.display}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.formInputField},o().createElement(fe.Z,{id:e.id,titleText:e.label,label:"Choose location",items:_,itemToString:e=>e.display,selectedItem:t.value,onChange:({selectedItem:t})=>{s(e.id,t),r(t)},disabled:e.disabled}))},type:"encounter-location"},{id:"OHRIDropdown",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_}=o().useContext(M),[l,d]=o().useState([]),[u,c]=(0,n.useState)([]),[m,p]=(0,n.useState)("Loading..."),h=(0,n.useMemo)((()=>u[0]?.errCode==q.Tv),[u]);return(0,n.useEffect)((()=>{e.submission?.errors&&c(e.submission?.errors)}),[e.submission]),(0,n.useEffect)((()=>{d(e.questionOptions.answers.map((e=>e.value||e.concept)))}),[e.questionOptions.answers]),(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{p(e)}))}),[m]),"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:m}),r.value?o().createElement(_e,{value:i.getDisplayValue(e,r.value)}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.formInputField},o().createElement("div",{className:h?`${U.errorLabel} ${U.dropDownOverride}`:U.dropDownOverride},o().createElement(fe.Z,{id:e.id,titleText:e.label,label:"Choose an option",items:l,itemToString:t=>e.questionOptions.answers.find((e=>e.value?e.value==t:e.concept==t))?.label,selectedItem:r.value,onChange:({selectedItem:n})=>{return o=n,a(e.id,o),t(e.id,o,c),void(e.value=i.handleFieldSubmission(e,o,_));var o},disabled:e.disabled,invalid:!h&&u.length>0,invalidText:u.length&&u[0].errMessage})))},type:"select"},{id:"OHRITextArea",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_}=o().useContext(M),[l,d]=(0,n.useState)(),[u,c]=(0,n.useState)([]),[m,p]=(0,n.useState)("Loading..."),h=(0,n.useMemo)((()=>u[0]?.errCode==q.Tv),[u]);return(0,n.useEffect)((()=>{e.submission?.errors&&c(e.submission?.errors)}),[e.submission]),r.onBlur=()=>{r.value&&e.unspecified&&a(`${e.id}-unspecified`,!1),l!==r.value&&(t(e.id,r.value,c),e.value=i.handleFieldSubmission(e,r.value,_))},(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{p(e)}))}),[m]),"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:m}),r.value?o().createElement(_e,{value:r.value}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.formField},o().createElement("div",{className:h?`${U.textInputOverrides} ${U.errorLabel}`:U.textInputOverrides},o().createElement(Oe.Z,Se({},r,{id:e.id,labelText:e.label,name:e.id,value:r.value||"",onFocus:()=>d(r.value),rows:e.questionOptions.rows||4,disabled:e.disabled,invalid:!h&&u.length>0,invalidText:u.length&&u[0].errMessage}))))},type:"textarea"},{id:"OHRIToggle",component:({question:e,onChange:t,handler:i})=>{const[r,s]=(0,A.U$)(e.id),{setFieldValue:a,encounterContext:_,values:l}=o().useContext(M),[d,u]=(0,n.useState)("Loading...");return(0,n.useEffect)((()=>{e.value||"enter"!=_.sessionMode||(e.value=i.handleFieldSubmission(e,r.value,_))}),[]),(0,n.useEffect)((()=>{pe(e.questionOptions.concept).then((e=>{u(e)}))}),[d]),"view"==_.sessionMode||(0,Z.o)(e.readonly)?o().createElement("div",{className:U.formField},o().createElement(se,{value:e.label,tooltipText:d}),r.value?o().createElement(_e,{value:i.getDisplayValue(e,r.value)}):o().createElement(ae,null)):!e.isHidden&&o().createElement("div",{className:U.formField},o().createElement(T.Z,{labelText:e.label,id:e.id,labelA:e.questionOptions.toggleOptions.labelFalse,labelB:e.questionOptions.toggleOptions.labelTrue,onToggle:n=>{a(e.id,n),t(e.id,n,null),e.value=i.handleFieldSubmission(e,n,_)},toggled:!!r.value,disabled:e.disabled}))},type:"toggle"},{id:"OHRIObsGroup",component:te,type:"group"},{id:"OHRIRepeat",component:({question:e,onChange:t})=>{const[i,r]=(0,n.useState)([e]),{fields:s,encounterContext:a,obsGroupsToVoid:_}=o().useContext(M),{values:l,setValues:d}=(0,A.u6)(),[u,c]=(0,n.useState)(0),m=(0,E.useLayoutType)(),p=(0,n.useMemo)((()=>"phone"==m||"tablet"==m?"50rem":"90rem"),[m]);(0,n.useEffect)((()=>{if(a.encounter&&!u){const t=e.value?.uuid,i=a.encounter.obs.filter((i=>i.concept.uuid===e.questionOptions.concept&&i.uuid!=t));let n=u;i.forEach((e=>{n+=1,h(n,e)})),c(n)}}),[l]),(0,n.useEffect)((()=>{i[0]=e,r([...i])}),[e]);const h=(t,n)=>{const o=t,a=(0,ke.cloneDeep)(e);a.value=n,a.id=`${a.id}-${o}`,a.questions.forEach((e=>{e.id=`${e.id}-${o}`,e.groupId=a.id,e.value=null;let t=n?((e,t)=>{const i=e.questionOptions.rendering,n=t.groupMembers.filter((t=>t.concept.uuid==e.questionOptions.concept));return n.length?(e.value=n[0],"radio"!=i&&"content-switcher"!=i||P(e.questionOptions.concept,"custom:(uuid,display,datatype:(uuid,display,name))").subscribe((t=>{"Boolean"==t.datatype.name&&(e.value.value=n[0].value.uuid)})),"string"==typeof n[0].value||"number"==typeof n[0].value?"date"==e.questionOptions.rendering?ue()(n[0].value).toDate():n[0].value:"checkbox"==e.questionOptions.rendering?(e.value=n,e.value.map((e=>e.value.uuid))):"toggle"==e.questionOptions.rendering?(e.value.value=n[0].value.uuid,n[0].value==I.ks):n[0].value?.uuid):""})(e,n):null;l[`${e.id}`]=t||("checkbox"==e.questionOptions.rendering?[]:""),s.push(e)})),d(l),s.push(a),i.push(a),r(i)},v=i.map(((e,n)=>{const a=0!==n?o().createElement(He.Z,{style:{paddingTop:"1.2rem",marginLeft:".5rem"}},o().createElement(Fe.ZP,{renderIcon:qe.Ib_,kind:"danger--tertiary",onClick:()=>(e=>{e.value&&e.value.uuid&&(e.value.voided=!0,delete e.value.value,_.push(e.value)),r(i.filter((t=>t.id!==e.id))),[e.id,...e.questions.map((e=>e.id))].forEach((e=>{const t=s.findIndex((t=>t.id===e));s.splice(t,1),delete l[e]}))})(e),hasIconOnly:!0})):null;return o().createElement(o().Fragment,null,o().createElement(Te.default,{style:{margin:"0",marginBottom:"1rem",marginTop:"1rem",width:p}},o().createElement(te,{question:e,onChange:t,handler:Ze("obsGroup")}),a))}));return v.push(o().createElement(Te.default,null,o().createElement(He.Z,null,o().createElement(Fe.ZP,{renderIcon:De.aXP,kind:"ghost",onClick:()=>{const e=u+1;h(e,null),c(e)}},e.questionOptions.repeatOptions?.addText||"Add")))),!e.isHidden&&o().createElement("div",{style:{marginTop:"0.65rem",marginBottom:"2rem"}},o().createElement(ie.Z,{legendText:e.label},v))},type:"repeating"},{id:"OHRIFixedValue",component:({question:e,handler:t})=>{const{encounterContext:i}=o().useContext(M);return(0,n.useEffect)((()=>{if(e.value&&"string"==typeof e.value){const n=e.value;delete e.value,e.value=t.handleFieldSubmission(e,n,i)}}),[]),o().createElement(o().Fragment,null)},type:"fixed-value"},{id:"OHRIMarkdown",component:({question:e})=>!e.isHidden&&o().createElement(ze.D,{children:e.value.join("\n")}),type:"markdown"}],Re=[{id:"ObsSubmissionHandler",component:Le,type:"obs"},{id:"ObsGroupHandler",component:Le,type:"obsGroup"},{id:"EncounterLocationSubmissionHandler",component:{handleFieldSubmission:(e,t,i)=>null,getInitialValue:(e,t)=>({display:e.location.name,uuid:e.location.uuid}),getDisplayValue:(e,t)=>t.display},type:"encounterLocation"}],Be=[{id:"OHRIBaseValidator",component:q.Ls},{id:"date",component:Pe},{id:"js_expression",component:$e}],Ue=e=>Ne.find((t=>t.type==e))?.component;function Ze(e){return Re.find((t=>t.type==e))?.component}function We(e){return Be.find((t=>t.id==e))?.component||Be[0].component}var Ge=i(36392),Ke=i.n(Ge),Ye={};Ye.styleTagTransform=v(),Ye.setAttributes=c(),Ye.insert=d().bind(null,"head"),Ye.domAPI=_(),Ye.insertStyleElement=p(),s()(Ke(),Ye);const Je=Ke()&&Ke().locals?Ke().locals:void 0;var Xe=i(94076),Qe=i(93884),et=i(81975);const tt=function({page:e,onFieldChange:t,setSelectedPage:i,isCollapsed:n}){let r=e.label.replace(/\s/g,"");return o().createElement(Xe.h,{onEnter:()=>{i(r)},topOffset:"10%",bottomOffset:"60%"},o().createElement("div",{id:r,className:Je.pageContent},o().createElement("div",{style:{},className:Je.pageHeader},o().createElement("p",{className:Je.pageTitle},e.label)),o().createElement(Qe.ZP,null,e.sections.map(((i,r)=>o().createElement(et.Z,{title:i.label,open:n,className:Je.sectionContent},o().createElement("div",{className:Je.formSection,key:r},o().createElement(ee,{fields:i.questions,showTitle:e.sections.length>1,onFieldChange:t,sectionTitle:i.label,key:r}))))))))};function it({effect:e}){return(0,n.useEffect)((()=>e?.()),[e]),null}const nt=({formJson:e,patient:t,encounterDate:i,provider:r,location:s,values:a,isCollapsed:_,sessionMode:l,scrollablePages:d,setScrollablePages:u,setFieldValue:c,setSelectedPage:m,handlers:p,allInitialValues:h,setAllInitialValues:v})=>{const[f,g]=(0,n.useState)([]),[b,y]=(0,n.useState)(null),[A,x]=(0,n.useState)(null),[w,O]=(0,n.useState)(e),[S,C]=(0,n.useState)([]),[j,H]=(0,n.useState)({}),F=(0,n.useCallback)((()=>(e.pages.forEach((e=>{e.isSubform||d.add(e)})),()=>{e.pages.forEach((e=>{e.isSubform||d.delete(e)}))})),[d,e]),T={patient:t,encounter:A,location:s,sessionMode:l||(w?.encounter?"edit":"enter"),date:i};(0,n.useEffect)((()=>{b||y(s)}),[s]),(0,n.useEffect)((()=>{const e=[],t={};if(w.pages.forEach((t=>t.sections.forEach((t=>{t.questions.forEach((t=>{e.push(t),"obsGroup"==t.type&&t.questions.forEach((i=>{i.groupId=t.id,e.push(i)}))}))})))),A)e.forEach((i=>{const n=Ze(i.type);let o=n?.getInitialValue(A,i,e);(0,q.xb)(o)&&!(0,q.xb)(i.questionOptions.defaultValue)&&(o=me(i,T,n)),t[i.id]=null==o?"":o,i.unspecified&&(t[`${i.id}-unspecified`]=!o)})),y(A.location);else{const i={checkbox:[],toggle:!1,default:""};e.forEach((e=>{let n=null;(0,q.xb)(e.questionOptions.defaultValue)||(n=me(e,T,Ze(e.type))),(0,q.xb)(n)?t[e.id]=null!=i[e.questionOptions.rendering]?i[e.questionOptions.rendering]:i.default:t[e.id]=n,e.unspecified&&(t[`${e.id}-unspecified`]=!1)}))}g(e.map((i=>(i.hide?k({value:i,type:"field"},e,t):i.isHidden=!1,"string"==typeof i.readonly&&i.readonly?.split(" ")?.length>1&&(i.readonlyExpression=i.readonly,i.readonly=(0,Ve.j)(i.readonly,{value:i,type:"field"},e,t,{mode:l})),i)))),w.pages.forEach((i=>{i.hide?k({value:i,type:"page"},e,t):i.isHidden=!1})),O(w),H(t),v({...h,...t})}),[A]),(0,n.useEffect)((()=>{let t;return e.encounter&&"string"==typeof e.encounter?t=(0,E.openmrsObservableFetch)(`/ws/rest/v1/encounter/${e.encounter}?v=${L.Ib}`).subscribe((({data:e})=>x(e))):"object"==typeof e.encounter&&x(e.encounter),()=>t?.unsubscribe()}),[e.encounter]);const k=(e,t,i)=>{const{value:n,type:o}=e,r=(0,Ve.j)(n.hide?.hideWhenExpression,e,t,i,{mode:l});e.value.isHidden=r,"page"==o&&n.sections.forEach((e=>{e.isParentHidden=r,ce(r,e,t)})),"section"==o&&ce(r,n,t)},D=(0,n.useCallback)(((e,t)=>{Array.isArray(t)?t.forEach((t=>{delete t.formFieldNamespace,delete t.formFieldPath,(0,q.xb)(t.groupMembers)?delete t.groupMembers:t.groupMembers.forEach((e=>{delete e.formFieldNamespace,delete e.formFieldPath,(0,q.xb)(e.groupMembers)&&delete e.groupMembers})),e.push(t)})):(delete t.formFieldNamespace,delete t.formFieldPath,(0,q.xb)(t.groupMembers)?delete t.groupMembers:t.groupMembers.forEach((e=>{delete e.formFieldNamespace,delete e.formFieldPath,(0,q.xb)(e.groupMembers)&&delete e.groupMembers})),e.push(t))}),[]),z=(0,n.useCallback)((e=>{let t=!1;return f.filter((e=>!(e.isParentHidden||e.disabled||e.isHidden||(0,Z.o)(e.readonly)))).filter((e=>1!=e.submission?.unspecified)).forEach((i=>{const n=q.Ls.validate(i,e[i.id]);if(n.length)return i.submission={...i.submission,errors:n},void(t=!0)})),!t}),[f]),P=(e,t,i)=>{const n=f.find((t=>t.id==e)),o=Array.isArray(n.validators)?[{type:"OHRIBaseValidator"},...n.validators]:[{type:"OHRIBaseValidator"}];Array.isArray(n.validators);const r={expressionContext:{mode:l},values:{...a,[e]:t},fields:f};for(let e of o){const o=We(e.type)?.validate(n,t,{...r,...e})||[];if(i&&i(o),o.length)return}"toggle"==n.questionOptions.rendering&&(t=t?I.ks:I.Mf),n.fieldDependants&&n.fieldDependants.forEach((i=>{const n=f.find((e=>e.id==i));k({value:n,type:"field"},f,{...a,[e]:t}),n.readonlyExpression&&(n.readonly=(0,Ve.j)(n.readonlyExpression,{value:n,type:"field"},f,{...a,[e]:t},{mode:l}));let o=[...f];const r=o.findIndex((e=>e.id==i));o[r]=n,g(o)})),n.pageDependants&&n.pageDependants?.forEach((i=>{const n=w.pages.find((e=>e.label==i));k({value:n,type:"page"},f,{...a,[e]:t});let o=w;const r=o.pages.findIndex((e=>e.label==i));o[r]=n,O(o)}))};return p.set(w.name,{validate:z,submit:n=>{const o=[];f.filter((e=>e.value||"obsGroup"==e.type)).filter((e=>!(e.isParentHidden||e.isHidden||"obs"!=e.type&&"obsGroup"!=e.type))).filter((e=>!e.groupId)).forEach((e=>{if("obsGroup"==e.type){const n={person:t.id,obsDatetime:i,concept:e.questionOptions.concept,location:b,order:null,groupMembers:[],uuid:e?.value?.uuid,voided:!1};let r=!1;e.questions.forEach((e=>{e.value&&(r=!0,Array.isArray(e.value)?n.groupMembers.push(...e.value):n.groupMembers.push(e.value))})),r&&D(o,n)}else D(o,e.value)})),S.forEach((e=>D(o,e)));let s={};if(A?(Object.assign(s,A),s.location=b.uuid,-1!==s.encounterProviders.findIndex((e=>e.provider.uuid==r))||(s.encounterProviders=[...s.encounterProviders,{provider:r,encounterRole:"240b26f9-dd88-4172-823d-4a8bfeb7841f"}]),s.obs=o):s={patient:t.id,encounterDatetime:i,location:b.uuid,encounterType:e.encounterType,encounterProviders:[{provider:r,encounterRole:"240b26f9-dd88-4172-823d-4a8bfeb7841f"}],obs:o},s.obs?.length||s.orders?.length)return function(e,t,i){let n="/ws/rest/v1/encounter";return i&&(n+=`/${i}`),(0,E.openmrsFetch)(n,{headers:{"Content-Type":"application/json"},method:"POST",body:t,signal:e.signal})}(new AbortController,s,A?.uuid)}}),o().createElement(M.Provider,{value:{values:a,setFieldValue:c,setEncounterLocation:y,setObsGroupsToVoid:C,obsGroupsToVoid:S,fields:f,encounterContext:T}},o().createElement(it,{effect:F}),w.pages.map(((e,n)=>(0,Z.o)(e.isHidden)?null:(0,Z.o)(e.isSubform)&&e.subform?.form?"enter"==l||e.subform?.form.encounter?(e.subform.form.pages=e.subform.form.pages.filter((e=>!(0,Z.o)(e.isSubform))),o().createElement(nt,{key:n,formJson:e.subform?.form,patient:t,encounterDate:i,provider:r,location:s,values:a,isCollapsed:_,sessionMode:l,scrollablePages:d,setAllInitialValues:v,allInitialValues:h,setScrollablePages:u,setFieldValue:c,setSelectedPage:m,handlers:p})):null:o().createElement(tt,{page:e,onFieldChange:P,setSelectedPage:m,isCollapsed:_}))))};var ot=i(98575);const rt=({formJson:e,encounterUuid:t,mode:r,onSubmit:s,onCancel:a,handleClose:_,patientUUID:l})=>{const[d,u]=(0,n.useState)(null),[c,m]=(0,n.useState)(null),[,p]=(0,E.useCurrentPatient)(l),h=(0,E.useSessionUser)(),[v,f]=(0,n.useState)({}),g=new Date,[b,S]=(0,n.useState)(new Set),[C,j]=(0,n.useState)(""),[H,F]=(0,n.useState)(!0),{t:T}=(0,w.useTranslation)(),k=new Map,q=(0,n.useMemo)((()=>{const i=JSON.parse(JSON.stringify(e));t&&!i.encounter&&(i.encounter=t);let n=i.pages.length;for(;n--;){const e=i.pages[n];(0,Z.o)(e.isSubform)&&!(0,Z.o)(e.isHidden)&&e.subform?.form?.encounterType==i.encounterType&&i.pages.splice(n,1,...e.subform.form.pages.filter((e=>!(0,Z.o)(e.isSubform))))}return i}),[t]),L=(0,n.useMemo)((()=>r||(t?"edit":"enter")),[r]);return(0,n.useEffect)((()=>{const e={id:"ohri-form-header-toggle-ext",moduleName:"@openmrs/esm-ohri-app",slot:"patient-chart-workspace-header-slot",load:(0,E.getAsyncLifecycle)((()=>i.e(1052).then(i.bind(i,91052))),{featureName:"ohri-form-header-toggle",moduleName:"@openmrs/esm-ohri-app"}),meta:{handleCollapse:e=>{F(e)}}};return(0,E.registerExtension)(e.id,e),(0,E.attach)("patient-chart-workspace-header-slot",e.id),()=>{(0,E.detach)("patient-chart-workspace-header-slot",e.id)}}),[]),(0,n.useEffect)((()=>{h&&(t||m(h.sessionLocation),u(h.currentProvider.uuid))}),[h]),o().createElement(A.J9,{enableReinitialize:!0,initialValues:v,validationSchema:x.Ry({}),onSubmit:(e,{setSubmitting:t})=>{(e=>{let t=!0;if(k.forEach((i=>{const n=i?.validate?.(e);n||(t=!1)})),t){const t=[...k].map((([t,i])=>i?.submit?.(e)));Promise.all(t).then((e=>{"edit"==r?(0,E.showToast)({description:T("updatedRecordDescription","The patient encounter was updated"),title:T("updatedRecord","Record updated"),kind:"success",critical:!0}):(0,E.showToast)({description:T("createdRecordDescription","A new encounter was created"),title:T("createdRecord","Record created"),kind:"success",critical:!0}),s?.()}))}})(e),t(!1)}},(t=>o().createElement(A.l0,{className:`bx--form no-padding ng-untouched ng-pristine ng-invalid ${y.ohriForm}`},p?o().createElement("div",{className:y.ohriFormContainer},o().createElement(D,{scrollAblePages:b,selectedPage:C,mode:r,onCancel:a,handleClose:_,values:t.values,setValues:t.setValues,allowUnspecifiedAll:e.allowUnspecifiedAll,defaultPage:e.defaultPage}),o().createElement("div",{className:y.formContent},o().createElement(ot.p,{patient:p}),o().createElement("div",{className:y.formContentBody},o().createElement(nt,{formJson:q,patient:p,encounterDate:g,provider:d,location:c,values:t.values,isCollapsed:H,sessionMode:L,scrollablePages:b,setAllInitialValues:f,allInitialValues:v,setScrollablePages:S,setFieldValue:t.setFieldValue,setSelectedPage:j,handlers:k})))):o().createElement(O.Z,null))))},st=({state:e,closeWorkspace:t,encounterUuid:i,mode:r})=>{const s=(0,n.useCallback)((()=>{e.updateParent&&e.updateParent(),t()}),[]);return o().createElement(rt,{formJson:e.formJson,onCancel:t,onSubmit:s,encounterUuid:i,mode:r})}},36:(e,t,i)=>{(t=i(82609)(!1)).push([e.id,".esm-ohri-hiv__loading-component__centerLoadingSVG___Vme8M{display:flex;width:100vw;height:100vh;justify-content:center;align-items:center}",""]),t.locals={centerLoadingSVG:"esm-ohri-hiv__loading-component__centerLoadingSVG___Vme8M"},e.exports=t},82592:(e,t,i)=>{(t=i(82609)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-light-01: #007d79}.esm-ohri-hiv__patient-banner__productiveHeading01___3IV1N{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv__patient-banner__productiveHeading02___Fe3xU{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.esm-ohri-hiv__patient-banner__productiveHeading03___3sHJI{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.esm-ohri-hiv__patient-banner__productiveHeading04___1nh3V{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.esm-ohri-hiv__patient-banner__productiveHeading05___2Q8eh{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.esm-ohri-hiv__patient-banner__productiveHeading06___2OEos{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.esm-ohri-hiv__patient-banner__bodyShort01___1St_2{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv__patient-banner__helperText01___3fF-O{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv__patient-banner__bodyShort02___3XbWf{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.esm-ohri-hiv__patient-banner__bodyLong01___1xcA0{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.esm-ohri-hiv__patient-banner__bodyLong02___1B3y2{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.esm-ohri-hiv__patient-banner__label01___3xCQ6{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv__patient-banner__text01___E6Jpi{color:#161616}.esm-ohri-hiv__patient-banner__text02___1FL_i{color:#525252}aside{background-color:#fff !important}.esm-ohri-hiv__patient-banner__patientBannerContainer___3eDTi{align-items:baseline;padding:0;width:inherit}.esm-ohri-hiv__patient-banner__patientBannerContainer___3eDTi>div{width:100%}",""]),t.locals={productiveHeading01:"esm-ohri-hiv__patient-banner__productiveHeading01___3IV1N",productiveHeading02:"esm-ohri-hiv__patient-banner__productiveHeading02___Fe3xU",productiveHeading03:"esm-ohri-hiv__patient-banner__productiveHeading03___3sHJI",productiveHeading04:"esm-ohri-hiv__patient-banner__productiveHeading04___1nh3V",productiveHeading05:"esm-ohri-hiv__patient-banner__productiveHeading05___2Q8eh",productiveHeading06:"esm-ohri-hiv__patient-banner__productiveHeading06___2OEos",bodyShort01:"esm-ohri-hiv__patient-banner__bodyShort01___1St_2",helperText01:"esm-ohri-hiv__patient-banner__helperText01___3fF-O",bodyShort02:"esm-ohri-hiv__patient-banner__bodyShort02___3XbWf",bodyLong01:"esm-ohri-hiv__patient-banner__bodyLong01___1xcA0",bodyLong02:"esm-ohri-hiv__patient-banner__bodyLong02___1B3y2",label01:"esm-ohri-hiv__patient-banner__label01___3xCQ6",text01:"esm-ohri-hiv__patient-banner__text01___E6Jpi",text02:"esm-ohri-hiv__patient-banner__text02___1FL_i",patientBannerContainer:"esm-ohri-hiv__patient-banner__patientBannerContainer___3eDTi"},e.exports=t},17521:(e,t,i)=>{(t=i(82609)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-light-01: #007d79}.esm-ohri-hiv___input__productiveHeading01___3efTB{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv___input__productiveHeading02___3JK0K{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.esm-ohri-hiv___input__productiveHeading03___oSZSr{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.esm-ohri-hiv___input__productiveHeading04___1k7Gz{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.esm-ohri-hiv___input__productiveHeading05___2DS9X{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.esm-ohri-hiv___input__productiveHeading06___3nquH{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.esm-ohri-hiv___input__bodyShort01___1-lOo{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv___input__helperText01___3mUe2{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv___input__bodyShort02___1SQXu{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.esm-ohri-hiv___input__bodyLong01___1SogS{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.esm-ohri-hiv___input__bodyLong02___1Wtsy{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.esm-ohri-hiv___input__label01___2tspH{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv___input__text01___1TD33{color:#161616}.esm-ohri-hiv___input__text02___34XWE{color:#525252}aside{background-color:#fff !important}.esm-ohri-hiv___input__formField___1AY8i,.esm-ohri-hiv___input__numberInputWrapper___3SPQH .bx--number,.esm-ohri-hiv___input__formInputField___xDdc2{padding-bottom:18px;margin-top:10px}.esm-ohri-hiv___input__formField___1AY8i>div>div>label,.esm-ohri-hiv___input__numberInputWrapper___3SPQH .bx--number>div>div>label,.esm-ohri-hiv___input__formInputField___xDdc2>div>div>label{color:#525252}.esm-ohri-hiv___input__ohriFormLabel___2K9Mo{font-size:.75rem}.esm-ohri-hiv___input__datePickerOverrides___gyecw input{width:22.313rem !important}.esm-ohri-hiv___input__disabledLabelOverrides___2vK-E label{color:#525252 !important}.esm-ohri-hiv___input__formInputField___xDdc2{width:auto}.esm-ohri-hiv___input__formInputField___xDdc2>div>div>label{max-width:auto}.esm-ohri-hiv___input__formInputField___xDdc2>div>div>div{width:22.313rem !important}.esm-ohri-hiv___input__multiselectOverride___3kgAo{width:auto;padding-bottom:15px}.esm-ohri-hiv___input__multiselectOverride___3kgAo>div>div{width:22.313rem !important}.esm-ohri-hiv___input__multiselectOverride___3kgAo>div div div input{border:0 !important;border-bottom:1px solid #8d8d8d !important}.esm-ohri-hiv___input__dropDownOverride___2wcnI>div div button{border-bottom:1px solid #8d8d8d !important}.esm-ohri-hiv___input__numberInputWrapper___3SPQH .bx--number{width:22.313rem;font-size:.875rem}.esm-ohri-hiv___input__textContainer___12KRx label{font-size:.875rem !important}.esm-ohri-hiv___input__selectedOption___SZu3V{border-radius:4px;width:15rem}.esm-ohri-hiv___input__selectedOption___SZu3V button{background-color:#f4f4f4}.esm-ohri-hiv___input__switchOverrides___3-ALO{background-color:#edf5ff !important;color:#0f62fe !important;padding:0 0 0 1rem;border:solid 1px #0f62fe !important}.esm-ohri-hiv___input__switchOverrides___3-ALO button:focus{border:none !important}.esm-ohri-hiv___input__selectedOption___SZu3V button:before{display:none !important}.esm-ohri-hiv___input__switchOverridesNone___nXV_C{background-color:#f4f4f4 !important;padding:0 0 0 1rem;border:solid 1px #a6c8ff !important}.esm-ohri-hiv___input__radioButton_ohri___76iRx input[type=radio]{opacity:0 !important;position:fixed;width:0}.esm-ohri-hiv___input__radioButton_ohri___76iRx label{display:inline-block;border:1px solid #a6c8ff;color:#525252;padding:.688rem 1rem;padding-right:3rem;border-radius:4px 0 0 4px;background-color:#f4f4f4}.esm-ohri-hiv___input__radioButton_ohri___76iRx label:last-child{margin-left:-5px;border-radius:0 4px 4px 0}.esm-ohri-hiv___input__radioButton_ohri___76iRx input[type=radio]:checked+label{color:#0f62fe;border-color:#0f62fe;background-color:#edf5ff}.esm-ohri-hiv___input__radioButton_ohri___76iRx>.esm-ohri-hiv___input__bx--radio-button-wrapper___Cimqv{margin-right:0rem !important}.esm-ohri-hiv___input__textInputOverrides___1IitC>div>div{width:22.313rem}.esm-ohri-hiv___input__unspecified___3XG-g{margin-top:-13px}.esm-ohri-hiv___input__unspecified___3XG-g>div label{font-size:12px;color:#525252;padding-bottom:1rem}.esm-ohri-hiv___input__errorLegend___27dMl legend,.esm-ohri-hiv___input__errorLabel___MB7pZ label{color:#da1e28 !important}.esm-ohri-hiv___input__unspecified___3XG-g>div label{font-size:12px;color:#525252}.esm-ohri-hiv___input__errorLabel___MB7pZ .bx--form-requirement{display:block;max-height:12.5rem;overflow:visible;font-weight:400;color:#da1e28}.esm-ohri-hiv___input__obsGroupColumn___1o697{max-width:18rem}.esm-ohri-hiv___input__obsGroupColumn___1o697>div{margin-top:0 !important}.esm-ohri-hiv___input__obsGroupColumn___1o697>div>div>div{max-width:18rem !important}.esm-ohri-hiv___input__obsGroupColumn___1o697>div>div>div>div{max-width:18rem !important}.esm-ohri-hiv___input__repeatContentWrapper___2-Vbg{margin-top:.65rem;margin-bottom:2rem}.esm-ohri-hiv___input__ohriLabel___10_7e{width:auto !important}.esm-ohri-hiv___input__ohriLabel___10_7e .bx--assistive-text{max-width:30rem !important;font-size:.75rem;white-space:pre-line !important}",""]),t.locals={productiveHeading01:"esm-ohri-hiv___input__productiveHeading01___3efTB",productiveHeading02:"esm-ohri-hiv___input__productiveHeading02___3JK0K",productiveHeading03:"esm-ohri-hiv___input__productiveHeading03___oSZSr",productiveHeading04:"esm-ohri-hiv___input__productiveHeading04___1k7Gz",productiveHeading05:"esm-ohri-hiv___input__productiveHeading05___2DS9X",productiveHeading06:"esm-ohri-hiv___input__productiveHeading06___3nquH",bodyShort01:"esm-ohri-hiv___input__bodyShort01___1-lOo",helperText01:"esm-ohri-hiv___input__helperText01___3mUe2",bodyShort02:"esm-ohri-hiv___input__bodyShort02___1SQXu",bodyLong01:"esm-ohri-hiv___input__bodyLong01___1SogS",bodyLong02:"esm-ohri-hiv___input__bodyLong02___1Wtsy",label01:"esm-ohri-hiv___input__label01___2tspH",text01:"esm-ohri-hiv___input__text01___1TD33",text02:"esm-ohri-hiv___input__text02___34XWE",formField:"esm-ohri-hiv___input__formField___1AY8i",numberInputWrapper:"esm-ohri-hiv___input__numberInputWrapper___3SPQH",formInputField:"esm-ohri-hiv___input__formInputField___xDdc2",ohriFormLabel:"esm-ohri-hiv___input__ohriFormLabel___2K9Mo",datePickerOverrides:"esm-ohri-hiv___input__datePickerOverrides___gyecw",disabledLabelOverrides:"esm-ohri-hiv___input__disabledLabelOverrides___2vK-E",multiselectOverride:"esm-ohri-hiv___input__multiselectOverride___3kgAo",dropDownOverride:"esm-ohri-hiv___input__dropDownOverride___2wcnI",textContainer:"esm-ohri-hiv___input__textContainer___12KRx",selectedOption:"esm-ohri-hiv___input__selectedOption___SZu3V",switchOverrides:"esm-ohri-hiv___input__switchOverrides___3-ALO",switchOverridesNone:"esm-ohri-hiv___input__switchOverridesNone___nXV_C",radioButton_ohri:"esm-ohri-hiv___input__radioButton_ohri___76iRx","bx--radio-button-wrapper":"esm-ohri-hiv___input__bx--radio-button-wrapper___Cimqv",textInputOverrides:"esm-ohri-hiv___input__textInputOverrides___1IitC",unspecified:"esm-ohri-hiv___input__unspecified___3XG-g",errorLegend:"esm-ohri-hiv___input__errorLegend___27dMl",errorLabel:"esm-ohri-hiv___input__errorLabel___MB7pZ",obsGroupColumn:"esm-ohri-hiv___input__obsGroupColumn___1o697",repeatContentWrapper:"esm-ohri-hiv___input__repeatContentWrapper___2-Vbg",ohriLabel:"esm-ohri-hiv___input__ohriLabel___10_7e"},e.exports=t},36392:(e,t,i)=>{(t=i(82609)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-light-01: #007d79}.esm-ohri-hiv___page__productiveHeading01___1I2AV{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv___page__productiveHeading02___2KNcV{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.esm-ohri-hiv___page__productiveHeading03___1YOvy{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.esm-ohri-hiv___page__productiveHeading04____JvMS{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.esm-ohri-hiv___page__productiveHeading05___3_pJW{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.esm-ohri-hiv___page__productiveHeading06___rZ8Qw{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.esm-ohri-hiv___page__bodyShort01___16s3G{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv___page__helperText01___2hLb3{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv___page__bodyShort02___WkF8Q{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.esm-ohri-hiv___page__bodyLong01___3J0pi{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.esm-ohri-hiv___page__bodyLong02___22Cd3{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.esm-ohri-hiv___page__label01___3K1me{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv___page__text01___2yS_a{color:#161616}.esm-ohri-hiv___page__text02___3x4Dc{color:#525252}aside{background-color:#fff !important}.esm-ohri-hiv___page__divider___1yvKR{background-color:rgba(107,104,104,.5);margin:25px 0}.esm-ohri-hiv___page__pageContent___3aDP7:last-child>hr{display:none}.esm-ohri-hiv___page__pageHeader___ojjH5{display:flex;flex-direction:row;margin:20px 0 20px 0}.esm-ohri-hiv___page__pageTitle___2VjsK{font-size:1.25rem;font-weight:600;line-height:1.4;color:var(--color-gray-100);width:100%}.esm-ohri-hiv___page__required___1elZl{margin:.25rem 27rem .5rem 0;font-size:.875rem;line-height:1.29;letter-spacing:.16px;color:var(--color-gray-70);width:100%}.esm-ohri-hiv___page__formSection___1fbE6{flex:1 1 65%}.esm-ohri-hiv___page__formSection___1fbE6>div>fieldset{margin-bottom:0 !important}.esm-ohri-hiv___page__collapseToggle___2FuSQ{margin-Left:-180px;margin-bottom:20px;margin-top:-10px}.esm-ohri-hiv___page__sectionContent___CZG98>div{background-color:#f4f4f4}.esm-ohri-hiv___page__formSection___1fbE6>div div div input,.esm-ohri-hiv___page__formSection___1fbE6>div div div textarea,.esm-ohri-hiv___page__formSection___1fbE6>div div div dropdown,.esm-ohri-hiv___page__formSection___1fbE6 .bx--dropdown button{background-color:#fff !important}@media(min-width: 640px){.bx--accordion__content{padding-right:2rem !important}}",""]),t.locals={productiveHeading01:"esm-ohri-hiv___page__productiveHeading01___1I2AV",productiveHeading02:"esm-ohri-hiv___page__productiveHeading02___2KNcV",productiveHeading03:"esm-ohri-hiv___page__productiveHeading03___1YOvy",productiveHeading04:"esm-ohri-hiv___page__productiveHeading04____JvMS",productiveHeading05:"esm-ohri-hiv___page__productiveHeading05___3_pJW",productiveHeading06:"esm-ohri-hiv___page__productiveHeading06___rZ8Qw",bodyShort01:"esm-ohri-hiv___page__bodyShort01___16s3G",helperText01:"esm-ohri-hiv___page__helperText01___2hLb3",bodyShort02:"esm-ohri-hiv___page__bodyShort02___WkF8Q",bodyLong01:"esm-ohri-hiv___page__bodyLong01___3J0pi",bodyLong02:"esm-ohri-hiv___page__bodyLong02___22Cd3",label01:"esm-ohri-hiv___page__label01___3K1me",text01:"esm-ohri-hiv___page__text01___2yS_a",text02:"esm-ohri-hiv___page__text02___3x4Dc",divider:"esm-ohri-hiv___page__divider___1yvKR",pageContent:"esm-ohri-hiv___page__pageContent___3aDP7",pageHeader:"esm-ohri-hiv___page__pageHeader___ojjH5",pageTitle:"esm-ohri-hiv___page__pageTitle___2VjsK",required:"esm-ohri-hiv___page__required___1elZl",formSection:"esm-ohri-hiv___page__formSection___1fbE6",collapseToggle:"esm-ohri-hiv___page__collapseToggle___2FuSQ",sectionContent:"esm-ohri-hiv___page__sectionContent___CZG98"},e.exports=t},38909:(e,t,i)=>{(t=i(82609)(!1)).push([e.id,".esm-ohri-hiv__ohri-form-section__section___X07w6{border-radius:solid 1px rgba(107,104,104,.5);margin-bottom:3.063rem}.esm-ohri-hiv__ohri-form-section__sectionTitle___1Oajl{max-width:200px;font-size:1rem;font-weight:600;line-height:1.38;color:#525252;margin-bottom:.5rem}.esm-ohri-hiv__ohri-form-section__sectionContainer___iQ7nY{margin-top:1.438rem;width:90%}.esm-ohri-hiv__ohri-form-section__sectionContainer___iQ7nY .bx--fieldset{margin-bottom:0}.esm-ohri-hiv__ohri-form-section__sectionContainer___iQ7nY>div{margin-bottom:1rem}",""]),t.locals={section:"esm-ohri-hiv__ohri-form-section__section___X07w6",sectionTitle:"esm-ohri-hiv__ohri-form-section__sectionTitle___1Oajl",sectionContainer:"esm-ohri-hiv__ohri-form-section__sectionContainer___iQ7nY"},e.exports=t},66992:(e,t,i)=>{(t=i(82609)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-light-01: #007d79}.esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading01___2a1ss{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading02___3ztK8{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading03___3UWKO{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading04___2nBC8{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading05___2FERy{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading06___xd5O-{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.esm-ohri-hiv__ohri-form-sidebar-component__bodyShort01___fiRR7{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.esm-ohri-hiv__ohri-form-sidebar-component__helperText01___5yubD{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv__ohri-form-sidebar-component__bodyShort02___1spZ1{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.esm-ohri-hiv__ohri-form-sidebar-component__bodyLong01___1kGp9{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.esm-ohri-hiv__ohri-form-sidebar-component__bodyLong02___qVlAW{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.esm-ohri-hiv__ohri-form-sidebar-component__label01___3RA0R{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.esm-ohri-hiv__ohri-form-sidebar-component__text01___3SrmB{color:#161616}.esm-ohri-hiv__ohri-form-sidebar-component__text02___3jbh-{color:#525252}aside{background-color:#fff !important}.esm-ohri-hiv__ohri-form-sidebar-component__sidebar___Xr1ih{width:12rem;min-height:8rem;overscroll-behavior:contain;margin:1px 13px 15px 0}.esm-ohri-hiv__ohri-form-sidebar-component__sidebarList___2hsxP{max-Height:100%}.esm-ohri-hiv__ohri-form-sidebar-component__sidenavActions___23RWI{margin-left:.6rem}@media all and (device-width: 600px)and (device-height: 1024px)and (orientation: portrait){.esm-ohri-hiv__ohri-form-sidebar-component__sidebar___Xr1ih{width:11rem;max-height:500px;margin-right:20px;position:fixed}.esm-ohri-hiv__ohri-form-sidebar-component__sidebarList___2hsxP{max-Height:200px;overflow-y:scroll}}.esm-ohri-hiv__ohri-form-sidebar-component__link___2i3jc{margin:.375rem 0 .375rem .5rem;font-size:1rem;line-height:1.43;letter-spacing:.16px;color:#161616;cursor:pointer}.esm-ohri-hiv__ohri-form-sidebar-component__link___2i3jc{margin:.375rem 0 .375rem .5rem;font-size:1rem;line-height:1.43;letter-spacing:.16px;color:#161616;cursor:pointer}.esm-ohri-hiv__ohri-form-sidebar-component__link___2i3jc:hover{outline:none}.esm-ohri-hiv__ohri-form-sidebar-component__sidebarSection___2-GuU{border-left:.5rem solid #9ef0f0;height:auto;margin:.122rem 0 .122rem;padding:.382rem .375rem .118rem 1rem;background-color:#fff;cursor:pointer}.esm-ohri-hiv__ohri-form-sidebar-component__sidebarSectionActive___cav-P{border-left:.5rem solid #009d9a;height:auto;font-weight:600;margin:.122rem 0 .122rem;padding:.382rem .375rem .118rem 1rem;background-color:#ededed;cursor:pointer}.esm-ohri-hiv__ohri-form-sidebar-component__sidebarSectionDone___3Ls24{border-left:.5rem solid #42be65;height:auto;margin:.122rem 0 .122rem;padding:.382rem .375rem .118rem 1rem;background-color:#defbe6;cursor:pointer}.esm-ohri-hiv__ohri-form-sidebar-component__sidebarSectionLink___3snIF{font-size:.875rem;font-stretch:normal;font-style:normal;line-height:1.43;letter-spacing:.16px;color:#161616}.esm-ohri-hiv__ohri-form-sidebar-component__sideBarHorizontalLine___1hFf8{margin-top:1.5rem}",""]),t.locals={productiveHeading01:"esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading01___2a1ss",productiveHeading02:"esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading02___3ztK8",productiveHeading03:"esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading03___3UWKO",productiveHeading04:"esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading04___2nBC8",productiveHeading05:"esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading05___2FERy",productiveHeading06:"esm-ohri-hiv__ohri-form-sidebar-component__productiveHeading06___xd5O-",bodyShort01:"esm-ohri-hiv__ohri-form-sidebar-component__bodyShort01___fiRR7",helperText01:"esm-ohri-hiv__ohri-form-sidebar-component__helperText01___5yubD",bodyShort02:"esm-ohri-hiv__ohri-form-sidebar-component__bodyShort02___1spZ1",bodyLong01:"esm-ohri-hiv__ohri-form-sidebar-component__bodyLong01___1kGp9",bodyLong02:"esm-ohri-hiv__ohri-form-sidebar-component__bodyLong02___qVlAW",label01:"esm-ohri-hiv__ohri-form-sidebar-component__label01___3RA0R",text01:"esm-ohri-hiv__ohri-form-sidebar-component__text01___3SrmB",text02:"esm-ohri-hiv__ohri-form-sidebar-component__text02___3jbh-",sidebar:"esm-ohri-hiv__ohri-form-sidebar-component__sidebar___Xr1ih",sidebarList:"esm-ohri-hiv__ohri-form-sidebar-component__sidebarList___2hsxP",sidenavActions:"esm-ohri-hiv__ohri-form-sidebar-component__sidenavActions___23RWI",link:"esm-ohri-hiv__ohri-form-sidebar-component__link___2i3jc",sidebarSection:"esm-ohri-hiv__ohri-form-sidebar-component__sidebarSection___2-GuU",sidebarSectionActive:"esm-ohri-hiv__ohri-form-sidebar-component__sidebarSectionActive___cav-P",sidebarSectionDone:"esm-ohri-hiv__ohri-form-sidebar-component__sidebarSectionDone___3Ls24",sidebarSectionLink:"esm-ohri-hiv__ohri-form-sidebar-component__sidebarSectionLink___3snIF",sideBarHorizontalLine:"esm-ohri-hiv__ohri-form-sidebar-component__sideBarHorizontalLine___1hFf8"},e.exports=t},35480:(e,t,i)=>{(t=i(82609)(!1)).push([e.id,".esm-ohri-hiv__ohri-form__ohriForm___2RsoG{height:100%;overflow:hidden}.esm-ohri-hiv__ohri-form__ohriFormContainer___zLqL5{display:-webkit-flex;height:90vh;overflow-y:hidden}.esm-ohri-hiv__ohri-form__ohriFormContainer___zLqL5 .bx--label{font-size:.875rem}.esm-ohri-hiv__ohri-form__formContent___49VEt{margin:0;flex-basis:65%;flex-grow:1;flex-shrink:1;position:relative;overflow-y:hidden;display:flex;flex-direction:column}.esm-ohri-hiv__ohri-form__formContentBody___10Ea0{overflow-y:auto;height:77.5vh;width:inherit;position:sticky}@media(max-width: 768px){.esm-ohri-hiv__ohri-form__ohriFormContainer___zLqL5{height:100vh}}",""]),t.locals={ohriForm:"esm-ohri-hiv__ohri-form__ohriForm___2RsoG",ohriFormContainer:"esm-ohri-hiv__ohri-form__ohriFormContainer___zLqL5",formContent:"esm-ohri-hiv__ohri-form__formContent___49VEt",formContentBody:"esm-ohri-hiv__ohri-form__formContentBody___10Ea0"},e.exports=t},96616:(e,t,i)=>{var n={"./af":95191,"./af.js":95191,"./ar":54358,"./ar-dz":71727,"./ar-dz.js":71727,"./ar-kw":98279,"./ar-kw.js":98279,"./ar-ly":87895,"./ar-ly.js":87895,"./ar-ma":72766,"./ar-ma.js":72766,"./ar-sa":52796,"./ar-sa.js":52796,"./ar-tn":12386,"./ar-tn.js":12386,"./ar.js":54358,"./az":57452,"./az.js":57452,"./be":79053,"./be.js":79053,"./bg":65428,"./bg.js":65428,"./bm":21569,"./bm.js":21569,"./bn":56212,"./bn-bd":24635,"./bn-bd.js":24635,"./bn.js":56212,"./bo":13667,"./bo.js":13667,"./br":192,"./br.js":192,"./bs":51802,"./bs.js":51802,"./ca":19118,"./ca.js":19118,"./cs":39990,"./cs.js":39990,"./cv":30557,"./cv.js":30557,"./cy":4227,"./cy.js":4227,"./da":95406,"./da.js":95406,"./de":87994,"./de-at":44139,"./de-at.js":44139,"./de-ch":86591,"./de-ch.js":86591,"./de.js":87994,"./dv":94649,"./dv.js":94649,"./el":14453,"./el.js":14453,"./en-au":48428,"./en-au.js":48428,"./en-ca":36972,"./en-ca.js":36972,"./en-gb":13224,"./en-gb.js":13224,"./en-ie":18843,"./en-ie.js":18843,"./en-il":32732,"./en-il.js":32732,"./en-in":76579,"./en-in.js":76579,"./en-nz":29851,"./en-nz.js":29851,"./en-sg":70442,"./en-sg.js":70442,"./eo":10654,"./eo.js":10654,"./es":63621,"./es-do":68791,"./es-do.js":68791,"./es-mx":67278,"./es-mx.js":67278,"./es-us":60717,"./es-us.js":60717,"./es.js":63621,"./et":72404,"./et.js":72404,"./eu":62944,"./eu.js":62944,"./fa":30496,"./fa.js":30496,"./fi":98137,"./fi.js":98137,"./fil":32872,"./fil.js":32872,"./fo":6545,"./fo.js":6545,"./fr":49090,"./fr-ca":13049,"./fr-ca.js":13049,"./fr-ch":12338,"./fr-ch.js":12338,"./fr.js":49090,"./fy":95088,"./fy.js":95088,"./ga":77812,"./ga.js":77812,"./gd":8374,"./gd.js":8374,"./gl":63649,"./gl.js":63649,"./gom-deva":52674,"./gom-deva.js":52674,"./gom-latn":44948,"./gom-latn.js":44948,"./gu":24033,"./gu.js":24033,"./he":10175,"./he.js":10175,"./hi":58055,"./hi.js":58055,"./hr":41678,"./hr.js":41678,"./hu":85111,"./hu.js":85111,"./hy-am":26530,"./hy-am.js":26530,"./id":19126,"./id.js":19126,"./is":11696,"./is.js":11696,"./it":98710,"./it-ch":38821,"./it-ch.js":38821,"./it.js":98710,"./ja":93974,"./ja.js":93974,"./jv":70648,"./jv.js":70648,"./ka":54731,"./ka.js":54731,"./kk":43501,"./kk.js":43501,"./km":84398,"./km.js":84398,"./kn":91825,"./kn.js":91825,"./ko":13729,"./ko.js":13729,"./ku":19670,"./ku.js":19670,"./ky":78797,"./ky.js":78797,"./lb":50627,"./lb.js":50627,"./lo":65859,"./lo.js":65859,"./lt":80355,"./lt.js":80355,"./lv":16594,"./lv.js":16594,"./me":45324,"./me.js":45324,"./mi":11689,"./mi.js":11689,"./mk":61308,"./mk.js":61308,"./ml":85241,"./ml.js":85241,"./mn":76320,"./mn.js":76320,"./mr":96771,"./mr.js":96771,"./ms":20503,"./ms-my":77748,"./ms-my.js":77748,"./ms.js":20503,"./mt":55534,"./mt.js":55534,"./my":62727,"./my.js":62727,"./nb":7550,"./nb.js":7550,"./ne":49899,"./ne.js":49899,"./nl":41228,"./nl-be":31225,"./nl-be.js":31225,"./nl.js":41228,"./nn":97130,"./nn.js":97130,"./oc-lnc":93130,"./oc-lnc.js":93130,"./pa-in":91282,"./pa-in.js":91282,"./pl":28190,"./pl.js":28190,"./pt":41549,"./pt-br":78135,"./pt-br.js":78135,"./pt.js":41549,"./ro":307,"./ro.js":307,"./ru":89272,"./ru.js":89272,"./sd":79248,"./sd.js":79248,"./se":74969,"./se.js":74969,"./si":65522,"./si.js":65522,"./sk":61581,"./sk.js":61581,"./sl":56428,"./sl.js":56428,"./sq":34611,"./sq.js":34611,"./sr":19821,"./sr-cyrl":20185,"./sr-cyrl.js":20185,"./sr.js":19821,"./ss":35029,"./ss.js":35029,"./sv":80939,"./sv.js":80939,"./sw":73107,"./sw.js":73107,"./ta":72304,"./ta.js":72304,"./te":72550,"./te.js":72550,"./tet":99717,"./tet.js":99717,"./tg":87669,"./tg.js":87669,"./th":94959,"./th.js":94959,"./tk":92661,"./tk.js":92661,"./tl-ph":52234,"./tl-ph.js":52234,"./tlh":94120,"./tlh.js":94120,"./tr":81111,"./tr.js":81111,"./tzl":53080,"./tzl.js":53080,"./tzm":88246,"./tzm-latn":25385,"./tzm-latn.js":25385,"./tzm.js":88246,"./ug-cn":48777,"./ug-cn.js":48777,"./uk":2014,"./uk.js":2014,"./ur":45953,"./ur.js":45953,"./uz":89716,"./uz-latn":87791,"./uz-latn.js":87791,"./uz.js":89716,"./vi":99816,"./vi.js":99816,"./x-pseudo":94450,"./x-pseudo.js":94450,"./yo":22556,"./yo.js":22556,"./zh-cn":7414,"./zh-cn.js":7414,"./zh-hk":50824,"./zh-hk.js":50824,"./zh-mo":88589,"./zh-mo.js":88589,"./zh-tw":63285,"./zh-tw.js":63285};function o(e){var t=r(e);return i(t)}function r(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=96616}}]);
//# sourceMappingURL=533.js.map