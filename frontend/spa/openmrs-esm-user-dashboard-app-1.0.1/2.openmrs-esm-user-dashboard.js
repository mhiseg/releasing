(window.webpackJsonp_openmrs_esm_user_dashboard=window.webpackJsonp_openmrs_esm_user_dashboard||[]).push([[2],{16:function(t,n,e){(t.exports=e(9)(!1)).push([t.i,".toast-messages {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.top-right {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n}\n\n.note-container .close-icon {\n  font-size: 1em !important;\n}\n\n.note-container .note {\n  margin: 0px !important;\n}\n",""])},164:function(t,n,e){"use strict";e.r(n);var r,o=e(1),a=e.n(o),i=e(2),c=e.n(i),u=e(14),s=e.n(u),l=e(4),d=e(3),f=e(7);!function(t){t[t.Loading=0]="Loading",t[t.Loaded=1]="Loaded",t[t.Failed=2]="Failed"}(r||(r={}));var b=r;function m(){return(m=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function p(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(e.push(i.value),!n||e.length!==n);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return y(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return y(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function h(t){var n=p(Object(o.useState)(void 0),2),e=n[0],r=n[1],a=p(Object(o.useState)(b.Loading),2),i=a[0],c=a[1],u=t.handles,s=void 0===u?{}:u,d=t.config.library,y=d.module,h=d.name,v=void 0===h?"default":h,g=t.config.size,O=t.config.properties,j=O.title,w=void 0===j?"Control":j,S=Object(f.useMediaQuery)({query:"(max-width: 600px)"});Object(o.useEffect)((function(){System.import(y).then((function(t){r(t),c(b.Loaded)})).catch((function(t){c(b.Failed)}))}),[]);return Object(l.a)("div",{className:"widget-container",style:{gridRow:"span ".concat(g&&g.rows?g.rows:1),gridColumn:"span ".concat(!S&&g&&g.columns?g.columns:1)}},function(){switch(i){case b.Loaded:return n=e[v],Object(l.a)(n,m({},t.userProps,O,s));case b.Loading:return Object(l.a)("span",{className:"loading"},"Loading...");default:return Object(l.a)("span",{className:"error"},"Unable to load ",w)}var n}())}function v(t){var n={margin:"0px 3px"};return Object(l.a)("div",{className:"breadcrumb"},Object(l.a)("a",{href:"/openmrs"},Object(l.a)("i",{className:"icon-home small"})),t.paths.map((function(t){return r=(e=t).name,a=e.href,Object(l.a)(o.Fragment,{key:r},Object(l.a)("i",{className:"icon-chevron-right link",style:n}),a?Object(l.a)("a",{href:a},r):Object(l.a)("span",null,r));var e,r,a})))}e(8);function g(t){var n=t.type,e=t.message,r=t.onClose,o=t.id;return sessionStorage.getItem(o)||sessionStorage.setItem(o,setTimeout((function(){r(),sessionStorage.removeItem(o)}),5e3).toString()),Object(l.a)("div",{className:"note-container"},Object(l.a)("div",{className:"note ".concat(n)},Object(l.a)("div",{className:"text"},Object(l.a)("i",{className:"icon-".concat({error:"remove",success:"ok",warning:"warning-sign"}[n]," medium")}),Object(l.a)("p",null,e)),Object(l.a)("div",{role:"button",tabIndex:0,className:"close-icon",onClick:r},Object(l.a)("i",{title:"Close",className:"icon-remove"}))))}function O(){return(O=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function j(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(e.push(i.value),!n||e.length!==n);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return e}(t,n)||S(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,n){if(t){if("string"==typeof t)return x(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?x(t,n):void 0}}function x(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var A=a.a.forwardRef((function(t,n){var e=w(Object(o.useState)([]),2),r=e[0],a=e[1];return Object(o.useImperativeHandle)(n,(function(){return{add:function(t){a((function(n){return[].concat(j(n),[t])}))}}})),Object(l.a)("div",{className:"top-right toast-messages"},r.map((function(t){return Object(l.a)(g,O({key:t.id},t,{onClose:function(){return n=t,void a((function(t){return t.filter((function(t){return t.id!==n.id}))}));var n}}))})))}));function I(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function N(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(e.push(i.value),!n||e.length!==n);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return e}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return L(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return L(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}e(18),e(20),e(12);var C;e.d(n,"bootstrap",(function(){return M})),e.d(n,"mount",(function(){return P})),e.d(n,"unmount",(function(){return E})),C=window.fetch,window.fetch=function(){var t=C.apply(this,arguments);return t.then((function(t){401!=t.status&&403!=t.status||window.location.assign("/openmrs/appui/header/logout.action?successUrl=openmrs")})),t};var k=s()({React:a.a,ReactDOM:c.a,rootComponent:function(t){var n,e=N(Object(o.useState)(void 0),2),r=e[0],i=e[1],c=N(Object(o.useState)(b.Loading),2),u=c[0],s=c[1],m=N(a.a.useState(null),2),p=m[0],y=m[1],g=N(a.a.useState(null),2),O=g[0],j=g[1],w=Object(f.useMediaQuery)({query:"(max-width: 600px)"}),S=a.a.createRef(),x={showMessage:function(t){if(S.current.add){var n=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?Object(arguments[n]):{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){I(t,n,e[n])}))}return t}({},t,{id:Math.floor(1e3+9e3*Math.random())});S.current.add(n)}}},L=function(t){return t&&t.authenticated};return Object(o.useEffect)((function(){var t=Object(d.getCurrentUser)({includeAuthStatus:!0}).subscribe((function(t){return y(t)}));return function(){return t.unsubscribe()}}),[]),Object(o.useEffect)((function(){if(L(p)){var t=window.location.pathname.split("/").pop(),n=Object(d.openmrsFetch)("".concat("/frontend/dashboard-configs","/").concat(t,".json")),e=Object(d.openmrsFetch)("".concat("/ws/rest/v1/provider?user=").concat(p.user.uuid));Promise.all([n,e]).then((function(t){var n=N(t,2),e=n[0],r=n[1];j(r.data.results[0]),i(e.data),s(b.Loaded)})).catch((function(t){s(b.Failed)}))}}),[p]),L(p)&&Object(l.a)("div",{className:"content dashboard-container"},Object(l.a)(v,{paths:r&&r.breadcrumbs?r.breadcrumbs:[{name:u==b.Loaded?r.title:"My Dashboard"}]}),Object(l.a)("div",{style:{gridTemplateColumns:(n=1,w||(n=u===b.Loaded&&r.layout&&r.layout.columns?r.layout.columns:2),String("1fr ").repeat(n).trimRight())},className:"dashboard"},function(){switch(u){case b.Loaded:return Object(l.a)(a.a.Fragment,null,r.contents.map((function(t){return Object(l.a)(h,{key:(r=t,"".concat(r.library.module,"-").concat(r.library.name?r.library.name:"")),config:t,userProps:(n=p,e=O,{id:n.user.uuid,locale:n.locale,provider:e.uuid}),handles:x});var n,e,r})));case b.Loading:return Object(l.a)("span",{className:"loading"},"Loading...");default:return t="Unable to load dashboard",Object(l.a)("span",{className:"error"},t)}var t}()),Object(l.a)(A,{ref:S}))}}),M=k.bootstrap,P=k.mount,E=k.unmount},18:function(t,n,e){var r=e(19);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(10)(r,o);r.locals&&(t.exports=r.locals)},19:function(t,n,e){(t.exports=e(9)(!1)).push([t.i,".dashboard {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-auto-rows: 50%;\n  grid-gap: 25px;\n  height: 95%;\n}\n\n.dashboard-container {\n  bottom: 50px;\n}\n\n.error {\n  color: red;\n}\n\n.loading {\n  font-weight: bold;\n}\n\n.widget-container {\n  background: #eee;\n  text-align: center;\n  display: flex;\n  flex-flow: column;\n  position: relative;\n}\n",""])},8:function(t,n,e){var r=e(16);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(10)(r,o);r.locals&&(t.exports=r.locals)}}]);
//# sourceMappingURL=2.openmrs-esm-user-dashboard.js.map