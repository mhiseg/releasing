(self.webpackChunkopenmrs_ohri_app=self.webpackChunkopenmrs_ohri_app||[]).push([[6428],{59670:(e,n,t)=>{"use strict";t.d(n,{AN:()=>d,Aq:()=>E,B1:()=>O,Ig:()=>m,JH:()=>g,Jf:()=>v,Lq:()=>l,V5:()=>p,Xm:()=>x,am:()=>h,k$:()=>f,kT:()=>y,q3:()=>c,sy:()=>w,ue:()=>_,zj:()=>b});var o=t(91208),i=t(90421),r=t.n(i),a=t(9588);const s="/ws/rest/v1/";function _(e){return(0,o.openmrsFetch)(`/ws/fhir2/R4/Encounter?patient=${e}&_sort=-date&_count=1`)}function l(e=1,n=10){return(0,o.openmrsFetch)(`/ws/fhir2/R4/Patient?_getpagesoffset=${e}&_count=${n}`)}function d(){let e=r()().format("YYYY-MM-DD");return(0,o.openmrsFetch)(`/ws/fhir2/R4/Encounter?date=${e}`).then((({data:e})=>e.entry?.length?u(e):[]))}function p(e,n,t){let i=r()().format("YYYY-MM-DD"),a=r()().subtract(t,"days").format("YYYY-MM-DD");return(0,o.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${e}${n?`&value-concept=${n}`:""}${t?`&_lastUpdated=ge${a}&_lastUpdated=le${i}`:""}`).then((({data:e})=>e.entry?.length?u(e):[]))}function u(e){let n=e.entry.map((e=>e.resource.subject.reference));return n=new Set([...n]),n=Array.from(n),Promise.all(n.map((e=>(0,o.openmrsFetch)("/ws/fhir2/R4/"+e))))}async function c(e,n){const{data:t}=await(0,o.openmrsFetch)(`/ws/rest/v1/cohortm/cohort/${e}${n?`?v=${n}`:""}`);return t.cohortMembers=t.cohortMembers.filter((e=>!e.voided)),t}async function m(e,n){const t=n?n.join("&"):"",i=t?`reportingrest/cohort/${e}?${t}`:`reportingrest/cohort/${e}`,{data:r}=await(0,o.openmrsFetch)(s+i);return r}async function h(e,n){const t=n?n.join("&"):"",i=t?`reportingrest/cohort/${e}?${t}`:`reportingrest/cohort/${e}`,{data:r}=await(0,o.openmrsFetch)(s+i);return Promise.all(r.members.map((e=>(0,o.openmrsFetch)(`/ws/rest/v1/patient/${e.uuid}?v=full`))))}async function f(e){const{data:{results:n,error:t}}=await(0,o.openmrsFetch)("/ws/rest/v1/cohortm/cohort?v=custom:(uuid,name,voided)"+(e?`&cohortType=${e}`:""));if(t)throw t;return n.filter((e=>!e.voided))}function g(e,n){return(0,o.openmrsFetch)("/ws/rest/v1/cohortm/cohortmember",{method:"POST",headers:{"Content-Type":"application/json"},body:{patient:e,cohort:n,startDate:new Date}})}function b(e){return(0,o.openmrsFetch)(`/ws/rest/v1/cohortm/cohortmember/${e}`,{method:"DELETE"})}async function v(e){const{data:{results:n,error:t}}=await(0,o.openmrsFetch)(`/ws/rest/v1/cohortm/cohortmember?patient=${e}&v=full`);if(t)throw t;return n.filter((e=>!e.voided))}function y(e){return(0,o.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${a.Ln}&value-concept=${a.$l}&patient=${e}&_sort=-date&_count=1`).then((({data:e})=>e.entry?.length?e.entry[0].resource.valueCodeableConcept.coding[0].display:""))}function x(e){return(0,o.openmrsFetch)(`/ws/fhir2/R4/Observation?code=${a.Ws}&value-concept=${a.Ws}&patient=${e}&_sort=-date&_count=1`).then((({data:e})=>e.entry?.length?e.entry[0].resource.valueCodeableConcept.coding[0].display:""))}function w(e,n){const t=`encounterType=${n}&patient=${e}`;return(0,o.openmrsFetch)(`/ws/rest/v1/encounter?${t}&v=${a.Ib}`).then((({data:e})=>e.results.length?e.results[e.results.length-1]:null))}function E(){return(0,o.openmrsFetch)(`/ws/rest/v1/reportingrest/cohort/${a.pj}`).then((({data:e})=>{if(e.members?.length){let n=e.members.map((e=>e.uuid));return n=new Set([...n]),n=Array.from(n),Promise.all(n.map((e=>(0,o.openmrsFetch)("/ws/fhir2/R4//Person/"+e))))}return[]}))}function O(e){return(0,o.openmrsFetch)(`/ws/rest/v1/concept/${e}/name?limit=1`).then((({data:e})=>{if(e.results.length)return e.results[e.results.length-1].display}))}},68544:(e,n,t)=>{"use strict";t.d(n,{Z:()=>w});var o=t(50576),i=t.n(o),r=t(28745),a=t(39743),s=t.n(a),_=t(3157),l=t.n(_),d=t(53439),p=t.n(d),u=t(79201),c=t.n(u),m=t(71573),h=t.n(m),f=t(35914),g=t.n(f),b=t(28112),v=t.n(b),y={};y.styleTagTransform=g(),y.setAttributes=c(),y.insert=p().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=h(),s()(v(),y);const x=v()&&v().locals?v().locals:void 0,w=()=>i().createElement("div",{className:x.centerLoadingSVG},i().createElement(r.Z,{description:"Active loading indicator",withOverlay:!1,small:!0}))},78131:(e,n,t)=>{"use strict";t.d(n,{p:()=>w});var o=t(91208),i=t(50576),r=t.n(i),a=t(39743),s=t.n(a),_=t(3157),l=t.n(_),d=t(53439),p=t.n(d),u=t(79201),c=t.n(u),m=t(71573),h=t.n(m),f=t(35914),g=t.n(f),b=t(53087),v=t.n(b),y={};y.styleTagTransform=g(),y.setAttributes=c(),y.insert=p().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=h(),s()(v(),y);const x=v()&&v().locals?v().locals:void 0,w=({patient:e,hideActionsOverflow:n})=>r().createElement("div",{className:x.patientBannerContainer},r().createElement(o.ExtensionSlot,{extensionSlotName:"patient-header-slot",state:{patient:e,patientUuid:e.id,hideActionsOverflow:n}}))},75933:(e,n,t)=>{"use strict";t.d(n,{Mf:()=>i,ks:()=>o});const o="cf82933b-3f3f-45e7-a5ab-5d31aaee3da3",i="488b58ff-64f5-4f8a-8979-fa79940b1594"},46428:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>cn});var o=t(50576),i=t.n(o),r=t(39743),a=t.n(r),s=t(3157),_=t.n(s),l=t(53439),d=t.n(l),p=t(79201),u=t.n(p),c=t(71573),m=t.n(c),h=t(35914),f=t.n(h),g=t(95303),b=t.n(g),v={};v.styleTagTransform=f(),v.setAttributes=u(),v.insert=d().bind(null,"head"),v.domAPI=_(),v.insertStyleElement=m(),a()(b(),v);const y=b()&&b().locals?b().locals:void 0;var x=t(88344),w=t(80348),E=t(91208),O=t(98261),S=t(68544),C=t(680),F=t.n(C),H={};H.styleTagTransform=f(),H.setAttributes=u(),H.insert=d().bind(null,"head"),H.domAPI=_(),H.insertStyleElement=m(),a()(F(),H);const T=F()&&F().locals?F().locals:void 0;function L(e){document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}var M=t(65184),q=t(64471),k=t(88526);const I=function({scrollAblePages:e,selectedPage:n,mode:t,onCancel:r,handleClose:a,values:s,setValues:_,allowUnspecifiedAll:l,defaultPage:d}){const[p,u]=(0,o.useState)(n);(0,o.useEffect)((()=>{d&&[...e].find((({label:e,isHidden:n})=>e===d&&!n))&&L(c(d))}),[d]);const c=e=>e.replace(/\s/g,""),m=(0,o.useMemo)((()=>Object.keys(s).filter((e=>e.endsWith("-unspecified"))).map((e=>e.split("-unspecified")[0])).filter((e=>(0,k.xb)(s[e]))).map((e=>`${e}-unspecified`))),[s]),h=(0,o.useCallback)((e=>{e?m.forEach((e=>{s[e]=!0})):m.forEach((e=>{s[e]=!1})),_(s)}),[m]);return i().createElement("div",{className:T.sidebar},[...e].map(((e,t)=>!e.isHidden&&i().createElement("div",{"aria-hidden":"true",className:c(e.label)===n?T.sidebarSectionActive:T.sidebarSection,key:t,onClick:()=>(e=>{const n=e.replace(/\s/g,"");u(e),L(n)})(e.label)},i().createElement("div",{className:T.sidebarSectionLink},e.label)))),i().createElement("hr",{className:T.sideBarHorizontalLine}),i().createElement("div",{className:T.sidenavActions},l&&i().createElement("div",{style:{marginBottom:".6rem"}},i().createElement(M.Z,{labelText:"",id:"auto-unspecifier",labelA:"Unspecify All",labelB:"Revert",onToggle:h})),"view"!=t&&i().createElement(q.Z,{style:{marginBottom:"0.625rem",width:"11rem"},type:"submit"},"Save"),i().createElement(q.Z,{style:{width:"11rem"},kind:"tertiary",onClick:()=>{r&&r(),a&&a()}},"view"==t?"Close":"Cancel")))};var D=t(9588),V=t(75933);const R=i().createContext(void 0);var A=t(6452);function P(e,n){return(0,E.openmrsObservableFetch)(`/ws/rest/v1/concept/${e}?v=${n}`).pipe((0,A.U)((e=>e.data)))}var N=t(46072),$=t(76313),z=t(14607),B=t.n(z),Z={};Z.styleTagTransform=f(),Z.setAttributes=u(),Z.insert=d().bind(null,"head"),Z.domAPI=_(),Z.insertStyleElement=m(),a()(B(),Z);const U=B()&&B().locals?B().locals:void 0;var j=t(69116);const W=({question:e})=>{const[n,t]=(0,x.U$)(`${e.id}-unspecified`),{setFieldValue:r}=i().useContext(R),[a,s]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(n.value){s(!0),e.submission={unspecified:!0,errors:[]};let n=null;switch(e.questionOptions.rendering){case"date":n="";break;case"checkbox":n=[]}r(e.id,n),e.value=null}else a&&!e.value&&(e.submission={unspecified:!1,errors:k.Ls.validate(e,null)})}),[n.value]),(0,o.useEffect)((()=>{e.value&&r(`${e.id}-unspecified`,!1)}),[e.value]);const _=(0,o.useCallback)((n=>{r(`${e.id}-unspecified`,n)}),[]);return!e.isHidden&&!(0,j.o)(e.readonly)&&i().createElement("div",{className:U.unspecified},i().createElement($.Z,{id:`${e.id}-unspcified`,labelText:"Unspecified",value:"Unspecified",onChange:_,checked:n.value,disabled:e.disabled}))};var Y=t(86439),K=t.n(Y),G={};G.styleTagTransform=f(),G.setAttributes=u(),G.insert=d().bind(null,"head"),G.domAPI=_(),G.insertStyleElement=m(),a()(K(),G);const J=K()&&K().locals?K().locals:void 0,Q=e=>"obs"!=e.type||e.questionOptions.concept?Qe(e.questionOptions.rendering):(e.disabled=!0,Qe("text")),X=e=>(0,j.o)(e.unspecified)&&"toggle"!=e.questionOptions.rendering&&"encounter-location"!=e.questionOptions.rendering,ee=({fields:e,onFieldChange:n,sectionTitle:t,showTitle:o})=>i().createElement("div",{className:J.sectionContainer},e.map(((e,t)=>{const o=Q(e);if(o){const r=i().createElement(o,{question:e,onChange:n,key:t,handler:Xe(e.type)});return X(e)&&"group"!=e.questionOptions.rendering?i().createElement("div",{className:J.questionOverrides},r,i().createElement(W,{question:e})):i().createElement("div",{className:J.questionOverrides},r)}}))),ne=({question:e,onChange:n,deleteControl:t})=>{const o=e.questions.filter((e=>!e.isHidden)).map(((e,t)=>{const o=Q(e);if(o){const r=i().createElement(o,{question:e,onChange:n,key:t,handler:Xe(e.type)});return i().createElement(N.sg,{className:U.obsGroupColumn},X(e)?i().createElement(i().Fragment,null,r,i().createElement(W,{question:e})):r)}}));return o&&o.push(t),i().createElement(N.X2,null,o)};var te=t(23776),oe=t(17283),ie=t(22697),re=t(59670),ae=t(90421),se=t.n(ae);function _e(e,n,t){const o=n.questions.map((e=>e.id));t.filter((e=>o.includes(e.id))).forEach((n=>{n.isParentHidden=e}))}function le(e,n,t){return"toggle"==e.questionOptions.rendering?e.questionOptions.defaultValue==V.ks:((e,n)=>["radio","checkbox","select","content-switcher"].includes(e.questionOptions.rendering)&&!e.questionOptions.answers?.find((e=>e.concept==n))?[{errCode:"invalid.defaultValue",errMessage:"Value not found in coded answers list"}]:"date"!=e.questionOptions.rendering||se()(n,se().ISO_8601,!0).isValid()?"number"==e.questionOptions.rendering&&isNaN(n)?[{errCode:"invalid.defaultValue",errMessage:`Invalid numerical  value: '${n}'`}]:[]:[{errCode:"invalid.defaultValue",errMessage:`Invalid date value: '${n}'`}])(e,e.questionOptions.defaultValue).length?void 0:(t.handleFieldSubmission(e,e.questionOptions.defaultValue,n),e.questionOptions.defaultValue)}function de(e){return(0,re.B1)(e).then((n=>`Concept Name: ${n} \n UUID: ${e}`))}function pe(e,n,t){return"automatic"==e?"maximized"==t&&"desktop"==n:"single-line"==e}var ue=t(88679);const ce=({value:e,tooltipText:n})=>i().createElement("div",{className:U.ohriLabel},i().createElement(ue.Z,{direction:"bottom",tabIndex:0,tooltipText:n},i().createElement("span",{className:"bx--label",style:{fontWeight:"bolder"}},e))),me=()=>i().createElement("div",null,i().createElement("span",{style:{fontSize:".875rem",color:"#c6c6c6"}},"(Blank)")),he=({value:e})=>Array.isArray(e)?i().createElement(fe,{valueArray:e}):i().createElement("div",null,i().createElement("span",{style:{fontSize:".875rem"}},e)),fe=({valueArray:e})=>i().createElement("ul",null,e.map((e=>i().createElement("li",{style:{fontSize:".875rem",marginBottom:".4rem"}},e))));var ge=t(1445),be=t(24224),ve=t(66132),ye=t.n(ve),xe={};xe.styleTagTransform=f(),xe.setAttributes=u(),xe.insert=d().bind(null,"head"),xe.domAPI=_(),xe.insertStyleElement=m(),a()(ye(),xe);const we=ye()&&ye().locals?ye().locals:void 0,Ee=({label:e,conceptName:n,value:t,isInline:o})=>i().createElement("div",{className:we.readOnlyStyle},o&&i().createElement("div",{className:U.formField},i().createElement(ge.Z,null,i().createElement(be.Z,{lg:5,md:5},i().createElement(ce,{value:e,tooltipText:n})),i().createElement(be.Z,{className:we.readOnlyValue},(0,k.xb)(t)?i().createElement(me,null):i().createElement(he,{value:t})))),!o&&i().createElement("div",{className:U.formField},i().createElement(ce,{value:e,tooltipText:n}),i().createElement("div",{className:we.readOnlyValue},t?i().createElement(he,{value:t}):i().createElement(me,null))));var Oe=t(50979),Se=t(81382);var Ce=t(78091),Fe=t(28460),He=t(81658),Te=t(48006);function Le(){return Le=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Le.apply(this,arguments)}var Me=t(81273),qe=t(18137);var ke=t(57453);function Ie(){return Ie=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ie.apply(this,arguments)}var De=t(77961);function Ve(){return Ve=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ve.apply(this,arguments)}var Re=t(34740),Ae=t(19082),Pe=t(13974),Ne=t(14469),$e=t(27928);const ze={handleFieldSubmission:(e,n,t)=>{if("checkbox"==e.questionOptions.rendering)return Ze(e,n,t);if("toggle"==e.questionOptions.rendering)return Be(n,t,e);if(e.value)"edit"!=t.sessionMode||n?n?("date"==e.questionOptions.rendering?e.value.value=se()(n).format("YYYY-MM-DD HH:mm"):e.value.value=n,e.value.voided=!1):e.value=void 0:e.value.voided=!0;else{if("date"==e.questionOptions.rendering)return e.value=Be(se()(n).format("YYYY-MM-DD HH:mm"),t,e),e.value;e.value=Be(n,t,e)}return e.value},getInitialValue:(e,n,t)=>{let o=e.obs.find((e=>e.concept.uuid==n.questionOptions.concept));const i=n.questionOptions.rendering;let r=null,a=null;return o&&n.groupId?"":(!o&&n.groupId&&(r=t.find((e=>e.id==n.groupId)),a=e.obs.find((e=>e.concept.uuid==r.questionOptions.concept)),a&&(r.value=a,o=a.groupMembers?.find((e=>e.concept.uuid==n.questionOptions.concept)))),o?(n.value=JSON.parse(JSON.stringify(o)),"radio"!=i&&"content-switcher"!=i||P(n.questionOptions.concept,"custom:(uuid,display,datatype:(uuid,display,name))").subscribe((e=>{"Boolean"==e.datatype.name&&(n.value.value=o.value.uuid)})),"string"==typeof o.value||"number"==typeof o.value?"date"==n.questionOptions.rendering?(n.value.value=se()(n.value.value).format("YYYY-MM-DD HH:mm"),se()(o.value).toDate()):o.value:"checkbox"==n.questionOptions.rendering?(n.value=e.obs.filter((e=>e.concept.uuid==n.questionOptions.concept)),!n.value.length&&n.groupId&&(n.value=a.groupMembers.filter((e=>e.concept.uuid==n.questionOptions.concept))),n.value.map((e=>e.value.uuid))):"toggle"==n.questionOptions.rendering?(n.value.value=o.value.uuid,o.value==V.ks):"fixed-value"==i?n.fixedValue:o.value?.uuid):"")},getDisplayValue:(e,n)=>{const t=e.questionOptions.rendering;if(!e.value)return null;if("checkbox"==e.questionOptions.rendering)return n.map((n=>e.questionOptions.answers.find((e=>e.concept==n))?.label));if("content-switcher"==t||"select"==t||"toggle"==t){const n="object"==typeof e.value.value?e.value.value.uuid:e.value.value;return e.questionOptions.answers.find((e=>e.concept==n))?.label}return"radio"==t?e.questionOptions.answers.find((e=>e.concept==n))?.label:n}},Be=(e,n,t)=>({person:n.patient.id,obsDatetime:n.date,concept:t.questionOptions.concept,location:n.location,order:null,groupMembers:[],voided:!1,value:e}),Ze=(e,n,t)=>(e.value||(e.value=[]),n.forEach((n=>{const o=e.value.find((e=>"string"==typeof e.value?e.value==n:e.value.uuid==n));o&&o.voided?o.voided=!1:o||e.value.push(Be(n,t,e))})),e.questionOptions.answers.filter((e=>!n.some((n=>n==e.concept)))).forEach((n=>{const o=e.value.filter((e=>"string"==typeof e.value?e.value==n.concept:e.value.uuid==n.concept));o.length&&o.forEach((o=>{"edit"==t.sessionMode&&o.uuid?o.voided=!0:e.value=e.value.filter((e=>e.value!==n.concept))}))})),e.value);var Ue=t(43809);const je={validate:(e,n,t)=>{const o=new Date,i=n?[]:k.Ls.validate(e,n);return i.length?i:n&&!(0,j.o)(t?.allowFutureDates)&&n.getTime()>o.getTime()?[{errCode:"value.invalid",errMessage:"Future dates not allowed"}]:[]}};var We=t(95619);const Ye={validate:function(e,n,t){return t.expressionContext.myValue=n,t.failsWhenExpression&&(0,We.j)(t.failsWhenExpression,{value:e,type:"field"},t.fields,{...t.values,[e.id]:n},t.expressionContext)?[{errCode:"value.invalid",errMessage:t.message||"Invalid value"}]:[]}},Ke=[{id:"OHRIText",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=(0,o.useState)(),[c,m]=(0,o.useState)([]),[h,f]=(0,o.useState)("Loading..."),g=(0,o.useMemo)((()=>c[0]?.errCode==k.Tv),[c]);(0,o.useEffect)((()=>{e.submission?.errors&&m(e.submission?.errors)}),[e.submission]),r.onBlur=()=>{r.value&&e.unspecified&&s(`${e.id}-unspecified`,!1),p!==r.value&&(n(e.id,r.value,m),e.value=t.handleFieldSubmission(e,r.value,_))},(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{f(e)}))}),[h]);const b=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]);return"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:r.value,conceptName:h,isInline:b})):!e.isHidden&&i().createElement("div",{className:U.formField},i().createElement("div",{className:g?`${U.textInputOverrides} ${U.errorLabel}`:U.textInputOverrides},i().createElement(De.Z,Ve({},r,{id:e.id,labelText:e.label,name:e.id,value:r.value||"",onFocus:()=>u(r.value),disabled:e.disabled,invalid:!g&&c.length>0,invalidText:c.length&&c[0].errMessage}))))},type:"text"},{id:"OHRIRadio",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=(0,o.useState)([]),[c,m]=(0,o.useState)("Loading..."),h=(0,o.useMemo)((()=>p[0]?.errCode==k.Tv),[p]);(0,o.useEffect)((()=>{e.submission?.errors&&u(e.submission?.errors)}),[e.submission]),(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{m(e)}))}),[c]);const f=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]);return"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:r.value?t.getDisplayValue(e,r.value):r.value,conceptName:c,isInline:f})):!e.isHidden&&i().createElement(te.Z,{style:{paddingBottom:"1rem"},legendText:e.label,className:h&&U.errorLegend,disabled:e.disabled,invalid:!h&&p.length>0},i().createElement(Me.Z,{defaultSelected:"default-selected",name:e.id,valueSelected:r.value,onChange:o=>{s(e.id,o),n(e.id,o,u),e.value=t.handleFieldSubmission(e,o,_)},orientation:"vertical"},e.questionOptions.answers.map(((n,t)=>i().createElement(qe.Z,{id:`${e.id}-${n.label}`,labelText:n.label,value:n.concept,key:t})))),!h&&p?.length>0&&i().createElement("div",{className:U.errorLabel},i().createElement("div",{className:"bx--form-requirement"},p[0].errMessage)))},type:"radio"},{id:"OHRIDate",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=(0,o.useState)([]),[c,m]=(0,o.useState)("Loading..."),h=(0,o.useMemo)((()=>p[0]?.errCode==k.Tv),[p]);(0,o.useEffect)((()=>{e.submission?.errors&&u(e.submission?.errors)}),[e.submission]);const f=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]),{placeHolder:g,carbonDateformat:b}=(0,o.useMemo)((()=>{const e=new Intl.DateTimeFormat(window.navigator.language).formatToParts(new Date);return{placeHolder:e.map((e=>{switch(e.type){case"day":return"dd";case"month":return"mm";case"year":return"yyyy";default:return e.value}})).join(""),carbonDateformat:e.map((e=>{switch(e.type){case"day":return"d";case"month":return"m";case"year":return"Y";default:return e.value}})).join("")}}),[]);return(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{m(e)}))}),[c]),"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement(Ee,{label:e.label,value:r.value instanceof Date?r.value.toLocaleDateString(window.navigator.language):r.value,conceptName:c,isInline:f}):!e.isHidden&&i().createElement("div",{className:U.formField},i().createElement(Oe.Z,{datePickerType:"single",onChange:([o])=>{const i=o instanceof Date?new Date(o.getTime()-6e4*o.getTimezoneOffset()):o;s(e.id,i),n(e.id,i,u),e.value=t.handleFieldSubmission(e,i,_)},className:`${U.datePickerOverrides} ${h?U.errorLabel:""} ${e.disabled||(0,j.o)(e.readonly)?U.disabledLabelOverrides:""}`,dateFormat:b},i().createElement(Se.Z,{id:e.id,placeholder:g,labelText:e.label,value:r.value instanceof Date?r.value.toLocaleDateString(window.navigator.language):r.value,disabled:e.disabled,invalid:!h&&p.length>0,invalidText:p[0]?.errMessage})))},type:"date"},{id:"OHRINumber",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=(0,o.useState)(),[c,m]=(0,o.useState)("Loading..."),[h,f]=(0,o.useState)([]),g=(0,o.useMemo)((()=>h[0]?.errCode==k.Tv),[h]);(0,o.useEffect)((()=>{e.submission?.errors&&f(e.submission?.errors)}),[e.submission]),r.onBlur=()=>{r.value&&e.unspecified&&s(`${e.id}-unspecified`,!1),p!==r.value&&(n(e.id,r.value,f),e.value=t.handleFieldSubmission(e,r.value,_))},(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{m(e)}))}),[c]);const b=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]);return"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:r.value?t.getDisplayValue(e,r.value):r.value,conceptName:c,isInline:b})):!e.isHidden&&i().createElement("div",{className:U.numberInputWrapper},i().createElement(Te.ZP,Le({},r,{id:e.id,invalid:!g&&h.length>0,invalidText:h[0]?.errMessage,label:e.label,max:e.questionOptions.max||void 0,min:e.questionOptions.min||void 0,name:e.id,value:r.value||"",onFocus:()=>u(r.value),allowEmpty:!0,size:"xl",disabled:e.disabled,className:g?U.errorLabel:""})))},type:"number"},{id:"OHRIMultiSelect",component:({question:e,onChange:n,handler:t})=>{const{t:r}=(0,O.useTranslation)(),[a,s]=(0,x.U$)(e.id),{setFieldValue:_,encounterContext:l,layoutType:d,workspaceLayout:p}=i().useContext(R),[u,c]=(0,o.useState)([]),[m,h]=(0,o.useState)(0),[f,g]=(0,o.useState)(!1),[b,v]=(0,o.useState)("Loading..."),y=(0,o.useMemo)((()=>u[0]?.errCode==k.Tv),[u]);(0,o.useEffect)((()=>{(a.value&&0==a.value.length||!f&&e.value)&&h(m+1)}),[a.value]),(0,o.useEffect)((()=>{e.submission?.errors&&c(e.submission?.errors)}),[e.submission]);const w=e.questionOptions.answers.map(((n,t)=>({id:`${e.id}-${n.concept}`,concept:n.concept,label:n.label,key:t}))),E=[];w.forEach((e=>{a.value?.includes(e.concept)&&E.push(e)})),(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{v(e)}))}),[b]);const S=(0,o.useMemo)((()=>!("view"!=l.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,d,p)),[l.sessionMode,e.readonly,e.inlineRendering,d,p]);return"view"==l.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:a.value?t.getDisplayValue(e,a.value):a.value,conceptName:b,isInline:S})):!e.isHidden&&i().createElement(i().Fragment,null,i().createElement("div",{className:y?`${U.multiselectOverride} ${U.errorLabel}`:`${U.multiselectOverride}`},i().createElement(Fe.Z.Filterable,{placeholder:r("filterItemsInMultiselect","Search..."),onChange:({selectedItems:o})=>{g(!0);const i=o.map((e=>e.concept));_(e.id,i),n(e.id,i,c),e.value=t.handleFieldSubmission(e,i,l)},id:e.label,items:w,initialSelectedItems:E,label:"",titleText:e.label,key:m,itemToString:e=>e?e.label:" ",disabled:e.disabled,invalid:!y&&u.length>0,invalidText:u[0]?.errMessage})),i().createElement("div",{className:U.formField,style:{marginTop:"0.125rem"}},a.value?.length?i().createElement(He.Z,{style:{marginLeft:"1rem"}},t.getDisplayValue(e,a.value)?.map((e=>e+", "))):i().createElement(me,null)))},type:"checkbox"},{id:"OHRIContentSwitcher",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=(0,o.useState)([]),[c,m]=(0,o.useState)("Loading...");(0,o.useEffect)((()=>{e.submission?.errors&&u(e.submission?.errors)}),[e.submission]);const h=(0,o.useMemo)((()=>e.questionOptions.answers.findIndex((e=>e.concept==r.value))),[r.value]);(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{m(e)}))}),[c]);const f=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]);return"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:r.value?t.getDisplayValue(e,r.value):r.value,conceptName:c,isInline:f})):!e.isHidden&&i().createElement("div",{className:U.textContainer},i().createElement(te.Z,{legendText:e.label,className:p.length?U.errorLegend:""},i().createElement(oe.Z,{onChange:o=>{s(e.id,o?.name),n(e.id,o?.name,u),e.value=t.handleFieldSubmission(e,o?.name,_)},selectedIndex:h,className:U.selectedOption},e.questionOptions.answers.map(((n,t)=>i().createElement(ie.Z,{className:h===t?U.switchOverrides:U.switchOverridesNone,name:n.concept||n.value,text:n.label,key:t,disabled:e.disabled}))))))},type:"content-switcher"},{id:"OHRIEncounterLocationPicker",component:({question:e})=>{const[n,t]=(0,x.U$)(e.id),{setEncounterLocation:r,setFieldValue:a,encounterContext:s}=i().useContext(R),[_,l]=(0,o.useState)([]),[d,p]=(0,o.useState)("Loading...");return(0,o.useEffect)((()=>{var n;e.questionOptions.locationTag&&(n=e.questionOptions.locationTag.trim().split(" ").join("%20"),(0,E.openmrsObservableFetch)(`/ws/rest/v1/location?tag=${n}&v=custom:(uuid,display)`).pipe((0,A.U)((({data:e})=>e.results)))).subscribe((e=>l(e)),(e=>(0,E.createErrorHandler)()))}),[]),(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{p(e)}))}),[d]),"view"==s.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:n.value?n.value.display:n.value,conceptName:d,isInline:!0})):!e.isHidden&&i().createElement("div",{className:U.formInputField},i().createElement(Ce.Z,{id:e.id,titleText:e.label,label:"Choose location",items:_,itemToString:e=>e.display,selectedItem:n.value,onChange:({selectedItem:n})=>{a(e.id,n),r(n)},disabled:e.disabled}))},type:"encounter-location"},{id:"OHRIDropdown",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=i().useState([]),[c,m]=(0,o.useState)([]),[h,f]=(0,o.useState)("Loading..."),g=(0,o.useMemo)((()=>c[0]?.errCode==k.Tv),[c]);(0,o.useEffect)((()=>{e.submission?.errors&&m(e.submission?.errors)}),[e.submission]),(0,o.useEffect)((()=>{u(e.questionOptions.answers.map((e=>e.value||e.concept)))}),[e.questionOptions.answers]),(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{f(e)}))}),[h]);const b=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]);return"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement(Ee,{label:e.label,value:r.value?t.getDisplayValue(e,r.value):r.value,conceptName:h,isInline:b}):!e.isHidden&&i().createElement("div",{className:U.formInputField},i().createElement("div",{className:g?`${U.errorLabel} ${U.dropDownOverride}`:U.dropDownOverride},i().createElement(Ce.Z,{id:e.id,titleText:e.label,label:"Choose an option",items:p,itemToString:n=>e.questionOptions.answers.find((e=>e.value?e.value==n:e.concept==n))?.label,selectedItem:r.value,onChange:({selectedItem:o})=>{return i=o,s(e.id,i),n(e.id,i,m),void(e.value=t.handleFieldSubmission(e,i,_));var i},disabled:e.disabled,invalid:!g&&c.length>0,invalidText:c.length&&c[0].errMessage})))},type:"select"},{id:"OHRITextArea",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=(0,o.useState)(),[c,m]=(0,o.useState)([]),[h,f]=(0,o.useState)("Loading..."),g=(0,o.useMemo)((()=>c[0]?.errCode==k.Tv),[c]);(0,o.useEffect)((()=>{e.submission?.errors&&m(e.submission?.errors)}),[e.submission]),r.onBlur=()=>{r.value&&e.unspecified&&s(`${e.id}-unspecified`,!1),p!==r.value&&(n(e.id,r.value,m),e.value=t.handleFieldSubmission(e,r.value,_))},(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{f(e)}))}),[h]);const b=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]);return"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:r.value,conceptName:h,isInline:b})):!e.isHidden&&i().createElement("div",{className:U.formField},i().createElement("div",{className:g?`${U.textInputOverrides} ${U.errorLabel}`:U.textInputOverrides},i().createElement(ke.Z,Ie({},r,{id:e.id,labelText:e.label,name:e.id,value:r.value||"",onFocus:()=>u(r.value),rows:e.questionOptions.rows||4,disabled:e.disabled,invalid:!g&&c.length>0,invalidText:c.length&&c[0].errMessage}))))},type:"textarea"},{id:"OHRIToggle",component:({question:e,onChange:n,handler:t})=>{const[r,a]=(0,x.U$)(e.id),{setFieldValue:s,encounterContext:_,layoutType:l,workspaceLayout:d}=i().useContext(R),[p,u]=(0,o.useState)("Loading...");(0,o.useEffect)((()=>{e.value||"enter"!=_.sessionMode||(e.value=t.handleFieldSubmission(e,r.value??!1,_))}),[]),(0,o.useEffect)((()=>{de(e.questionOptions.concept).then((e=>{u(e)}))}),[p]);const c=(0,o.useMemo)((()=>!("view"!=_.sessionMode&&!(0,j.o)(e.readonly))&&pe(e.inlineRendering,l,d)),[_.sessionMode,e.readonly,e.inlineRendering,l,d]);return"view"==_.sessionMode||(0,j.o)(e.readonly)?i().createElement("div",{className:U.formField},i().createElement(Ee,{label:e.label,value:(0,k.xb)(r.value)?r.value:t.getDisplayValue(e,r.value),conceptName:p,isInline:c})):!e.isHidden&&i().createElement("div",{className:U.formField},i().createElement(M.Z,{labelText:e.label,id:e.id,labelA:e.questionOptions.toggleOptions.labelFalse,labelB:e.questionOptions.toggleOptions.labelTrue,onToggle:o=>{s(e.id,o),n(e.id,o,null),e.value=t.handleFieldSubmission(e,o,_)},toggled:!!r.value,disabled:e.disabled}))},type:"toggle"},{id:"OHRIObsGroup",component:ne,type:"group"},{id:"OHRIRepeat",component:({question:e,onChange:n})=>{const[t,r]=(0,o.useState)([e]),{fields:a,encounterContext:s,obsGroupsToVoid:_}=i().useContext(R),{values:l,setValues:d}=(0,x.u6)(),[p,u]=(0,o.useState)(0),c=(0,E.useLayoutType)(),m=(0,o.useMemo)((()=>"phone"==c||"tablet"==c?"50rem":"90rem"),[c]);(0,o.useEffect)((()=>{if(s.encounter&&!p){const n=e.value?.uuid,t=s.encounter.obs.filter((t=>t.concept.uuid===e.questionOptions.concept&&t.uuid!=n));let o=p;t.forEach((e=>{o+=1,h(o,e)})),u(o)}}),[l]),(0,o.useEffect)((()=>{t[0]=e,r([...t])}),[e]);const h=(n,o)=>{const i=n,s=(0,Pe.cloneDeep)(e);s.value=o,s.id=`${s.id}-${i}`,s.questions.forEach((e=>{e.id=`${e.id}-${i}`,e.groupId=s.id,e.value=null;let n=o?((e,n)=>{const t=e.questionOptions.rendering,o=n.groupMembers.filter((n=>n.concept.uuid==e.questionOptions.concept));return o.length?(e.value=o[0],"radio"!=t&&"content-switcher"!=t||P(e.questionOptions.concept,"custom:(uuid,display,datatype:(uuid,display,name))").subscribe((n=>{"Boolean"==n.datatype.name&&(e.value.value=o[0].value.uuid)})),"string"==typeof o[0].value||"number"==typeof o[0].value?"date"==e.questionOptions.rendering?se()(o[0].value).toDate():o[0].value:"checkbox"==e.questionOptions.rendering?(e.value=o,e.value.map((e=>e.value.uuid))):"toggle"==e.questionOptions.rendering?(e.value.value=o[0].value.uuid,o[0].value==V.ks):o[0].value?.uuid):""})(e,o):null;l[`${e.id}`]=n||("checkbox"==e.questionOptions.rendering?[]:""),a.push(e)})),d(l),a.push(s),t.push(s),r(t)},f=t.map(((e,o)=>{const s=0!==o?i().createElement(be.Z,{style:{paddingTop:"1.2rem",marginLeft:".5rem"}},i().createElement(Re.default,{renderIcon:Ne.Ib_,kind:"danger--tertiary",onClick:()=>(e=>{e.value&&e.value.uuid&&(e.value.voided=!0,delete e.value.value,_.push(e.value)),r(t.filter((n=>n.id!==e.id))),[e.id,...e.questions.map((e=>e.id))].forEach((e=>{const n=a.findIndex((n=>n.id===e));a.splice(n,1),delete l[e]}))})(e),hasIconOnly:!0})):null;return i().createElement(i().Fragment,null,i().createElement(Ae.default,{style:{margin:"0",marginBottom:"1rem",marginTop:"1rem",width:m}},i().createElement(ne,{question:e,onChange:n,handler:Xe("obsGroup")}),s))}));return f.push(i().createElement(Ae.default,null,i().createElement(be.Z,null,i().createElement(Re.default,{renderIcon:$e.aXP,kind:"ghost",onClick:()=>{const e=p+1;h(e,null),u(e)}},e.questionOptions.repeatOptions?.addText||"Add")))),!e.isHidden&&i().createElement("div",{style:{marginTop:"0.65rem",marginBottom:"2rem"}},i().createElement(te.Z,{legendText:e.label},f))},type:"repeating"},{id:"OHRIFixedValue",component:({question:e,handler:n})=>{const{encounterContext:t,isFieldInitializationComplete:r}=i().useContext(R);return(0,o.useEffect)((()=>{var o,i;e.value&&"string"==typeof e.value&&r?(delete e.value,n.handleFieldSubmission(e,e.fixedValue,t)):"object"!=typeof e.value||(o=e.fixedValue,"object"==typeof(i=e.value).value?i.value?.uuid==o:i.value==o)||n.handleFieldSubmission(e,e.fixedValue,t)}),[e.value,r]),i().createElement(i().Fragment,null)},type:"fixed-value"},{id:"OHRIMarkdown",component:({question:e})=>!e.isHidden&&i().createElement(Ue.D,{children:e.value.join("\n")}),type:"markdown"}],Ge=[{id:"ObsSubmissionHandler",component:ze,type:"obs"},{id:"ObsGroupHandler",component:ze,type:"obsGroup"},{id:"EncounterLocationSubmissionHandler",component:{handleFieldSubmission:(e,n,t)=>null,getInitialValue:(e,n)=>({display:e.location.name,uuid:e.location.uuid}),getDisplayValue:(e,n)=>n.display},type:"encounterLocation"}],Je=[{id:"OHRIBaseValidator",component:k.Ls},{id:"date",component:je},{id:"js_expression",component:Ye}],Qe=e=>Ke.find((n=>n.type==e))?.component;function Xe(e){return Ge.find((n=>n.type==e))?.component}function en(e){return Je.find((n=>n.id==e))?.component||Je[0].component}var nn=t(91970),tn=t.n(nn),on={};on.styleTagTransform=f(),on.setAttributes=u(),on.insert=d().bind(null,"head"),on.domAPI=_(),on.insertStyleElement=m(),a()(tn(),on);const rn=tn()&&tn().locals?tn().locals:void 0;var an=t(60779),sn=t(32983),_n=t(2108);const ln=function({page:e,onFieldChange:n,setSelectedPage:t,isCollapsed:o}){let r=e.label.replace(/\s/g,"");return i().createElement(an.h,{onEnter:()=>{t(r)},topOffset:"50%",bottomOffset:"60%"},i().createElement("div",{id:r,className:rn.pageContent},i().createElement("div",{style:{},className:rn.pageHeader},i().createElement("p",{className:rn.pageTitle},e.label)),i().createElement(sn.ZP,null,e.sections.map(((t,r)=>i().createElement(_n.Z,{title:t.label,open:o,className:rn.sectionContent},i().createElement("div",{className:rn.formSection,key:r},i().createElement(ee,{fields:t.questions,showTitle:e.sections.length>1,onFieldChange:n,sectionTitle:t.label,key:r}))))))))};function dn({effect:e}){return(0,o.useEffect)((()=>e?.()),[e]),null}const pn=({formJson:e,patient:n,encounterDate:t,provider:r,location:a,values:s,isCollapsed:_,sessionMode:l,scrollablePages:d,workspaceLayout:p,setScrollablePages:u,setFieldValue:c,setSelectedPage:m,handlers:h,allInitialValues:f,setAllInitialValues:g})=>{const[b,v]=(0,o.useState)([]),[y,x]=(0,o.useState)(null),[w,O]=(0,o.useState)(null),[S,C]=(0,o.useState)(e),[F,H]=(0,o.useState)([]),[T,L]=(0,o.useState)({}),[M,q]=(0,o.useState)(!1),I=(0,E.useLayoutType)(),A=(0,o.useCallback)((()=>(e.pages.forEach((e=>{e.isSubform||d.add(e)})),()=>{e.pages.forEach((e=>{e.isSubform||d.delete(e)}))})),[d,e]),P={patient:n,encounter:w,location:a,sessionMode:l||(S?.encounter?"edit":"enter"),date:t};(0,o.useEffect)((()=>{y||x(a)}),[a]),(0,o.useEffect)((()=>{const e=[],n={};let t=!1;if(S.pages.forEach((n=>n.sections.forEach((t=>{t.questions.forEach((o=>{var i,r,a,s;t.inlineRendering=(0,k.xb)(t.inlineRendering)?null:t.inlineRendering,n.inlineRendering=(0,k.xb)(n.inlineRendering)?null:n.inlineRendering,S.inlineRendering=(0,k.xb)(S.inlineRendering)?null:S.inlineRendering,o.inlineRendering=t.inlineRendering??n.inlineRendering??S.inlineRendering,i=o,r=t.readonly,a=n.readonly,s=S.readonly,(0,k.xb)(i.readonly)&&(i.readonly=!(0,k.xb)(r)||!(0,k.xb)(a)||s),"fixed-value"!=o.questionOptions.rendering||o.fixedValue||(o.fixedValue=o.value),e.push(o),"obsGroup"==o.type&&o.questions.forEach((n=>{n.groupId=o.id,e.push(n)}))}))})))),w)e.forEach((t=>{const o=Xe(t.type);let i=o?.getInitialValue(w,t,e);(0,k.xb)(i)&&!(0,k.xb)(t.questionOptions.defaultValue)&&(i=le(t,P,o)),n[t.id]=null==i?"":i,t.unspecified&&(n[`${t.id}-unspecified`]=!i)})),x(w.location),t=!0;else{const t={checkbox:[],toggle:!1,default:""};e.forEach((e=>{let o=null;(0,k.xb)(e.questionOptions.defaultValue)||(o=le(e,P,Xe(e.type))),(0,k.xb)(o)?n[e.id]=null!=t[e.questionOptions.rendering]?t[e.questionOptions.rendering]:t.default:n[e.id]=o,e.unspecified&&(n[`${e.id}-unspecified`]=!1)}))}v(e.map((t=>(t.hide?N({value:t,type:"field"},e,n):t.isHidden=!1,"string"==typeof t.readonly&&t.readonly?.split(" ")?.length>1&&(t.readonlyExpression=t.readonly,t.readonly=(0,We.j)(t.readonly,{value:t,type:"field"},e,n,{mode:l})),t)))),S.pages.forEach((t=>{t.hide?N({value:t,type:"page"},e,n):t.isHidden=!1})),C(S),L(n),g({...f,...n}),("enter"==l||t)&&q(!0)}),[w]),(0,o.useEffect)((()=>{let n;return e.encounter&&"string"==typeof e.encounter?n=(0,E.openmrsObservableFetch)(`/ws/rest/v1/encounter/${e.encounter}?v=${D.Ib}`).subscribe((({data:e})=>O(e))):"object"==typeof e.encounter&&O(e.encounter),()=>n?.unsubscribe()}),[e.encounter]);const N=(e,n,t)=>{const{value:o,type:i}=e,r=(0,We.j)(o.hide?.hideWhenExpression,e,n,t,{mode:l});e.value.isHidden=r,"page"==i&&o.sections.forEach((e=>{e.isParentHidden=r,_e(r,e,n)})),"section"==i&&_e(r,o,n)},$=(0,o.useCallback)(((e,n)=>{Array.isArray(n)?n.forEach((n=>{delete n.formFieldNamespace,delete n.formFieldPath,(0,k.xb)(n.groupMembers)?delete n.groupMembers:n.groupMembers.forEach((e=>{delete e.formFieldNamespace,delete e.formFieldPath,(0,k.xb)(e.groupMembers)&&delete e.groupMembers})),e.push(n)})):(delete n.formFieldNamespace,delete n.formFieldPath,(0,k.xb)(n.groupMembers)?delete n.groupMembers:n.groupMembers.forEach((e=>{delete e.formFieldNamespace,delete e.formFieldPath,(0,k.xb)(e.groupMembers)&&delete e.groupMembers})),e.push(n))}),[]),z=(0,o.useCallback)((e=>{let n=!1;return b.filter((e=>!(e.isParentHidden||e.disabled||e.isHidden||(0,j.o)(e.readonly)))).filter((e=>1!=e.submission?.unspecified)).forEach((t=>{const o=k.Ls.validate(t,e[t.id]);if(o.length)return t.submission={...t.submission,errors:o},void(n=!0)})),!n}),[b]),B=(e,n,t)=>{const o=b.find((n=>n.id==e)),i=Array.isArray(o.validators)?[{type:"OHRIBaseValidator"},...o.validators]:[{type:"OHRIBaseValidator"}];Array.isArray(o.validators);const r={expressionContext:{mode:l},values:{...s,[e]:n},fields:b};for(let e of i){const i=en(e.type)?.validate(o,n,{...r,...e})||[];if(t&&t(i),i.length)return}"toggle"==o.questionOptions.rendering&&(n=n?V.ks:V.Mf),o.fieldDependants&&o.fieldDependants.forEach((t=>{const o=b.find((e=>e.id==t));N({value:o,type:"field"},b,{...s,[e]:n}),o.readonlyExpression&&(o.readonly=(0,We.j)(o.readonlyExpression,{value:o,type:"field"},b,{...s,[e]:n},{mode:l}));let i=[...b];const r=i.findIndex((e=>e.id==t));i[r]=o,v(i)})),o.pageDependants&&o.pageDependants?.forEach((t=>{const o=S.pages.find((e=>e.label==t));N({value:o,type:"page"},b,{...s,[e]:n});let i=S;const r=i.pages.findIndex((e=>e.label==t));i[r]=o,C(i)}))};return h.set(S.name,{validate:z,submit:o=>{const i=[];b.filter((e=>e.value||"obsGroup"==e.type)).filter((e=>!(e.isParentHidden||e.isHidden||"obs"!=e.type&&"obsGroup"!=e.type))).filter((e=>!e.groupId)).forEach((e=>{if("obsGroup"==e.type){const o={person:n.id,obsDatetime:t,concept:e.questionOptions.concept,location:y,order:null,groupMembers:[],uuid:e?.value?.uuid,voided:!1};let r=!1;e.questions.forEach((e=>{e.value&&(r=!0,Array.isArray(e.value)?o.groupMembers.push(...e.value):o.groupMembers.push(e.value))})),r&&$(i,o)}else $(i,e.value)})),F.forEach((e=>$(i,e)));let a={};if(w?(Object.assign(a,w),a.location=y.uuid,-1!==a.encounterProviders.findIndex((e=>e.provider.uuid==r))||(a.encounterProviders=[...a.encounterProviders,{provider:r,encounterRole:"240b26f9-dd88-4172-823d-4a8bfeb7841f"}]),a.obs=i):a={patient:n.id,encounterDatetime:t,location:y.uuid,encounterType:e.encounterType,encounterProviders:[{provider:r,encounterRole:"240b26f9-dd88-4172-823d-4a8bfeb7841f"}],obs:i},a.obs?.length||a.orders?.length)return function(e,n,t){let o="/ws/rest/v1/encounter";return t&&(o+=`/${t}`),(0,E.openmrsFetch)(o,{headers:{"Content-Type":"application/json"},method:"POST",body:n,signal:e.signal})}(new AbortController,a,w?.uuid)}}),i().createElement(R.Provider,{value:{values:s,setFieldValue:c,setEncounterLocation:x,setObsGroupsToVoid:H,obsGroupsToVoid:F,fields:b,encounterContext:P,layoutType:I,workspaceLayout:p,isFieldInitializationComplete:M}},i().createElement(dn,{effect:A}),S.pages.map(((e,o)=>(0,j.o)(e.isHidden)?null:(0,j.o)(e.isSubform)&&e.subform?.form?"enter"==l||e.subform?.form.encounter?(e.subform.form.pages=e.subform.form.pages.filter((e=>!(0,j.o)(e.isSubform))),i().createElement(pn,{key:o,formJson:e.subform?.form,patient:n,encounterDate:t,provider:r,location:a,values:s,isCollapsed:_,sessionMode:l,scrollablePages:d,setAllInitialValues:g,allInitialValues:f,setScrollablePages:u,setFieldValue:c,setSelectedPage:m,handlers:h,workspaceLayout:p})):null:i().createElement(ln,{page:e,onFieldChange:B,setSelectedPage:m,isCollapsed:_}))))};var un=t(78131);const cn=({formJson:e,encounterUuid:n,mode:r,onSubmit:a,onCancel:s,handleClose:_,patientUUID:l})=>{const[d,p]=(0,o.useState)(null),[u,c]=(0,o.useState)(null),{patient:m}=(0,E.usePatient)(l),h=(0,E.useSessionUser)(),[f,g]=(0,o.useState)({}),b=new Date,[v,C]=(0,o.useState)(new Set),[F,H]=(0,o.useState)(""),[T,L]=(0,o.useState)(!0),{t:M}=(0,O.useTranslation)(),k=(0,o.useRef)(null),D=function(e){const[n,t]=(0,o.useState)("maximized"),i=(0,E.useLayoutType)();return(0,o.useEffect)((()=>{if(e?.current){const n=e.current.offsetWidth;t("desktop"==i&&n<1e3?"minimized":"maximized")}}),[e?.current,e?.current?.offsetWidth,i]),n}(k),V=new Map,R=(0,o.useMemo)((()=>{const t=JSON.parse(JSON.stringify(e));n&&!t.encounter&&(t.encounter=n);let o=t.pages.length;for(;o--;){const e=t.pages[o];(0,j.o)(e.isSubform)&&!(0,j.o)(e.isHidden)&&e.subform?.form?.encounterType==t.encounterType&&t.pages.splice(o,1,...e.subform.form.pages.filter((e=>!(0,j.o)(e.isSubform))))}return t}),[n]),A=(0,o.useMemo)((()=>r||(n?"edit":"enter")),[r]),P=(0,o.useMemo)((()=>"minimized"!=D&&v.size>0),[D,v.size]);return(0,o.useEffect)((()=>((0,E.getAsyncLifecycle)((()=>t.e(3915).then(t.bind(t,83915))),{featureName:"ohri-form-header-toggle",moduleName:"@openmrs/esm-ohri-app"}),()=>{(0,E.detach)("patient-chart-workspace-header-slot","ohri-form-header-toggle-ext")})),[]),(0,o.useEffect)((()=>{h&&(n||c(h.sessionLocation),p(h.currentProvider.uuid))}),[h]),i().createElement(x.J9,{enableReinitialize:!0,initialValues:f,validationSchema:w.Ry({}),onSubmit:(e,{setSubmitting:n})=>{(e=>{let n=!0;if(V.forEach((t=>{const o=t?.validate?.(e);o||(n=!1)})),n){const n=[...V].map((([n,t])=>t?.submit?.(e)));Promise.all(n).then((e=>{"edit"==r?(0,E.showToast)({description:M("updatedRecordDescription","The patient encounter was updated"),title:M("updatedRecord","Record updated"),kind:"success",critical:!0}):(0,E.showToast)({description:M("createdRecordDescription","A new encounter was created"),title:M("createdRecord","Record created"),kind:"success",critical:!0}),a?.()}))}})(e),n(!1)}},(n=>i().createElement(x.l0,{className:`bx--form no-padding ng-untouched ng-pristine ng-invalid ${y.ohriForm}`,ref:k},m?i().createElement("div",{className:y.ohriFormContainer},P&&i().createElement(I,{scrollAblePages:v,selectedPage:F,mode:r,onCancel:s,handleClose:_,values:n.values,setValues:n.setValues,allowUnspecifiedAll:e.allowUnspecifiedAll,defaultPage:e.defaultPage}),i().createElement("div",{className:y.formContent},"minimized"!=D&&i().createElement(un.p,{patient:m,hideActionsOverflow:!0}),R.markdown&&i().createElement("div",{className:y.markdownContainer},i().createElement(Ue.D,{children:R.markdown.join("\n")})),i().createElement("div",{className:`${y.formContentBody}\n                    ${"minimized"==D?`${y.minifiedFormContentBody}`:""}\n                  `},i().createElement(pn,{formJson:R,patient:m,encounterDate:b,provider:d,location:u,values:n.values,isCollapsed:T,sessionMode:A,scrollablePages:v,setAllInitialValues:g,allInitialValues:f,setScrollablePages:C,setFieldValue:n.setFieldValue,setSelectedPage:H,handlers:V,workspaceLayout:D})),"minimized"==D&&i().createElement("div",{className:y.minifiedButtons},i().createElement(q.Z,{kind:"secondary",onClick:()=>{s&&s(),_&&_()}},"view"==r?"Close":"Cancel"),"view"!=r&&i().createElement(q.Z,{type:"submit"},"Save")))):i().createElement(S.Z,null))))}},69116:(e,n,t)=>{"use strict";function o(e){return"boolean"==typeof e?e:"string"==typeof e?"true"==e:!!e}t.d(n,{o:()=>o})},95619:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>evaluateExpression});var moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(90421),moment__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(75933),_validators_ohri_form_validator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(88526);function evaluateExpression(expression,node,allFields,allFieldValues,context){const allFieldsKeys=allFields.map((e=>e.id)),parts=expression.trim().split(" "),{mode,myValue}=context;function isEmpty(e){return allFieldsKeys.includes(e)?(registerDependency(node,allFields.find((n=>n.id==e))),(0,_validators_ohri_form_validator__WEBPACK_IMPORTED_MODULE_1__.xb)(allFieldValues[e])):(0,_validators_ohri_form_validator__WEBPACK_IMPORTED_MODULE_1__.xb)(e)}function today(){return new Date}function includes(e,n){return!!allFieldsKeys.includes(e)&&(registerDependency(node,allFields.find((n=>n.id===e))),allFieldValues[e]?.includes(n))}function isDateBefore(e,n,t){let o=n;return"string"==typeof n&&(o=t?moment__WEBPACK_IMPORTED_MODULE_0___default()(n,t,!0).toDate():moment__WEBPACK_IMPORTED_MODULE_0___default()(n,"YYYY-MM-DD",!0).toDate()),e?.getTime()<o.getTime()}function useFieldValue(e){return allFieldsKeys.includes(e)?allFieldValues[e]:null}parts.forEach(((e,n)=>{if(n%2==0&&allFieldsKeys.includes(e)){const n=allFields.find((n=>n.id===e));registerDependency(node,n);let t=allFieldValues[e];"toggle"==n.questionOptions.rendering&&(t=t?_constants__WEBPACK_IMPORTED_MODULE_2__.ks:_constants__WEBPACK_IMPORTED_MODULE_2__.Mf),"string"==typeof t&&(t=`'${t}'`);const o=new RegExp(e,"g");expression=expression.replace(o,t)}}));try{return eval(expression)}catch(e){console.error(e)}return!1}function registerDependency(e,n){switch(e.type){case"page":n.pageDependants||(n.pageDependants=new Set),n.pageDependants.add(e.value.label);break;case"section":n.sectionDependants||(n.sectionDependants=new Set),n.sectionDependants.add(e.value.label);default:n.fieldDependants||(n.fieldDependants=new Set),n.fieldDependants.add(e.value.id)}}},88526:(e,n,t)=>{"use strict";t.d(n,{Ls:()=>r,Tv:()=>i,xb:()=>a});var o=t(69116);const i="field.required",r={validate:(e,n)=>e.submission?.unspecified?[]:((0,o.o)(e.required)||(0,o.o)(e.unspecified))&&a(n)?[{errCode:i,errMessage:"Field is mandatory"}]:[]};function a(e){return null==e||""===e||"string"==typeof e&&!e?.trim()||!(!Array.isArray(e)||e.length)}},28112:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,".openmrs-ohri__loading-component__centerLoadingSVG___Vme8M{display:flex;width:100vw;height:100vh;justify-content:center;align-items:center}",""]),n.locals={centerLoadingSVG:"openmrs-ohri__loading-component__centerLoadingSVG___Vme8M"},e.exports=n},53087:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.openmrs-ohri__patient-banner__productiveHeading01___3IV1N{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.openmrs-ohri__patient-banner__productiveHeading02___Fe3xU{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.openmrs-ohri__patient-banner__productiveHeading03___3sHJI{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.openmrs-ohri__patient-banner__productiveHeading04___1nh3V{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.openmrs-ohri__patient-banner__productiveHeading05___2Q8eh{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.openmrs-ohri__patient-banner__productiveHeading06___2OEos{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.openmrs-ohri__patient-banner__bodyShort01___1St_2{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.openmrs-ohri__patient-banner__helperText01___3fF-O{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.openmrs-ohri__patient-banner__bodyShort02___3XbWf{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.openmrs-ohri__patient-banner__bodyLong01___1xcA0{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.openmrs-ohri__patient-banner__bodyLong02___1B3y2{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.openmrs-ohri__patient-banner__label01___3xCQ6{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.openmrs-ohri__patient-banner__text01___E6Jpi{color:#161616}.openmrs-ohri__patient-banner__text02___1FL_i{color:#525252}aside{background-color:#fff !important}div[class*=-esm-login__styles__center]>img{width:140px}.tab-12rem>button{width:12rem !important}.tab-14rem>button{width:14rem !important}.tab-16rem>button{width:16rem !important}.openmrs-ohri__patient-banner__patientBannerContainer___3eDTi{display:flex;width:100%;position:sticky;flex-direction:row;align-items:baseline;padding:0}.openmrs-ohri__patient-banner__patientBannerContainer___3eDTi>div{width:100%}",""]),n.locals={productiveHeading01:"openmrs-ohri__patient-banner__productiveHeading01___3IV1N",productiveHeading02:"openmrs-ohri__patient-banner__productiveHeading02___Fe3xU",productiveHeading03:"openmrs-ohri__patient-banner__productiveHeading03___3sHJI",productiveHeading04:"openmrs-ohri__patient-banner__productiveHeading04___1nh3V",productiveHeading05:"openmrs-ohri__patient-banner__productiveHeading05___2Q8eh",productiveHeading06:"openmrs-ohri__patient-banner__productiveHeading06___2OEos",bodyShort01:"openmrs-ohri__patient-banner__bodyShort01___1St_2",helperText01:"openmrs-ohri__patient-banner__helperText01___3fF-O",bodyShort02:"openmrs-ohri__patient-banner__bodyShort02___3XbWf",bodyLong01:"openmrs-ohri__patient-banner__bodyLong01___1xcA0",bodyLong02:"openmrs-ohri__patient-banner__bodyLong02___1B3y2",label01:"openmrs-ohri__patient-banner__label01___3xCQ6",text01:"openmrs-ohri__patient-banner__text01___E6Jpi",text02:"openmrs-ohri__patient-banner__text02___1FL_i",patientBannerContainer:"openmrs-ohri__patient-banner__patientBannerContainer___3eDTi"},e.exports=n},14607:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.openmrs-ohri___input__productiveHeading01___3efTB{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.openmrs-ohri___input__productiveHeading02___3JK0K{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.openmrs-ohri___input__productiveHeading03___oSZSr{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.openmrs-ohri___input__productiveHeading04___1k7Gz{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.openmrs-ohri___input__productiveHeading05___2DS9X{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.openmrs-ohri___input__productiveHeading06___3nquH{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.openmrs-ohri___input__bodyShort01___1-lOo{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.openmrs-ohri___input__helperText01___3mUe2{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.openmrs-ohri___input__bodyShort02___1SQXu{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.openmrs-ohri___input__bodyLong01___1SogS{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.openmrs-ohri___input__bodyLong02___1Wtsy{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.openmrs-ohri___input__label01___2tspH{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.openmrs-ohri___input__text01___1TD33{color:#161616}.openmrs-ohri___input__text02___34XWE{color:#525252}aside{background-color:#fff !important}div[class*=-esm-login__styles__center]>img{width:140px}.tab-12rem>button{width:12rem !important}.tab-14rem>button{width:14rem !important}.tab-16rem>button{width:16rem !important}.openmrs-ohri___input__formField___1AY8i,.openmrs-ohri___input__numberInputWrapper___3SPQH .bx--number,.openmrs-ohri___input__formInputField___xDdc2{margin-top:10px}.openmrs-ohri___input__formField___1AY8i>div>div>label,.openmrs-ohri___input__numberInputWrapper___3SPQH .bx--number>div>div>label,.openmrs-ohri___input__formInputField___xDdc2>div>div>label{color:#525252}.openmrs-ohri___input__ohriFormLabel___2K9Mo{font-size:.75rem}.openmrs-ohri___input__datePickerOverrides___gyecw input{width:22.313rem !important}.openmrs-ohri___input__disabledLabelOverrides___2vK-E label{color:#525252 !important}.openmrs-ohri___input__formInputField___xDdc2{width:auto}.openmrs-ohri___input__formInputField___xDdc2>div>div>label{max-width:auto}.openmrs-ohri___input__formInputField___xDdc2>div>div>div{width:22.313rem !important}.openmrs-ohri___input__multiselectOverride___3kgAo{width:auto;padding-bottom:15px}.openmrs-ohri___input__multiselectOverride___3kgAo>div>div{width:22.313rem !important}.openmrs-ohri___input__multiselectOverride___3kgAo>div div div input{border:0 !important;border-bottom:1px solid #8d8d8d !important}.openmrs-ohri___input__dropDownOverride___2wcnI>div div button{border-bottom:1px solid #8d8d8d !important}.openmrs-ohri___input__numberInputWrapper___3SPQH .bx--number{width:22.313rem;font-size:.875rem}.openmrs-ohri___input__textContainer___12KRx label{font-size:.875rem !important}.openmrs-ohri___input__selectedOption___SZu3V{border-radius:4px;width:15rem}.openmrs-ohri___input__selectedOption___SZu3V button{background-color:#f4f4f4}.openmrs-ohri___input__switchOverrides___3-ALO{background-color:#edf5ff !important;color:#0f62fe !important;padding:0 0 0 1rem;border:solid 1px #0f62fe !important}.openmrs-ohri___input__switchOverrides___3-ALO button:focus{border:none !important}.openmrs-ohri___input__selectedOption___SZu3V button:before{display:none !important}.openmrs-ohri___input__switchOverridesNone___nXV_C{background-color:#f4f4f4 !important;padding:0 0 0 1rem;border:solid 1px #a6c8ff !important}.openmrs-ohri___input__radioButton_ohri___76iRx input[type=radio]{opacity:0 !important;position:fixed;width:0}.openmrs-ohri___input__radioButton_ohri___76iRx label{display:inline-block;border:1px solid #a6c8ff;color:#525252;padding:.688rem 1rem;padding-right:3rem;border-radius:4px 0 0 4px;background-color:#f4f4f4}.openmrs-ohri___input__radioButton_ohri___76iRx label:last-child{margin-left:-5px;border-radius:0 4px 4px 0}.openmrs-ohri___input__radioButton_ohri___76iRx input[type=radio]:checked+label{color:#0f62fe;border-color:#0f62fe;background-color:#edf5ff}.openmrs-ohri___input__radioButton_ohri___76iRx>.openmrs-ohri___input__bx--radio-button-wrapper___Cimqv{margin-right:0rem !important}.openmrs-ohri___input__textInputOverrides___1IitC>div>div{width:22.313rem}.openmrs-ohri___input__unspecified___3XG-g>div label{font-size:12px;color:#525252;padding-bottom:1rem}.openmrs-ohri___input__errorLegend___27dMl legend,.openmrs-ohri___input__errorLabel___MB7pZ label{color:#da1e28 !important}.openmrs-ohri___input__unspecified___3XG-g>div label{font-size:12px;color:#525252}.openmrs-ohri___input__errorLabel___MB7pZ .bx--form-requirement{display:block;max-height:12.5rem;overflow:visible;font-weight:400;color:#da1e28}.openmrs-ohri___input__obsGroupColumn___1o697{max-width:18rem}.openmrs-ohri___input__obsGroupColumn___1o697>div{margin-top:0 !important}.openmrs-ohri___input__obsGroupColumn___1o697>div>div>div{max-width:18rem !important}.openmrs-ohri___input__obsGroupColumn___1o697>div>div>div>div{max-width:18rem !important}.openmrs-ohri___input__repeatContentWrapper___2-Vbg{margin-top:.65rem;margin-bottom:2rem}.openmrs-ohri___input__ohriLabel___10_7e{width:auto !important}.openmrs-ohri___input__ohriLabel___10_7e .bx--assistive-text{max-width:30rem !important;font-size:.75rem;white-space:pre-line !important}",""]),n.locals={productiveHeading01:"openmrs-ohri___input__productiveHeading01___3efTB",productiveHeading02:"openmrs-ohri___input__productiveHeading02___3JK0K",productiveHeading03:"openmrs-ohri___input__productiveHeading03___oSZSr",productiveHeading04:"openmrs-ohri___input__productiveHeading04___1k7Gz",productiveHeading05:"openmrs-ohri___input__productiveHeading05___2DS9X",productiveHeading06:"openmrs-ohri___input__productiveHeading06___3nquH",bodyShort01:"openmrs-ohri___input__bodyShort01___1-lOo",helperText01:"openmrs-ohri___input__helperText01___3mUe2",bodyShort02:"openmrs-ohri___input__bodyShort02___1SQXu",bodyLong01:"openmrs-ohri___input__bodyLong01___1SogS",bodyLong02:"openmrs-ohri___input__bodyLong02___1Wtsy",label01:"openmrs-ohri___input__label01___2tspH",text01:"openmrs-ohri___input__text01___1TD33",text02:"openmrs-ohri___input__text02___34XWE",formField:"openmrs-ohri___input__formField___1AY8i",numberInputWrapper:"openmrs-ohri___input__numberInputWrapper___3SPQH",formInputField:"openmrs-ohri___input__formInputField___xDdc2",ohriFormLabel:"openmrs-ohri___input__ohriFormLabel___2K9Mo",datePickerOverrides:"openmrs-ohri___input__datePickerOverrides___gyecw",disabledLabelOverrides:"openmrs-ohri___input__disabledLabelOverrides___2vK-E",multiselectOverride:"openmrs-ohri___input__multiselectOverride___3kgAo",dropDownOverride:"openmrs-ohri___input__dropDownOverride___2wcnI",textContainer:"openmrs-ohri___input__textContainer___12KRx",selectedOption:"openmrs-ohri___input__selectedOption___SZu3V",switchOverrides:"openmrs-ohri___input__switchOverrides___3-ALO",switchOverridesNone:"openmrs-ohri___input__switchOverridesNone___nXV_C",radioButton_ohri:"openmrs-ohri___input__radioButton_ohri___76iRx","bx--radio-button-wrapper":"openmrs-ohri___input__bx--radio-button-wrapper___Cimqv",textInputOverrides:"openmrs-ohri___input__textInputOverrides___1IitC",unspecified:"openmrs-ohri___input__unspecified___3XG-g",errorLegend:"openmrs-ohri___input__errorLegend___27dMl",errorLabel:"openmrs-ohri___input__errorLabel___MB7pZ",obsGroupColumn:"openmrs-ohri___input__obsGroupColumn___1o697",repeatContentWrapper:"openmrs-ohri___input__repeatContentWrapper___2-Vbg",ohriLabel:"openmrs-ohri___input__ohriLabel___10_7e"},e.exports=n},91970:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.openmrs-ohri___page__productiveHeading01___1I2AV{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.openmrs-ohri___page__productiveHeading02___2KNcV{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.openmrs-ohri___page__productiveHeading03___1YOvy{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.openmrs-ohri___page__productiveHeading04____JvMS{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.openmrs-ohri___page__productiveHeading05___3_pJW{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.openmrs-ohri___page__productiveHeading06___rZ8Qw{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.openmrs-ohri___page__bodyShort01___16s3G{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.openmrs-ohri___page__helperText01___2hLb3{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.openmrs-ohri___page__bodyShort02___WkF8Q{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.openmrs-ohri___page__bodyLong01___3J0pi{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.openmrs-ohri___page__bodyLong02___22Cd3{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.openmrs-ohri___page__label01___3K1me{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.openmrs-ohri___page__text01___2yS_a{color:#161616}.openmrs-ohri___page__text02___3x4Dc{color:#525252}aside{background-color:#fff !important}div[class*=-esm-login__styles__center]>img{width:140px}.tab-12rem>button{width:12rem !important}.tab-14rem>button{width:14rem !important}.tab-16rem>button{width:16rem !important}.openmrs-ohri___page__divider___1yvKR{background-color:rgba(107,104,104,.5);margin:25px 0}.openmrs-ohri___page__pageContent___3aDP7:last-child>hr{display:none}.openmrs-ohri___page__pageHeader___ojjH5{display:flex;flex-direction:row;margin:20px 0 20px 15px}.openmrs-ohri___page__pageTitle___2VjsK{font-size:1.25rem;font-weight:600;line-height:1.4;color:var(--color-gray-100);width:100%}.openmrs-ohri___page__required___1elZl{margin:.25rem 27rem .5rem 0;font-size:.875rem;line-height:1.29;letter-spacing:.16px;color:var(--color-gray-70);width:100%}.openmrs-ohri___page__formSection___1fbE6{flex:1 1 65%}.openmrs-ohri___page__formSection___1fbE6>div>fieldset{margin-bottom:0 !important}.openmrs-ohri___page__collapseToggle___2FuSQ{margin-Left:-180px;margin-bottom:20px;margin-top:-10px}.openmrs-ohri___page__sectionContent___CZG98>div{background-color:#f4f4f4}.openmrs-ohri___page__formSection___1fbE6>div div div input,.openmrs-ohri___page__formSection___1fbE6>div div div textarea,.openmrs-ohri___page__formSection___1fbE6>div div div dropdown,.openmrs-ohri___page__formSection___1fbE6 .bx--dropdown button{background-color:#fff !important}@media(min-width: 640px){.bx--accordion__content{padding-right:2rem !important}}",""]),n.locals={productiveHeading01:"openmrs-ohri___page__productiveHeading01___1I2AV",productiveHeading02:"openmrs-ohri___page__productiveHeading02___2KNcV",productiveHeading03:"openmrs-ohri___page__productiveHeading03___1YOvy",productiveHeading04:"openmrs-ohri___page__productiveHeading04____JvMS",productiveHeading05:"openmrs-ohri___page__productiveHeading05___3_pJW",productiveHeading06:"openmrs-ohri___page__productiveHeading06___rZ8Qw",bodyShort01:"openmrs-ohri___page__bodyShort01___16s3G",helperText01:"openmrs-ohri___page__helperText01___2hLb3",bodyShort02:"openmrs-ohri___page__bodyShort02___WkF8Q",bodyLong01:"openmrs-ohri___page__bodyLong01___3J0pi",bodyLong02:"openmrs-ohri___page__bodyLong02___22Cd3",label01:"openmrs-ohri___page__label01___3K1me",text01:"openmrs-ohri___page__text01___2yS_a",text02:"openmrs-ohri___page__text02___3x4Dc",divider:"openmrs-ohri___page__divider___1yvKR",pageContent:"openmrs-ohri___page__pageContent___3aDP7",pageHeader:"openmrs-ohri___page__pageHeader___ojjH5",pageTitle:"openmrs-ohri___page__pageTitle___2VjsK",required:"openmrs-ohri___page__required___1elZl",formSection:"openmrs-ohri___page__formSection___1fbE6",collapseToggle:"openmrs-ohri___page__collapseToggle___2FuSQ",sectionContent:"openmrs-ohri___page__sectionContent___CZG98"},e.exports=n},86439:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,".openmrs-ohri__ohri-form-section__section___X07w6{border-radius:solid 1px rgba(107,104,104,.5);margin-bottom:3.063rem}.openmrs-ohri__ohri-form-section__sectionTitle___1Oajl{max-width:200px;font-size:1rem;font-weight:600;line-height:1.38;color:#525252;margin-bottom:.5rem}.openmrs-ohri__ohri-form-section__sectionContainer___iQ7nY{margin-top:1.438rem;width:90%}.openmrs-ohri__ohri-form-section__sectionContainer___iQ7nY .bx--fieldset{margin-bottom:0}.openmrs-ohri__ohri-form-section__sectionContainer___iQ7nY>div{margin-bottom:1rem}.openmrs-ohri__ohri-form-section__sectionContainer___iQ7nY .bx--label{text-align:left}",""]),n.locals={section:"openmrs-ohri__ohri-form-section__section___X07w6",sectionTitle:"openmrs-ohri__ohri-form-section__sectionTitle___1Oajl",sectionContainer:"openmrs-ohri__ohri-form-section__sectionContainer___iQ7nY"},e.exports=n},680:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.openmrs-ohri__ohri-form-sidebar-component__productiveHeading01___2a1ss{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.openmrs-ohri__ohri-form-sidebar-component__productiveHeading02___3ztK8{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.openmrs-ohri__ohri-form-sidebar-component__productiveHeading03___3UWKO{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.openmrs-ohri__ohri-form-sidebar-component__productiveHeading04___2nBC8{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.openmrs-ohri__ohri-form-sidebar-component__productiveHeading05___2FERy{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.openmrs-ohri__ohri-form-sidebar-component__productiveHeading06___xd5O-{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.openmrs-ohri__ohri-form-sidebar-component__bodyShort01___fiRR7{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.openmrs-ohri__ohri-form-sidebar-component__helperText01___5yubD{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.openmrs-ohri__ohri-form-sidebar-component__bodyShort02___1spZ1{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.openmrs-ohri__ohri-form-sidebar-component__bodyLong01___1kGp9{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.openmrs-ohri__ohri-form-sidebar-component__bodyLong02___qVlAW{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.openmrs-ohri__ohri-form-sidebar-component__label01___3RA0R{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.openmrs-ohri__ohri-form-sidebar-component__text01___3SrmB{color:#161616}.openmrs-ohri__ohri-form-sidebar-component__text02___3jbh-{color:#525252}aside{background-color:#fff !important}div[class*=-esm-login__styles__center]>img{width:140px}.tab-12rem>button{width:12rem !important}.tab-14rem>button{width:14rem !important}.tab-16rem>button{width:16rem !important}.openmrs-ohri__ohri-form-sidebar-component__sidebar___Xr1ih{width:12rem;min-height:8rem;overscroll-behavior:contain;margin:1px 13px 15px 0}.openmrs-ohri__ohri-form-sidebar-component__sidebarList___2hsxP{max-Height:100%}.openmrs-ohri__ohri-form-sidebar-component__sidenavActions___23RWI{margin-left:.6rem}@media all and (device-width: 600px)and (device-height: 1024px)and (orientation: portrait){.openmrs-ohri__ohri-form-sidebar-component__sidebar___Xr1ih{width:11rem;max-height:500px;margin-right:20px;position:fixed}.openmrs-ohri__ohri-form-sidebar-component__sidebarList___2hsxP{max-Height:200px;overflow-y:scroll}}.openmrs-ohri__ohri-form-sidebar-component__link___2i3jc{margin:.375rem 0 .375rem .5rem;font-size:1rem;line-height:1.43;letter-spacing:.16px;color:#161616;cursor:pointer}.openmrs-ohri__ohri-form-sidebar-component__link___2i3jc{margin:.375rem 0 .375rem .5rem;font-size:1rem;line-height:1.43;letter-spacing:.16px;color:#161616;cursor:pointer}.openmrs-ohri__ohri-form-sidebar-component__link___2i3jc:hover{outline:none}.openmrs-ohri__ohri-form-sidebar-component__sidebarSection___2-GuU{border-left:.5rem solid #3197d9;height:auto;margin:.122rem 0 .122rem;padding:.382rem .375rem .118rem 1rem;background-color:#fff;cursor:pointer}.openmrs-ohri__ohri-form-sidebar-component__sidebarSectionActive___cav-P{border-left:.5rem solid #1a3054;height:auto;font-weight:600;margin:.122rem 0 .122rem;padding:.382rem .375rem .118rem 1rem;background-color:#ededed;cursor:pointer}.openmrs-ohri__ohri-form-sidebar-component__sidebarSectionDone___3Ls24{border-left:.5rem solid #131e35;height:auto;margin:.122rem 0 .122rem;padding:.382rem .375rem .118rem 1rem;background-color:#defbe6;cursor:pointer}.openmrs-ohri__ohri-form-sidebar-component__sidebarSectionLink___3snIF{font-size:.875rem;font-stretch:normal;font-style:normal;line-height:1.43;letter-spacing:.16px;color:#161616}.openmrs-ohri__ohri-form-sidebar-component__sideBarHorizontalLine___1hFf8{margin-top:1.5rem}",""]),n.locals={productiveHeading01:"openmrs-ohri__ohri-form-sidebar-component__productiveHeading01___2a1ss",productiveHeading02:"openmrs-ohri__ohri-form-sidebar-component__productiveHeading02___3ztK8",productiveHeading03:"openmrs-ohri__ohri-form-sidebar-component__productiveHeading03___3UWKO",productiveHeading04:"openmrs-ohri__ohri-form-sidebar-component__productiveHeading04___2nBC8",productiveHeading05:"openmrs-ohri__ohri-form-sidebar-component__productiveHeading05___2FERy",productiveHeading06:"openmrs-ohri__ohri-form-sidebar-component__productiveHeading06___xd5O-",bodyShort01:"openmrs-ohri__ohri-form-sidebar-component__bodyShort01___fiRR7",helperText01:"openmrs-ohri__ohri-form-sidebar-component__helperText01___5yubD",bodyShort02:"openmrs-ohri__ohri-form-sidebar-component__bodyShort02___1spZ1",bodyLong01:"openmrs-ohri__ohri-form-sidebar-component__bodyLong01___1kGp9",bodyLong02:"openmrs-ohri__ohri-form-sidebar-component__bodyLong02___qVlAW",label01:"openmrs-ohri__ohri-form-sidebar-component__label01___3RA0R",text01:"openmrs-ohri__ohri-form-sidebar-component__text01___3SrmB",text02:"openmrs-ohri__ohri-form-sidebar-component__text02___3jbh-",sidebar:"openmrs-ohri__ohri-form-sidebar-component__sidebar___Xr1ih",sidebarList:"openmrs-ohri__ohri-form-sidebar-component__sidebarList___2hsxP",sidenavActions:"openmrs-ohri__ohri-form-sidebar-component__sidenavActions___23RWI",link:"openmrs-ohri__ohri-form-sidebar-component__link___2i3jc",sidebarSection:"openmrs-ohri__ohri-form-sidebar-component__sidebarSection___2-GuU",sidebarSectionActive:"openmrs-ohri__ohri-form-sidebar-component__sidebarSectionActive___cav-P",sidebarSectionDone:"openmrs-ohri__ohri-form-sidebar-component__sidebarSectionDone___3Ls24",sidebarSectionLink:"openmrs-ohri__ohri-form-sidebar-component__sidebarSectionLink___3snIF",sideBarHorizontalLine:"openmrs-ohri__ohri-form-sidebar-component__sideBarHorizontalLine___1hFf8"},e.exports=n},66132:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,".openmrs-ohri__ohri-field-value-view__readOnlyStyle___MxUhu{border-bottom:.5px #c6c6c6;border-style:solid}.openmrs-ohri__ohri-field-value-view__readOnlyStyle___MxUhu>div{padding-bottom:7px !important}.openmrs-ohri__ohri-field-value-view__readOnlyValue___1wQeH{color:#525252}",""]),n.locals={readOnlyStyle:"openmrs-ohri__ohri-field-value-view__readOnlyStyle___MxUhu",readOnlyValue:"openmrs-ohri__ohri-field-value-view__readOnlyValue___1wQeH"},e.exports=n},95303:(e,n,t)=>{(n=t(77705)(!1)).push([e.id,".openmrs-ohri__ohri-form__ohriForm___2RsoG{height:100%;overflow:hidden;flex-grow:1}.openmrs-ohri__ohri-form__ohriFormContainer___zLqL5{display:-webkit-flex;height:100%;overflow-y:hidden}.openmrs-ohri__ohri-form__ohriFormContainer___zLqL5 .bx--label{font-size:.875rem}.openmrs-ohri__ohri-form__formContent___49VEt{margin:0;flex-basis:65%;flex-grow:1;flex-shrink:1;position:relative;overflow-y:hidden;display:flex;flex-direction:column}.openmrs-ohri__ohri-form__formContentBody___10Ea0{overflow-y:auto;width:inherit;position:sticky}.openmrs-ohri__ohri-form__minifiedFormContentBody___2uqvq{margin-bottom:0px !important}@media(max-width: 768px){.openmrs-ohri__ohri-form__ohriFormContainer___zLqL5{height:100vh}}.openmrs-ohri__ohri-form__minifiedButtons___1Ly6A{width:100%;height:63.5px}.openmrs-ohri__ohri-form__minifiedButtons___1Ly6A .bx--btn{max-width:50%;height:3.9rem}.openmrs-ohri__ohri-form__minifiedButtons___1Ly6A>button{width:50%}.openmrs-ohri__ohri-form__markdownContainer___H0L0B{padding:1rem}aside[class*=-esm-patient-chart__workspace-window__container__]{border-left:1px solid #8d8d8d !important}aside[class*=-esm-patient-chart__workspace-window__container__]>div{display:flex;bottom:0}aside[class*=-esm-patient-chart__workspace-window__container__]>div>div{flex-grow:1}",""]),n.locals={ohriForm:"openmrs-ohri__ohri-form__ohriForm___2RsoG",ohriFormContainer:"openmrs-ohri__ohri-form__ohriFormContainer___zLqL5",formContent:"openmrs-ohri__ohri-form__formContent___49VEt",formContentBody:"openmrs-ohri__ohri-form__formContentBody___10Ea0",minifiedFormContentBody:"openmrs-ohri__ohri-form__minifiedFormContentBody___2uqvq",minifiedButtons:"openmrs-ohri__ohri-form__minifiedButtons___1Ly6A",markdownContainer:"openmrs-ohri__ohri-form__markdownContainer___H0L0B"},e.exports=n}}]);
//# sourceMappingURL=6428.js.map