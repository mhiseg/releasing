{"version":3,"file":"448.js","mappings":"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","sources":["webpack://openmrs-ohri-app/./src/components/tile/ohri-summary-tile.scss?b492","webpack://openmrs-ohri-app/./node_modules/carbon-components-react/es/components/Grid/Row.js","webpack://openmrs-ohri-app/./src/api/api.ts","webpack://openmrs-ohri-app/./src/components/tile/ohri-programme-summary-tiles.scss?b132","webpack://openmrs-ohri-app/./src/components/tile/ohri-programme-summary-tiles.component.tsx","webpack://openmrs-ohri-app/./src/components/tile/ohri-summary-tile-tablet.component.tsx","webpack://openmrs-ohri-app/./src/components/tile/ohri-summary-tile.component.tsx","webpack://openmrs-ohri-app/./src/components/tile/ohri-programme-summary-tiles.scss","webpack://openmrs-ohri-app/./src/components/tile/ohri-summary-tile.scss"],"sourcesContent":["\n      import API from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/@openmrs/webpack-config/node_modules/sass-loader/dist/cjs.js!./ohri-summary-tile.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/@openmrs/webpack-config/node_modules/sass-loader/dist/cjs.js!./ohri-summary-tile.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"as\", \"condensed\", \"narrow\", \"className\", \"children\"];\n\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { usePrefix } from '../../internal/usePrefix';\n\nfunction Row(_ref) {\n  var _cx;\n\n  var _ref$as = _ref.as,\n      BaseComponent = _ref$as === void 0 ? 'div' : _ref$as,\n      _ref$condensed = _ref.condensed,\n      condensed = _ref$condensed === void 0 ? false : _ref$condensed,\n      _ref$narrow = _ref.narrow,\n      narrow = _ref$narrow === void 0 ? false : _ref$narrow,\n      containerClassName = _ref.className,\n      children = _ref.children,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var prefix = usePrefix();\n  var className = cx(containerClassName, (_cx = {}, _defineProperty(_cx, \"\".concat(prefix, \"--row\"), true), _defineProperty(_cx, \"\".concat(prefix, \"--row--condensed\"), condensed), _defineProperty(_cx, \"\".concat(prefix, \"--row--narrow\"), narrow), _cx));\n  return /*#__PURE__*/React.createElement(BaseComponent, _extends({\n    className: className\n  }, rest), children);\n}\n\nRow.propTypes = {\n  /**\n   * Provide a custom element to render instead of the default <div>\n   */\n  as: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType]),\n\n  /**\n   * Pass in content that will be rendered within the `Row`\n   */\n  children: PropTypes.node,\n\n  /**\n   * Specify a custom className to be applied to the `Row`\n   */\n  className: PropTypes.string,\n\n  /**\n   * Specify a single row as condensed.Rows that are adjacent\n   * and are condensed will have 2px of margin between them to match gutter.\n   */\n  condensed: PropTypes.bool,\n\n  /**\n   * Specify a single row as narrow. The container will hang\n   * 16px into the gutter.\n   */\n  narrow: PropTypes.bool\n};\nexport default Row;","import { openmrsFetch } from '@openmrs/esm-framework';\nimport moment from 'moment';\nimport { getObsFromEncounter } from '../components/encounter-list/encounter-list.component';\nimport {\n  finalHIVCodeConcept,\n  finalPositiveHIVValueConcept,\n  computedHIV_StatusConcept,\n  encounterRepresentation,\n  covidOutcomeUUID,\n  covid_Assessment_EncounterUUID,\n  covidOutcomesCohortUUID,\n} from '../constants';\n\nconst BASE_WS_API_URL = '/ws/rest/v1/';\nconst BASE_FHIR_API_URL = '/ws/fhir2/R4/';\n\nexport function fetchLastVisit(uuid: string) {\n  return openmrsFetch(`/ws/fhir2/R4/Encounter?patient=${uuid}&_sort=-date&_count=1`);\n}\n\nexport function fetchPatientList(offSet: number = 1, pageSize: number = 10) {\n  return openmrsFetch(`/ws/fhir2/R4/Patient?_getpagesoffset=${offSet}&_count=${pageSize}`);\n}\n\nexport function fetchTodayClients() {\n  let date = moment().format('YYYY-MM-DD');\n  return openmrsFetch(`/ws/fhir2/R4/Encounter?date=${date}`).then(({ data }) => {\n    if (data.entry?.length) {\n      return cleanDuplicatePatientReferences(data);\n    }\n    return [];\n  });\n}\n\nexport function fetchPatientsFromObservationCodeConcept(\n  codeConcept: string,\n  valueConcept?: string,\n  cutOffDays?: number,\n) {\n  let endDate = moment().format('YYYY-MM-DD');\n  let startDate = moment()\n    .subtract(cutOffDays, 'days')\n    .format('YYYY-MM-DD');\n\n  return openmrsFetch(\n    `/ws/fhir2/R4/Observation?code=${codeConcept}${valueConcept ? `&value-concept=${valueConcept}` : ''}${\n      cutOffDays ? `&_lastUpdated=ge${startDate}&_lastUpdated=le${endDate}` : ''\n    }`,\n  ).then(({ data }) => {\n    if (data.entry?.length) {\n      return cleanDuplicatePatientReferences(data);\n    }\n    return [];\n  });\n}\n\nfunction cleanDuplicatePatientReferences(data) {\n  let patientRefs = data.entry.map(enc => {\n    return enc.resource.subject.reference;\n  });\n  patientRefs = new Set([...patientRefs]);\n  patientRefs = Array.from(patientRefs);\n  return Promise.all(\n    patientRefs.map(ref => {\n      return openmrsFetch(BASE_FHIR_API_URL + ref);\n    }),\n  );\n}\n\nexport function performPatientSearch(query, objectVersion) {\n  return openmrsFetch(`${BASE_WS_API_URL}/patient?q=${query}${objectVersion ? `&v=${objectVersion}` : ''}`, {\n    method: 'GET',\n  });\n}\n\nexport function getPatients(searchPhrase?: string, offset?: number, pageSize: number = 10) {\n  return openmrsFetch(\n    `/ws/fhir2/R4/Patient?_count=${pageSize}${searchPhrase ? `&name=${searchPhrase}` : ''}${\n      offset ? `&_getpagesoffset=${offset}` : ''\n    }`,\n    {\n      method: 'GET',\n    },\n  );\n}\n\nexport async function getCohort(cohortUuid: string, version?: string) {\n  const { data } = await openmrsFetch(\n    BASE_WS_API_URL + `cohortm/cohort/${cohortUuid}${version ? `?v=${version}` : ``}`,\n  );\n  data.cohortMembers = data.cohortMembers.filter(member => !member.voided);\n  return data;\n}\n\nexport async function getReportingCohort(cohortUuid: string, queryParams?: string[]) {\n  const params = queryParams ? queryParams.join('&') : '';\n  const url = params ? `reportingrest/cohort/${cohortUuid}?${params}` : `reportingrest/cohort/${cohortUuid}`;\n  const { data } = await openmrsFetch(BASE_WS_API_URL + url);\n  return data;\n}\n\nexport async function getReportingCohortMembers(cohortUuid: string, queryParams?: string[]) {\n  const params = queryParams ? queryParams.join('&') : '';\n  const url = params ? `reportingrest/cohort/${cohortUuid}?${params}` : `reportingrest/cohort/${cohortUuid}`;\n  const { data } = await openmrsFetch(BASE_WS_API_URL + url);\n  return Promise.all(\n    data.members.map(member => {\n      return openmrsFetch(BASE_WS_API_URL + `patient/${member.uuid}?v=full`);\n    }),\n  );\n}\n\nexport async function getCohorts(cohortTypeUuid?: string) {\n  const {\n    data: { results, error },\n  } = await openmrsFetch(\n    BASE_WS_API_URL +\n      `cohortm/cohort?v=custom:(uuid,name,voided)${cohortTypeUuid ? `&cohortType=${cohortTypeUuid}` : ''}`,\n  );\n  if (error) {\n    throw error;\n  }\n  return results.filter(cohort => !cohort.voided);\n}\n\nexport function addPatientToCohort(patientUuid: string, cohortUuid: string) {\n  return openmrsFetch(`${BASE_WS_API_URL}cohortm/cohortmember`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: {\n      patient: patientUuid,\n      cohort: cohortUuid,\n      startDate: new Date(),\n    },\n  });\n}\n\nexport function evictCohortMembership(membershipUuid: string) {\n  return openmrsFetch(`${BASE_WS_API_URL}cohortm/cohortmember/${membershipUuid}`, { method: 'DELETE' });\n}\n\nexport async function getPatientListsForPatient(patientUuid: string) {\n  const {\n    data: { results, error },\n  } = await openmrsFetch(`${BASE_WS_API_URL}cohortm/cohortmember?patient=${patientUuid}&v=full`);\n  if (error) {\n    throw error;\n  }\n  return results.filter(membership => !membership.voided);\n}\n\nexport function fetchPatientsFinalHIVStatus(patientUUID: string) {\n  return openmrsFetch(\n    `/ws/fhir2/R4/Observation?code=${finalHIVCodeConcept}&value-concept=${finalPositiveHIVValueConcept}&patient=${patientUUID}&_sort=-date&_count=1`,\n  ).then(({ data }) => {\n    if (data.entry?.length) {\n      return data.entry[0].resource.valueCodeableConcept.coding[0].display;\n    }\n    return '';\n  });\n}\n\nexport function fetchPatientObservationFromEncounter(\n  patientUUID: string,\n  encounterUUID: string,\n  observationCode: string,\n) {\n  return openmrsFetch(\n    `/ws/fhir2/R4/Observation?patient=${patientUUID}&encounter=${encounterUUID}&code=${observationCode}&_sort=-date&_count=1`,\n  );\n}\n\nexport function fetchPatientComputedConcept_HIV_Status(patientUUID: string) {\n  return openmrsFetch(\n    `/ws/fhir2/R4/Observation?code=${computedHIV_StatusConcept}&value-concept=${computedHIV_StatusConcept}&patient=${patientUUID}&_sort=-date&_count=1`,\n  ).then(({ data }) => {\n    if (data.entry?.length) {\n      return data.entry[0].resource.valueCodeableConcept.coding[0].display;\n    }\n    return '';\n  });\n}\n\n// TODO: the WS/REST Encounter resource doesn't support sorting, figure out a better approach ie. FHIR or Reporting\nexport function fetchPatientLastEncounter(patientUuid: string, encounterType) {\n  const query = `encounterType=${encounterType}&patient=${patientUuid}`;\n  return openmrsFetch(`/ws/rest/v1/encounter?${query}&v=${encounterRepresentation}`).then(({ data }) => {\n    if (data.results.length) {\n      return data.results[data.results.length - 1];\n    }\n\n    return null;\n  });\n}\n\nexport function fetchPatientCovidOutcome() {\n  return openmrsFetch(`/ws/rest/v1/reportingrest/cohort/${covidOutcomesCohortUUID}`).then(({ data }) => {\n    if (data.members?.length) {\n      let patientRefs = data.members.map(member => {\n        return member.uuid;\n      });\n      patientRefs = new Set([...patientRefs]);\n      patientRefs = Array.from(patientRefs);\n      return Promise.all(\n        patientRefs.map(ref => {\n          return openmrsFetch(BASE_FHIR_API_URL + '/Person/' + ref);\n        }),\n      );\n    }\n    return [];\n  });\n}\n\nexport function fetchConceptNameByUuid(conceptUuid: string) {\n  return openmrsFetch(`/ws/rest/v1/concept/${conceptUuid}/name?limit=1`).then(({ data }) => {\n    if (data.results.length) {\n      const concept = data.results[data.results.length - 1];\n      return concept.display;\n    }\n  });\n}\n","\n      import API from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/@openmrs/webpack-config/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/@openmrs/webpack-config/node_modules/sass-loader/dist/cjs.js!./ohri-programme-summary-tiles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/@openmrs/webpack-config/node_modules/sass-loader/dist/cjs.js!./ohri-programme-summary-tiles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Row } from 'carbon-components-react';\nimport React, { useEffect, useState } from 'react';\nimport OHRISummaryTileTablet from './ohri-summary-tile-tablet.component';\nimport styles from './ohri-programme-summary-tiles.scss';\nimport OHRISummaryTile from './ohri-summary-tile.component';\n\nexport interface SummaryTile {\n  title: string;\n  linkAddress: string;\n  subTitle: string;\n  value: number;\n  onClick: () => void;\n}\n\ninterface Props {\n  tiles: Array<SummaryTile>;\n}\n\nfunction OHRIProgrammeSummaryTiles(Props) {\n  return (\n    <>\n      <Row className={styles.desktopView}>\n        {Props.tiles.map((tile, index) => {\n          return (\n            <div style={{ width: '321px', marginLeft: '16px' }} key={index}>\n              <OHRISummaryTile\n                title={tile.title}\n                subTitle={tile.subTitle}\n                value={tile.value}\n                onClickView={tile.onClick}\n              />\n            </div>\n          );\n        })}\n      </Row>\n      <Row className={styles.tileView}>\n        <OHRISummaryTileTablet details={Props.tiles} />\n      </Row>\n    </>\n  );\n}\n\nexport default OHRIProgrammeSummaryTiles;\n","import React from 'react';\nimport { Row, Tile } from 'carbon-components-react';\nimport styles from './ohri-summary-tile.scss';\n\nfunction OHRISummaryTileTablet({ details }) {\n  return (\n    <Tile className={styles.tabletTile}>\n      <Row className={styles.tabletTileTitle}>Programme summary</Row>\n      <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between' }}>\n        {details.map((name, index) => {\n          return (\n            <div key={index}>\n              <div className={styles.tabletTileSubTitle}>{name.subTitle}</div>\n              <div className={styles.tabletTileValue}>{name.value}</div>\n            </div>\n          );\n        })}\n      </div>\n    </Tile>\n  );\n}\n\nexport default OHRISummaryTileTablet;\n","import React from 'react';\nimport { Button, Tile } from 'carbon-components-react';\nimport { ArrowRight32 } from '@carbon/icons-react';\nimport styles from './ohri-summary-tile.scss';\n\nconst OHRISummaryTile: React.FC<OHRISummaryTileProps> = ({ title, subTitle, value, onClickView }) => {\n  return (\n    <Tile className={styles.tile}>\n      <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between' }}>\n        <div className={styles.tileTitle}>{title}</div>\n        <div>\n          {onClickView && (\n            <Button size=\"small\" kind=\"ghost\" onClick={onClickView}>\n              View <ArrowRight32 style={{ width: '12px', height: '10px' }} />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      <div style={{ display: 'flex', flexDirection: 'row' }}>\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\n          <div className={styles.tileSubTitle}>{subTitle}</div>\n          <div className={styles.tileValue}>{value}</div>\n        </div>\n      </div>\n    </Tile>\n  );\n};\n\nexport interface OHRISummaryTileProps {\n  title: string;\n  subTitle: string;\n  value: number;\n  onClickView: () => void;\n}\n\nexport default OHRISummaryTile;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".openmrs-ohri__ohri-programme-summary-tiles__desktopView___hoK2j{display:flex}.openmrs-ohri__ohri-programme-summary-tiles__tileView___3B2IL{display:none}@media(max-width: 1024px){.openmrs-ohri__ohri-programme-summary-tiles__desktopView___hoK2j{display:none}.openmrs-ohri__ohri-programme-summary-tiles__tileView___3B2IL{display:flex}}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"desktopView\": \"openmrs-ohri__ohri-programme-summary-tiles__desktopView___hoK2j\",\n\t\"tileView\": \"openmrs-ohri__ohri-programme-summary-tiles__tileView___3B2IL\"\n};\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.openmrs-ohri__ohri-summary-tile__productiveHeading01___3t64f{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.openmrs-ohri__ohri-summary-tile__productiveHeading02___3hXEV{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.openmrs-ohri__ohri-summary-tile__productiveHeading03___1qbEQ{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.openmrs-ohri__ohri-summary-tile__productiveHeading04___3kTh1{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.openmrs-ohri__ohri-summary-tile__productiveHeading05___1Cwvr{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.openmrs-ohri__ohri-summary-tile__productiveHeading06___3vWsc{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.openmrs-ohri__ohri-summary-tile__bodyShort01___2y3Tm{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.openmrs-ohri__ohri-summary-tile__helperText01___1s_Nc{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.openmrs-ohri__ohri-summary-tile__bodyShort02___3Fawf{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.openmrs-ohri__ohri-summary-tile__bodyLong01___3_ois{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.openmrs-ohri__ohri-summary-tile__bodyLong02___2q6yx{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.openmrs-ohri__ohri-summary-tile__label01___1I34_{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.openmrs-ohri__ohri-summary-tile__text01___2s6Q_{color:#161616}.openmrs-ohri__ohri-summary-tile__text02___3xHhV{color:#525252}aside{background-color:#fff !important}div[class*=-esm-login__styles__center]>img{width:140px}.tab-12rem>button{width:12rem !important}.tab-14rem>button{width:14rem !important}.tab-16rem>button{width:16rem !important}.openmrs-ohri__ohri-summary-tile__tile___FoqBH{height:126px;padding:1px 0 16px 16px;border:solid 1px #e0e0e0;display:flex;flex-direction:column;background-color:#fff}.openmrs-ohri__ohri-summary-tile__tileTitle___2p5r2{height:18px;margin:15px 65px 24px 0;font-size:14px;font-weight:600;line-height:1.29;letter-spacing:.16px;color:#525252}.openmrs-ohri__ohri-summary-tile__tileSubTitle___2h-qA{height:16px;font-size:12px;line-height:1.33;letter-spacing:.32px;color:#525252}.openmrs-ohri__ohri-summary-tile__tileValue___NBtNL{margin:5px 35px 0 0;font-size:28px;line-height:1.29;color:#161616}.openmrs-ohri__ohri-summary-tile__tabletTile___2K-fA{width:100%;height:126px;margin:17px 16px;padding:16px 18px 16px 16px;border:solid 1px #e0e0e0}.openmrs-ohri__ohri-summary-tile__tabletTileTitle___N37my{height:18px;margin:0 392px 24px 0;font-size:14px;font-weight:600;font-stretch:normal;font-style:normal;line-height:1.29;letter-spacing:.16px;color:#525252}.openmrs-ohri__ohri-summary-tile__tabletTileSubTitle___20de5{height:16px;font-size:12px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:1.33;letter-spacing:.32px;color:#0f62fe}.openmrs-ohri__ohri-summary-tile__tabletTileValue___2tfyv{height:36px;font-size:28px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:1.29;letter-spacing:normal;color:#161616}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"productiveHeading01\": \"openmrs-ohri__ohri-summary-tile__productiveHeading01___3t64f\",\n\t\"productiveHeading02\": \"openmrs-ohri__ohri-summary-tile__productiveHeading02___3hXEV\",\n\t\"productiveHeading03\": \"openmrs-ohri__ohri-summary-tile__productiveHeading03___1qbEQ\",\n\t\"productiveHeading04\": \"openmrs-ohri__ohri-summary-tile__productiveHeading04___3kTh1\",\n\t\"productiveHeading05\": \"openmrs-ohri__ohri-summary-tile__productiveHeading05___1Cwvr\",\n\t\"productiveHeading06\": \"openmrs-ohri__ohri-summary-tile__productiveHeading06___3vWsc\",\n\t\"bodyShort01\": \"openmrs-ohri__ohri-summary-tile__bodyShort01___2y3Tm\",\n\t\"helperText01\": \"openmrs-ohri__ohri-summary-tile__helperText01___1s_Nc\",\n\t\"bodyShort02\": \"openmrs-ohri__ohri-summary-tile__bodyShort02___3Fawf\",\n\t\"bodyLong01\": \"openmrs-ohri__ohri-summary-tile__bodyLong01___3_ois\",\n\t\"bodyLong02\": \"openmrs-ohri__ohri-summary-tile__bodyLong02___2q6yx\",\n\t\"label01\": \"openmrs-ohri__ohri-summary-tile__label01___1I34_\",\n\t\"text01\": \"openmrs-ohri__ohri-summary-tile__text01___2s6Q_\",\n\t\"text02\": \"openmrs-ohri__ohri-summary-tile__text02___3xHhV\",\n\t\"tile\": \"openmrs-ohri__ohri-summary-tile__tile___FoqBH\",\n\t\"tileTitle\": \"openmrs-ohri__ohri-summary-tile__tileTitle___2p5r2\",\n\t\"tileSubTitle\": \"openmrs-ohri__ohri-summary-tile__tileSubTitle___2h-qA\",\n\t\"tileValue\": \"openmrs-ohri__ohri-summary-tile__tileValue___NBtNL\",\n\t\"tabletTile\": \"openmrs-ohri__ohri-summary-tile__tabletTile___2K-fA\",\n\t\"tabletTileTitle\": \"openmrs-ohri__ohri-summary-tile__tabletTileTitle___N37my\",\n\t\"tabletTileSubTitle\": \"openmrs-ohri__ohri-summary-tile__tabletTileSubTitle___20de5\",\n\t\"tabletTileValue\": \"openmrs-ohri__ohri-summary-tile__tabletTileValue___2tfyv\"\n};\nmodule.exports = exports;\n"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined","_excluded","Row","_ref","_cx","_ref$as","as","BaseComponent","_ref$condensed","condensed","_ref$narrow","narrow","containerClassName","className","children","rest","_objectWithoutProperties","prefix","usePrefix","cx","_defineProperty","concat","React","_extends","propTypes","PropTypes","BASE_WS_API_URL","fetchLastVisit","uuid","openmrsFetch","fetchPatientList","offSet","pageSize","fetchTodayClients","date","moment","format","then","data","entry","length","cleanDuplicatePatientReferences","fetchPatientsFromObservationCodeConcept","codeConcept","valueConcept","cutOffDays","endDate","startDate","subtract","patientRefs","map","enc","resource","subject","reference","Set","Array","from","Promise","all","ref","async","getCohort","cohortUuid","version","cohortMembers","filter","member","voided","getReportingCohort","queryParams","params","join","url","getReportingCohortMembers","members","getCohorts","cohortTypeUuid","results","error","cohort","addPatientToCohort","patientUuid","method","headers","body","patient","Date","evictCohortMembership","membershipUuid","getPatientListsForPatient","membership","fetchPatientsFinalHIVStatus","patientUUID","finalHIVCodeConcept","finalPositiveHIVValueConcept","valueCodeableConcept","coding","display","fetchPatientComputedConcept_HIV_Status","computedHIV_StatusConcept","fetchPatientLastEncounter","encounterType","query","encounterRepresentation","fetchPatientCovidOutcome","covidOutcomesCohortUUID","BASE_FHIR_API_URL","fetchConceptNameByUuid","conceptUuid","Props","styles","tiles","tile","index","style","width","marginLeft","key","title","subTitle","value","onClickView","onClick","details","flexDirection","justifyContent","name","size","kind","height","exports","___CSS_LOADER_API_IMPORT___","push","module","id","locals"],"sourceRoot":""}