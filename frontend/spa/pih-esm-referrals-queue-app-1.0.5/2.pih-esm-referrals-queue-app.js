(window.webpackJsonp_pih_esm_referrals_queue=window.webpackJsonp_pih_esm_referrals_queue||[]).push([[2],{11:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(5),r=a.n(n),s=a(424),l=a(20),o=a(7),i=(a(283),a(336)),u=a(12),m=a.n(u),c=(a(65),a(0)),d=a(414),_=a.n(d);function f(e){const t=Object(c.useConfig)();return r.a.createElement("table",{className:_.a.table},r.a.createElement("thead",null,r.a.createElement("tr",{className:"omrs-bold "+_.a.tr},r.a.createElement("td",null,r.a.createElement(o.Trans,{i18nKey:"emr-id"},"EMR ID")),r.a.createElement("td",null,r.a.createElement(o.Trans,{i18nKey:"name"},"Name")),r.a.createElement("td",null,r.a.createElement(o.Trans,{i18nKey:"referral-date"},"Referral Date")),r.a.createElement("td",null,r.a.createElement(o.Trans,{i18nKey:"referral-type"},"Referral Type")),r.a.createElement("td",null,r.a.createElement(o.Trans,{i18nKey:"details"},"Details")),r.a.createElement("td",null,r.a.createElement(o.Trans,{i18nKey:"status"},"Status")))),r.a.createElement("tbody",null,e.referrals&&e.referrals.map((e,a)=>r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("tr",{className:_.a.tr},r.a.createElement("td",null,r.a.createElement(c.ConfigurableLink,{to:Object(c.interpolateString)(t.links.patientDash,{patientUuid:e.patient_uuid||e.person_uuid})},e.zl_emr_id)),r.a.createElement("td",null,e.patient_name),r.a.createElement("td",null,r.a.createElement(c.ConfigurableLink,{to:Object(c.interpolateString)(t.links.visitPage,{patientUuid:e.patient_uuid||e.person_uuid,visitUuid:e.visit_uuid})},function(e){const t=m.a.utc(e),a=m.a.utc(new Date);return t.date()===a.date()&&t.month()===a.month()&&t.year()===a.year()?m()().calendar().split(" ")[0]:t.year()===a.year()?t.format("DD MMM"):t.format("DD MMM YYYY")}(e.referral_date))),r.a.createElement("td",null,e.referral_type),r.a.createElement("td",null,e.details),r.a.createElement("td",null,t.pendingStatuses.includes(e.fulfillment_status)?r.a.createElement(c.ConfigurableLink,{to:Object(c.interpolateString)(t.links.homeVisitForm,{patientUuid:e.patient_uuid||e.person_uuid,visitUuid:e.visit_uuid,encounterUuid:e.encounter_uuid})},e.fulfillment_status):e.fulfillment_status))))))}var p=a(416),j=a.n(p),h=a(429);a(418),a(420);function b(e){const[t,a]=r.a.useState([]),[n,s]=r.a.useState(""),[l,u]=r.a.useState(""),d=m()(),[_,p]=r.a.useState(m()().subtract(1,"month")),[b,v]=r.a.useState(d),[y,E]=r.a.useState(""),[k,q]=r.a.useState(!1),[w,D]=r.a.useState(!1),{t:x,i18n:C}=Object(o.useTranslation)(),z=C.language.match(/^(en|fr|ht).*/),N=z&&z[1]||"en";r.a.useEffect(()=>{m.a.locale("ht"===N?"fr":N)},[N]),r.a.useEffect(()=>{if(_&&b){const e=function({fromDate:e,toDate:t,locale:a}){return Object(c.openmrsObservableFetch)(`/ws/rest/v1/reportingrest/reportdata/cd7dfde7-764a-4da6-81c2-d5887ed1df51?startDate=${e}&endDate=${t}&locale=${a}`).pipe(Object(h.a)(({data:e})=>e.dataSets[0].rows))}({fromDate:_.format("YYYY-MM-DD"),toDate:b.format("YYYY-MM-DD"),locale:N}).subscribe(e=>a(e),Object(c.createErrorHandler)());return()=>e.unsubscribe()}},[_,b,N]);const M=t.filter(e=>!n||e.referral_type==n).filter(e=>!l||e.fulfillment_status==l).filter(e=>{return t=e,!(a=y)||function(e){return e.split(/\s/).map(e=>{const t=g(e);return new RegExp("\\b"+t,"i")})}(a).every(e=>e.test(g(t.patient_name)))||new RegExp(a,"i").test(t.zl_emr_id);var t,a}),S=[...new Set(t.map(e=>e.referral_type))],T=[...new Set(t.map(e=>e.fulfillment_status).filter(e=>null!=e))];return r.a.createElement("div",{className:j.a.container},r.a.createElement("div",{className:"omrs-card omrs-margin-top-16 omrs-padding-16"},r.a.createElement("div",{className:"omrs-type-title-2"},r.a.createElement(o.Trans,{i18nKey:"referrals-queue"},"Referrals Queue")),r.a.createElement("div",{className:j.a.controlsContainer},r.a.createElement("div",{className:j.a.inputContainer},r.a.createElement("div",{className:j.a.dateInputContainer},r.a.createElement("label",{htmlFor:"from-date"},r.a.createElement(o.Trans,{i18nKey:"from"},"From")),r.a.createElement(i.SingleDatePicker,{id:"from-date",date:_,onDateChange:e=>p(e),focused:k,onFocusChange:({focused:e})=>q(e),isOutsideRange:e=>e.isAfter(d),displayFormat:"DD MMM YYYY",numberOfMonths:1})),r.a.createElement("div",{className:j.a.dateInputContainer},r.a.createElement("label",{htmlFor:"to-date"},r.a.createElement(o.Trans,{i18nKey:"to"},"To")),r.a.createElement(i.SingleDatePicker,{id:"to-date",date:b,onDateChange:e=>v(e),focused:w,onFocusChange:({focused:e})=>D(e),isOutsideRange:e=>e.isAfter(d),displayFormat:"DD MMM YYYY",numberOfMonths:1}))),r.a.createElement("div",{className:j.a.inputContainer},r.a.createElement("div",{className:"omrs-input-group"},r.a.createElement("label",{htmlFor:"referral-type"},r.a.createElement(o.Trans,{i18nKey:"referral-type"},"Referral Type")),r.a.createElement("select",{id:"referral-type",value:n,onChange:e=>s(e.target.value),className:j.a.dropdown},r.a.createElement("option",{value:""},x("any","Any")),S.map(e=>r.a.createElement("option",{key:e,value:e},e))))),r.a.createElement("div",{className:j.a.inputContainer},r.a.createElement("div",{className:"omrs-input-group"},r.a.createElement("label",{htmlFor:"query-input"},r.a.createElement(o.Trans,{i18nKey:"filter-by-patient"},"Filter by patient")),r.a.createElement("input",{id:"query-input",type:"text",value:y,onChange:e=>E(e.target.value),className:"omrs-input-outlined"}))),r.a.createElement("div",{className:j.a.inputContainer},r.a.createElement("div",{className:"omrs-input-group"},r.a.createElement("label",{htmlFor:"status"},r.a.createElement(o.Trans,{i18nKey:"status"},"Status")),r.a.createElement("select",{id:"status",value:l,onChange:e=>u(e.target.value),className:j.a.dropdown},r.a.createElement("option",{value:""},x("any","Any")),T.map(e=>r.a.createElement("option",{key:e,value:e},e)))))),r.a.createElement("div",{className:j.a.tableContainer},r.a.createElement(f,{referrals:M}))))}function g(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}var v=a(422),y=a.n(v);function E(e){return r.a.createElement("div",{className:"omrs-main-content "+y.a.overflowAuto},r.a.createElement(s.a,{basename:window.getOpenmrsSpaBase()},r.a.createElement(l.a,{path:"/referrals-queue",component:b})))}},293:function(e,t){},344:function(e,t,a){var n={"./af":103,"./af.js":103,"./ar":104,"./ar-dz":105,"./ar-dz.js":105,"./ar-kw":106,"./ar-kw.js":106,"./ar-ly":107,"./ar-ly.js":107,"./ar-ma":108,"./ar-ma.js":108,"./ar-sa":109,"./ar-sa.js":109,"./ar-tn":110,"./ar-tn.js":110,"./ar.js":104,"./az":111,"./az.js":111,"./be":112,"./be.js":112,"./bg":113,"./bg.js":113,"./bm":114,"./bm.js":114,"./bn":115,"./bn-bd":116,"./bn-bd.js":116,"./bn.js":115,"./bo":117,"./bo.js":117,"./br":118,"./br.js":118,"./bs":119,"./bs.js":119,"./ca":120,"./ca.js":120,"./cs":121,"./cs.js":121,"./cv":122,"./cv.js":122,"./cy":123,"./cy.js":123,"./da":124,"./da.js":124,"./de":125,"./de-at":126,"./de-at.js":126,"./de-ch":127,"./de-ch.js":127,"./de.js":125,"./dv":128,"./dv.js":128,"./el":129,"./el.js":129,"./en-au":130,"./en-au.js":130,"./en-ca":131,"./en-ca.js":131,"./en-gb":132,"./en-gb.js":132,"./en-ie":133,"./en-ie.js":133,"./en-il":134,"./en-il.js":134,"./en-in":135,"./en-in.js":135,"./en-nz":136,"./en-nz.js":136,"./en-sg":137,"./en-sg.js":137,"./eo":138,"./eo.js":138,"./es":139,"./es-do":140,"./es-do.js":140,"./es-mx":141,"./es-mx.js":141,"./es-us":142,"./es-us.js":142,"./es.js":139,"./et":143,"./et.js":143,"./eu":144,"./eu.js":144,"./fa":145,"./fa.js":145,"./fi":146,"./fi.js":146,"./fil":147,"./fil.js":147,"./fo":148,"./fo.js":148,"./fr":65,"./fr-ca":149,"./fr-ca.js":149,"./fr-ch":150,"./fr-ch.js":150,"./fr.js":65,"./fy":151,"./fy.js":151,"./ga":152,"./ga.js":152,"./gd":153,"./gd.js":153,"./gl":154,"./gl.js":154,"./gom-deva":155,"./gom-deva.js":155,"./gom-latn":156,"./gom-latn.js":156,"./gu":157,"./gu.js":157,"./he":158,"./he.js":158,"./hi":159,"./hi.js":159,"./hr":160,"./hr.js":160,"./hu":161,"./hu.js":161,"./hy-am":162,"./hy-am.js":162,"./id":163,"./id.js":163,"./is":164,"./is.js":164,"./it":165,"./it-ch":166,"./it-ch.js":166,"./it.js":165,"./ja":167,"./ja.js":167,"./jv":168,"./jv.js":168,"./ka":169,"./ka.js":169,"./kk":170,"./kk.js":170,"./km":171,"./km.js":171,"./kn":172,"./kn.js":172,"./ko":173,"./ko.js":173,"./ku":174,"./ku.js":174,"./ky":175,"./ky.js":175,"./lb":176,"./lb.js":176,"./lo":177,"./lo.js":177,"./lt":178,"./lt.js":178,"./lv":179,"./lv.js":179,"./me":180,"./me.js":180,"./mi":181,"./mi.js":181,"./mk":182,"./mk.js":182,"./ml":183,"./ml.js":183,"./mn":184,"./mn.js":184,"./mr":185,"./mr.js":185,"./ms":186,"./ms-my":187,"./ms-my.js":187,"./ms.js":186,"./mt":188,"./mt.js":188,"./my":189,"./my.js":189,"./nb":190,"./nb.js":190,"./ne":191,"./ne.js":191,"./nl":192,"./nl-be":193,"./nl-be.js":193,"./nl.js":192,"./nn":194,"./nn.js":194,"./oc-lnc":195,"./oc-lnc.js":195,"./pa-in":196,"./pa-in.js":196,"./pl":197,"./pl.js":197,"./pt":198,"./pt-br":199,"./pt-br.js":199,"./pt.js":198,"./ro":200,"./ro.js":200,"./ru":201,"./ru.js":201,"./sd":202,"./sd.js":202,"./se":203,"./se.js":203,"./si":204,"./si.js":204,"./sk":205,"./sk.js":205,"./sl":206,"./sl.js":206,"./sq":207,"./sq.js":207,"./sr":208,"./sr-cyrl":209,"./sr-cyrl.js":209,"./sr.js":208,"./ss":210,"./ss.js":210,"./sv":211,"./sv.js":211,"./sw":212,"./sw.js":212,"./ta":213,"./ta.js":213,"./te":214,"./te.js":214,"./tet":215,"./tet.js":215,"./tg":216,"./tg.js":216,"./th":217,"./th.js":217,"./tk":218,"./tk.js":218,"./tl-ph":219,"./tl-ph.js":219,"./tlh":220,"./tlh.js":220,"./tr":221,"./tr.js":221,"./tzl":222,"./tzl.js":222,"./tzm":223,"./tzm-latn":224,"./tzm-latn.js":224,"./tzm.js":223,"./ug-cn":225,"./ug-cn.js":225,"./uk":226,"./uk.js":226,"./ur":227,"./ur.js":227,"./uz":228,"./uz-latn":229,"./uz-latn.js":229,"./uz.js":228,"./vi":230,"./vi.js":230,"./x-pseudo":231,"./x-pseudo.js":231,"./yo":232,"./yo.js":232,"./zh-cn":233,"./zh-cn.js":233,"./zh-hk":234,"./zh-hk.js":234,"./zh-mo":235,"./zh-mo.js":235,"./zh-tw":236,"./zh-tw.js":236};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=344},414:function(e,t,a){var n=a(49),r=a(415);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};n(r,s);e.exports=r.locals||{}},415:function(e,t,a){(t=a(50)(!1)).push([e.i,".esm-referrals-queue__table__table___20RKy {\n  width: 100%;\n}\n\n.esm-referrals-queue__table__tr___2DH86 {\n  border-bottom: 1px solid lightgrey;\n  line-height: 2rem;\n}\n\n.esm-referrals-queue__table__tr___2DH86:nth-child(even) {\n  background-color: var(--omrs-color-bg-medium-contrast);\n}\n\n.esm-referrals-queue__table__table___20RKy td {\n  padding: 0.25rem 0.5rem;\n}\n",""]),t.locals={table:"esm-referrals-queue__table__table___20RKy",tr:"esm-referrals-queue__table__tr___2DH86"},e.exports=t},416:function(e,t,a){var n=a(49),r=a(417);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};n(r,s);e.exports=r.locals||{}},417:function(e,t,a){(t=a(50)(!1)).push([e.i,".esm-referrals-queue__referrals-queue__container___1SjXv {\n  margin-right: auto;\n  margin-left: auto;\n  max-width: 1500px;\n}\n\n/* Hack inputs smaller than usual MFE */\n.esm-referrals-queue__referrals-queue__container___1SjXv input {\n  max-height: 2.5rem;\n}\n.esm-referrals-queue__referrals-queue__container___1SjXv select {\n  max-height: 2.5rem;\n}\n/* End inputs hack */\n\n.esm-referrals-queue__referrals-queue__tableContainer___265nh {\n  height: 500px;\n  overflow-x: auto;\n  margin: 0 1rem;\n  border: 2px solid lightgrey;\n  border-radius: 0.25rem;\n}\n\n.esm-referrals-queue__referrals-queue__controlsContainer___1TqkL {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.esm-referrals-queue__referrals-queue__inputContainer___sRyze {\n  display: flex;\n  width: 50%;\n  min-width: 300px;\n  text-align: left;\n  padding: 0 1rem;\n}\n\n.esm-referrals-queue__referrals-queue__inputContainer___sRyze label {\n  display: inline-block;\n  margin: 0 0.5rem 0.5rem 0;\n}\n\n.esm-referrals-queue__referrals-queue__dateInputContainer___2Qmy1 {\n  margin: 2rem 2rem 1rem 0;\n}\n\n.esm-referrals-queue__referrals-queue__dropdown___1n09q {\n  width: 100%;\n  height: 3.5rem;\n  background: transparent;\n  border: 1px solid var(--omrs-color-ink-lowest-contrast);\n  background-clip: padding-box;\n  border-radius: 2px;\n  margin: 0;\n}\n.esm-referrals-queue__referrals-queue__dropdown___1n09q:disabled {\n  opacity: 0.8;\n  background: lightgrey;\n  cursor: not-allowed;\n}\n.esm-referrals-queue__referrals-queue__dropdown___1n09q:focus {\n  border: 2px solid var(--omrs-color-interaction);\n  outline: 0;\n}\n",""]),t.locals={container:"esm-referrals-queue__referrals-queue__container___1SjXv",tableContainer:"esm-referrals-queue__referrals-queue__tableContainer___265nh",controlsContainer:"esm-referrals-queue__referrals-queue__controlsContainer___1TqkL",inputContainer:"esm-referrals-queue__referrals-queue__inputContainer___sRyze",dateInputContainer:"esm-referrals-queue__referrals-queue__dateInputContainer___2Qmy1",dropdown:"esm-referrals-queue__referrals-queue__dropdown___1n09q"},e.exports=t},420:function(e,t,a){var n=a(49),r=a(421);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};n(r,s);e.exports=r.locals||{}},421:function(e,t,a){(t=a(50)(!1)).push([e.i,"/* This is based on https://github.com/airbnb/react-dates#overriding-styles */\n\n/* NOTE: the order of these styles DO matter */\n\n/* Will edit everything selected including everything between a range of dates */\n.CalendarDay__selected_span {\n  background: var(--omrs-color-interaction-minus-one);\n  border: 1px solid var(--omrs-color-interaction);\n}\n\n/* Will edit selected date or the endpoints of a range of dates */\n.CalendarDay__selected {\n  background: var(--omrs-color-interaction-plus-one);\n  border: 1px solid var(--omrs-color-interaction-plus-two);\n}\n\n/* Will edit when hovered over. _span style also has this property */\n.CalendarDay__selected:hover {\n  background: var(--omrs-color-interaction-plus-two);\n  border: 1px solid var(--omrs-color-interaction);\n}\n\n/* Will edit when hovered over. _span style also has this property */\n.CalendarDay__selected_span:hover {\n  background: var(--omrs-color-interaction);\n  border: 1px solid var(--omrs-color-interaction-plus-one);\n}\n\n/* Will edit the underline in the focused input box */\n.DateInput_input__focused {\n  border-bottom: 2px solid var(--omrs-color-interaction);\n}\n\n/* Will edit when the second date (end date) in a range of dates */\n/* is not yet selected. Edits the dates between your mouse and said date */\n/* .CalendarDay__hovered_span:hover,\n.CalendarDay__hovered_span {\n  background: var(--omrs-color-interaction-minus-two);\n} */\n",""]),e.exports=t},422:function(e,t,a){var n=a(49),r=a(423);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};n(r,s);e.exports=r.locals||{}},423:function(e,t,a){(t=a(50)(!1)).push([e.i,".esm-referrals-queue__root__overflowAuto___2qUnr {\n  overflow: auto;\n}\n",""]),t.locals={overflowAuto:"esm-referrals-queue__root__overflowAuto___2qUnr"},e.exports=t}}]);
//# sourceMappingURL=2.pih-esm-referrals-queue-app.js.map