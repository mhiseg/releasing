{"version":3,"sources":["webpack:///./src/location-menu/location-menu.css?e77b","webpack:///./src/location-menu/location-menu.css","webpack:///./src/navbar/navbar.css?185a","webpack:///./src/navbar/navbar.css","webpack:///./src/location-menu/location-menu.component.tsx","webpack:///./src/location-menu/location-menu.resource.ts","webpack:///./src/navbar/navbar.component.tsx","webpack:///./src/root.component.tsx"],"names":["api","content","__esModule","default","module","i","options","exports","locals","___CSS_LOADER_API_IMPORT___","push","LocationMenu","props","loginLocations","setLoginLocations","React","useState","newLocation","setNewLocation","useEffect","sub","openmrsObservableFetch","pipe","map","data","subscribe","locations","createErrorHandler","unsubscribe","abortController","AbortController","locationUuid","openmrsFetch","method","body","location","headers","signal","setSessionLocation","uuid","then","onSetLocation","catch","finally","abort","className","style","menu","option","key","id","name","onClick","evt","display","Navbar","config","useConfig","user","setUser","setLocation","isLocationMenuOpen","setIsLocationMenuOpen","getCurrentUser","includeAuthStatus","sessionLocation","navbar","brand","href","links","home","url","tabIndex","src","alt","role","width","icon","faUser","locationButton","faMapMarkerAlt","faCaretUp","faCaretDown","fontSize","navbarLink","window","openmrsBase","logoutRedirect","faSignOutAlt","onMouseLeave","l","Root"],"mappings":"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","file":"2.pih-esm-refapp-navbar-app.js","sourcesContent":["var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-1!./location-menu.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".esm-refapp-navbar__location-menu__menu___H5nwB {\\n  z-index: 1000;\\n  background-color: var(--omrs-color-bg-high-contrast);\\n  border: 2px solid #63244b;\\n  border-radius: 3px;\\n  position: absolute;\\n  top: 50px;\\n  right: 70px;\\n  list-style: none;\\n  display: grid;\\n  grid-auto-columns: 240px;\\n  grid-auto-flow: column;\\n  grid-template-rows: repeat(13, min-content);\\n  border: 2px solid #63244b;\\n}\\n\\n.esm-refapp-navbar__location-menu__menu___H5nwB label {\\n  display: flex;\\n  background-color: var(--omrs-color-bg-high-contrast);\\n  color: var(--omrs-color-ink-high-contrast);\\n  padding-bottom: 0.25rem;\\n  border-bottom: 1px solid var(--omrs-color-bg-low-contrast);\\n  border-radius: 0.25rem;\\n  width: 20.5rem;\\n}\\n\\n.esm-refapp-navbar__location-menu__buttonLabel___1J_nZ {\\n  position: inherit !important;\\n}\\n\\n.esm-refapp-navbar__location-menu__menu___H5nwB button {\\n  background-color: white;\\n  border: none;\\n  color: #007fff;\\n  border-bottom: 1px solid #efefef;\\n  text-align: left;\\n  /* line-height: 1.5em; */\\n  padding: 5px;\\n  margin: 0 10px;\\n}\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"menu\": \"esm-refapp-navbar__location-menu__menu___H5nwB\",\n\t\"buttonLabel\": \"esm-refapp-navbar__location-menu__buttonLabel___1J_nZ\"\n};\nmodule.exports = exports;\n","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-1!./navbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".esm-refapp-navbar__navbar__navbar___3Le26 {\\n  z-index: 999;\\n  background-color: #501d3d;\\n  color: white;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  height: 3.2em;\\n  width: 100%;\\n  padding: 8px 30px;\\n  font-size: 16px;\\n}\\n\\n.esm-refapp-navbar__navbar__navbar___3Le26 div {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.esm-refapp-navbar__navbar__navbar___3Le26 button {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.esm-refapp-navbar__navbar__navbar___3Le26 svg {\\n  margin: 0 12px;\\n  font-size: 1.2em;\\n}\\n\\na.esm-refapp-navbar__navbar__navbarLink___ykMqC,\\na:visited.esm-refapp-navbar__navbar__navbarLink___ykMqC,\\na:hover.esm-refapp-navbar__navbar__navbarLink___ykMqC,\\na:link.esm-refapp-navbar__navbar__navbarLink___ykMqC {\\n  color: white;\\n}\\n\\na.esm-refapp-navbar__navbar__navbarLink___ykMqC {\\n  text-decoration: none;\\n}\\n\\na:hover.esm-refapp-navbar__navbar__navbarLink___ykMqC {\\n  text-decoration: underline;\\n}\\n\\n.esm-refapp-navbar__navbar__brand___3zlWB a {\\n  display: flex;\\n}\\n\\n.esm-refapp-navbar__navbar__brand___3zlWB svg {\\n  filter: invert(100%); /* can't quite get it white */\\n}\\n\\n.esm-refapp-navbar__navbar__menu___1EvyE {\\n  line-height: 1.5em;\\n}\\n\\n.esm-refapp-navbar__navbar__menu___1EvyE > div {\\n  margin: 0 16px;\\n}\\n\\n.esm-refapp-navbar__navbar__user___3tT-l {\\n  color: #ccc;\\n}\\n\\n.esm-refapp-navbar__navbar__locationButton___oeD65 {\\n  background-color: transparent;\\n  border: 1px solid #63244b;\\n  border-radius: 3px;\\n  color: white;\\n  font: inherit;\\n  padding: 2px;\\n}\\n\\n.esm-refapp-navbar__navbar__locationButton___oeD65:hover {\\n  background-color: #63244b;\\n}\\n\\n.esm-refapp-navbar__navbar__locationButton___oeD65:focus {\\n  outline: thin dotted;\\n}\\n\\n/* Hide Mozilla's button focus style */\\n@supports (-moz-appearance: none) {\\n  .esm-refapp-navbar__navbar__locationButton___oeD65::-moz-focus-inner {\\n    border: none;\\n  }\\n}\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"navbar\": \"esm-refapp-navbar__navbar__navbar___3Le26\",\n\t\"navbarLink\": \"esm-refapp-navbar__navbar__navbarLink___ykMqC\",\n\t\"brand\": \"esm-refapp-navbar__navbar__brand___3zlWB\",\n\t\"menu\": \"esm-refapp-navbar__navbar__menu___1EvyE\",\n\t\"user\": \"esm-refapp-navbar__navbar__user___3tT-l\",\n\t\"locationButton\": \"esm-refapp-navbar__navbar__locationButton___oeD65\"\n};\nmodule.exports = exports;\n","import React from \"react\";\nimport { createErrorHandler } from \"@openmrs/esm-framework\";\nimport {\n  getLoginLocations,\n  setSessionLocation\n} from \"../location-menu/location-menu.resource\";\nimport style from \"./location-menu.css\";\n\nexport default function LocationMenu(props: LocationMenuProps) {\n  const [loginLocations, setLoginLocations] = React.useState([]);\n  const [newLocation, setNewLocation]: [\n    Location,\n    (l: Location) => void\n  ] = React.useState(null);\n\n  React.useEffect(() => {\n    const sub = getLoginLocations().subscribe(\n      locations => setLoginLocations(locations),\n      createErrorHandler()\n    );\n    return () => sub.unsubscribe();\n  }, []);\n\n  React.useEffect(() => {\n    const abortController = new AbortController();\n    if (newLocation) {\n      setSessionLocation(newLocation.uuid, abortController)\n        .then(() => props.onSetLocation(newLocation))\n        .catch(createErrorHandler())\n        .finally(() => setNewLocation(null));\n    }\n    return () => abortController.abort();\n  }, [newLocation]);\n\n  const RadioInput = (option: Location) => (\n    <button\n      key={\"refapp-navbar-\" + option.uuid}\n      id={option.uuid}\n      name=\"location\"\n      onClick={evt => setNewLocation(option)}\n    >\n      {option.display}\n    </button>\n  );\n\n  return <div className={style.menu}>{loginLocations.map(RadioInput)}</div>;\n}\n\ninterface LocationMenuProps {\n  onSetLocation: (location: Location) => void;\n}\n\ntype Location = {\n  uuid: string;\n  display: string;\n};\n","import { openmrsFetch, openmrsObservableFetch } from \"@openmrs/esm-framework\";\nimport { Observable } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\n\nexport function getLoginLocations(): Observable<Object[]> {\n  return openmrsObservableFetch(\n    `/ws/rest/v1/location?tag=Login%20Location&v=custom:(uuid,display)`\n  ).pipe(map(({ data }) => data[\"results\"]));\n}\n\nexport function setSessionLocation(\n  locationUuid: string,\n  abortController: AbortController\n): Promise<any> {\n  return openmrsFetch(\"/ws/rest/v1/appui/session\", {\n    method: \"POST\",\n    body: { location: locationUuid },\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    signal: abortController.signal\n  });\n}\n","/* eslint-disable jsx-a11y/tabindex-no-positive */\nimport React from \"react\";\nimport { Trans } from \"react-i18next\";\nimport { getCurrentUser, useConfig } from \"@openmrs/esm-framework\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faSignOutAlt,\n  faUser,\n  faMapMarkerAlt,\n  faCaretDown,\n  faCaretUp\n} from \"@fortawesome/free-solid-svg-icons\";\nimport LocationMenu from \"../location-menu/location-menu.component\";\n\nimport style from \"./navbar.css\";\n\nexport default function Navbar(props) {\n  const config = useConfig();\n  const [user, setUser] = React.useState(null);\n  const [location, setLocation] = React.useState(null);\n  const [isLocationMenuOpen, setIsLocationMenuOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    const sub = getCurrentUser({ includeAuthStatus: true }).subscribe(user => {\n      setUser(user);\n      if (user.user) {\n        // with current getCurrentUser implementation there's no way to get sessionLocation type-safely\n        setLocation((user as any).sessionLocation);\n      }\n    });\n    return () => sub.unsubscribe();\n  }, []);\n\n  // console.log(user);\n  return (\n    <nav>\n      <div className={style.navbar}>\n        <div className={`omrs-type-title-4 ${style.brand}`}>\n          <a href={config.links.home.url} tabIndex={1}>\n            {config.brand.src ? (\n              <img alt={config.brand.alt} src={config.brand.src} />\n            ) : (\n              <svg role=\"img\" width=\"10rem\">\n                <use href=\"#omrs-logo-partial-mono\"></use>\n              </svg>\n            )}\n          </a>\n        </div>\n        <div className={style.menu}>\n          <div className={style.user}>\n            <FontAwesomeIcon icon={faUser} />\n            {user && user.user && user.user.display}\n          </div>\n          <div>\n            <button\n              className={style.locationButton}\n              onClick={() => setIsLocationMenuOpen(!isLocationMenuOpen)}\n              tabIndex={2}\n            >\n              <FontAwesomeIcon icon={faMapMarkerAlt} />\n              {location && location.display}\n              <FontAwesomeIcon\n                icon={isLocationMenuOpen ? faCaretUp : faCaretDown}\n                style={{ fontSize: \"12px\" }}\n              />\n            </button>\n          </div>\n          <div>\n            <a\n              className={style.navbarLink}\n              href={`${\n                (window as any).openmrsBase\n              }/appui/header/logout.action?successUrl=${\n                config.links.logoutRedirect.url\n              }`}\n              tabIndex={3}\n            >\n              <Trans id=\"logout\">Logout</Trans>\n              <FontAwesomeIcon icon={faSignOutAlt} />\n            </a>\n          </div>\n        </div>\n      </div>\n      <div\n        style={isLocationMenuOpen ? {} : { display: \"none\" }}\n        onMouseLeave={() => setIsLocationMenuOpen(false)}\n      >\n        <LocationMenu\n          onSetLocation={l => {\n            setLocation(l);\n            setIsLocationMenuOpen(false);\n          }}\n        />\n      </div>\n    </nav>\n  );\n}\n","import React from \"react\";\nimport Navbar from \"./navbar/navbar.component\";\n\nexport default function Root(props) {\n  return <Navbar></Navbar>;\n}\n"],"sourceRoot":""}